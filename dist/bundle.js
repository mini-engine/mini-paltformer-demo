!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=190)}([function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.TimeManager=e.DomManager=e.AssetManager=e.InputManager=e.SceneManager=e.Game=void 0,i(n(1),e),i(n(32),e),i(n(69),e);var o=n(2);Object.defineProperty(e,"Game",{enumerable:!0,get:function(){return o.Game}}),i(n(143),e),i(n(38),e),i(n(8),e),i(n(145),e),i(n(146),e),i(n(147),e),i(n(149),e),i(n(151),e),i(n(152),e),i(n(153),e),i(n(155),e),i(n(157),e),i(n(158),e),i(n(159),e),i(n(83),e),i(n(160),e),i(n(71),e),i(n(82),e);var a=n(80);Object.defineProperty(e,"SceneManager",{enumerable:!0,get:function(){return a.SceneManagerFacade}});var u=n(79);Object.defineProperty(e,"InputManager",{enumerable:!0,get:function(){return u.InputManagerFacade}});var s=n(77);Object.defineProperty(e,"AssetManager",{enumerable:!0,get:function(){return s.AssetManagerFacade}});var c=n(78);Object.defineProperty(e,"DomManager",{enumerable:!0,get:function(){return c.DomManagerFacade}});var f=n(81);Object.defineProperty(e,"TimeManager",{enumerable:!0,get:function(){return f.TimeManagerFacade}}),i(n(73),e),i(n(74),e),i(n(72),e)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector2=void 0;var r=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"magnitude",{get:function(){return Math.sqrt(Math.pow(this._x,2)+Math.pow(this._y,2))},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e){this._x=t,this._y=e},t.prototype.equals=function(t){return this._x===t.x&&this._y===t.y},t.prototype.clone=function(){return new t(this._x,this._y)},t.add=function(t,e,n){return t.set(e.x+n.x,e.y+n.y),t},t.subtract=function(t,e,n){return t.set(e.x-n.x,e.y-n.y),t},t.unit=function(t,e){return 0===e.magnitude?t.set(0,0):t.set(e.x/e.magnitude,e.y/e.magnitude),t},t.normal=function(t,e){return t.set(-e.y,e.x),this.unit(t,t)},t.scale=function(t,e,n){return t.set(e.x*n,e.y*n),t},t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.cross=function(t,e){return t.x*e.y-t.y*e.x},t.round=function(t,e){return t.set(Math.round(e.x),Math.round(e.y)),t},t}();e.Vector2=r},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Game=e.container=e.EVENT_UPDATE_RENDER=e.EVENT_UPDATE_PHYSICS=e.EVENT_UPDATE=e.EVENT_START=void 0;var i=n(115),o=n(142),a=n(77),u=n(78),s=n(79),c=n(80),f=n(81),l=n(76);e.EVENT_START="mini-engine-start",e.EVENT_UPDATE="mini-engine-update",e.EVENT_UPDATE_PHYSICS="mini-engine-update-physics",e.EVENT_UPDATE_RENDER="mini-engine-update-render",e.container=new o.Container;var h={containerNode:null,gameWidth:320,gameHeight:180,debugEnabled:!1,bgColor:"#000000",context2d:"fallback",physicsFramerate:l.DEFAULT_FRAMERATE,physicsIterations:l.DEFAULT_ITERATIONS},p=function(){function t(t){if(this._running=!1,this.frameRequestId=null,this._config=r(r({},h),t),null===this.config.containerNode)throw new Error("Config parameter 'containerNode' cannot be empty.");this.setupManagers(),this.initializeFacades()}return t.prototype.setupManagers=function(){i.loadDependencies(e.container,this),this.renderManager=e.container.getSingleton("RenderManager"),this.sceneManager=e.container.getSingleton("SceneManager"),this.collisionManager=e.container.getSingleton("CollisionManager"),this.timeManager=e.container.getSingleton("TimeManager"),this.physicsIterationManager=e.container.getSingleton("PhysicsIterationManager")},t.prototype.initializeFacades=function(){a.AssetManagerFacade.initialize(),u.DomManagerFacade.initialize(),s.InputManagerFacade.initialize(),c.SceneManagerFacade.initialize(),f.TimeManagerFacade.initialize()},Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"running",{get:function(){return this._running},enumerable:!1,configurable:!0}),t.prototype.addScene=function(t,e,n){void 0===n&&(n=!1),this.sceneManager.addScene(t,e,n)},t.prototype.run=function(){this.sceneManager.loadOpeningScene(),this.timeManager.start(),this.requestAnimationFrame()},t.prototype.stop=function(){var t=this;this.stopLoop(),setTimeout((function(){t.sceneManager.unloadCurrentScene(),t.renderManager.clearCanvas(t._config.bgColor)}),100)},t.prototype.gameLoop=function(t){var n=this;try{this._running=!0,this.timeManager.update(t),this.collisionManager.prepare(),this.dispatchFrameEvent(e.EVENT_START),this.dispatchFrameEvent(e.EVENT_UPDATE),this.physicsIterationManager.update((function(){return n.dispatchFrameEvent(e.EVENT_UPDATE_PHYSICS)})),this.dispatchFrameEvent(e.EVENT_UPDATE_RENDER),this.renderManager.clearCanvas(this._config.bgColor),this.renderManager.render(),this.requestAnimationFrame()}catch(t){console.error("Mini Engine Error: "+t),this.stopLoop()}},t.prototype.stopLoop=function(){window.cancelAnimationFrame(this.frameRequestId),this._running=!1,this.frameRequestId=null},t.prototype.resumeLoop=function(){0==this._running&&null===this.frameRequestId&&this.requestAnimationFrame()},t.prototype.requestAnimationFrame=function(){var t=this;this.frameRequestId=window.requestAnimationFrame((function(e){return t.gameLoop(e)}))},t.prototype.dispatchFrameEvent=function(t){window.dispatchEvent(new CustomEvent(t))},t}();e.Game=p},function(t,e,n){var r=n(5),i=n(33).f,o=n(25),a=n(30),u=n(50),s=n(93),c=n(165);t.exports=function(t,e){var n,f,l,h,p,d=t.target,y=t.global,g=t.stat;if(n=y?r:g?r[d]||u(d,{}):(r[d]||{}).prototype)for(f in e){if(h=e[f],l=t.noTargetGet?(p=i(n,f))&&p.value:n[f],!c(y?f:d+(g?".":"#")+f,t.forced)&&void 0!==l){if(typeof h==typeof l)continue;s(h,l)}(t.sham||l&&l.sham)&&o(h,"sham",!0),a(n,f,h,t)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n(161))},function(t,e,n){var r=n(4);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RenderComponent=e.PhysicsComponent=e.Component=void 0;var o=n(113),a=n(2),u=function(){function t(){var t=this;this.sceneManager=a.container.getSingleton("SceneManager"),this.gameObjectManager=a.container.getSingleton("GameObjectManager"),this.uuid=o.v4(),this.allowMultiple=!0,this.type=null,this.name=null,this.gameObject=null,this._active=!0,this.started=!1,this.gameLoopEventHandler=function(e){!1!==t._active&&(!1===t.started&&e.type===a.EVENT_START?(t.start(),t.started=!0):!0===t.started&&e.type===t.updateEvent&&t.update())},window.addEventListener(a.EVENT_START,this.gameLoopEventHandler),window.addEventListener(this.updateEvent,this.gameLoopEventHandler)}return Object.defineProperty(t.prototype,"updateEvent",{get:function(){return a.EVENT_UPDATE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),t.prototype.setActive=function(t){this._active=t},t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.getCurrentScene=function(){return this.sceneManager.getCurrentScene()},t.prototype.getComponentByName=function(t){return this.gameObject.getComponentByName(t)},t.prototype.getComponentByType=function(t){return this.gameObject.getComponentByType(t)},t.prototype.getComponentsByType=function(t){return this.gameObject.getComponentsByType(t)},t.prototype.findGameObjectByName=function(t){return this.gameObjectManager.findGameObjectByName(t)},t.prototype.findGameObjectsByTag=function(t){return this.gameObjectManager.findGameObjectsByTag(t)},t.prototype.findGameObjectByTag=function(t){return this.gameObjectManager.findGameObjectByTag(t)},t.prototype.destroyGameObjectByName=function(t){this.destroyGameObject(this.findGameObjectByName(t))},t.prototype.destroyGameObject=function(t){this.gameObjectManager.destroyGameObject(t)},t.prototype.destroy=function(){var t=this;window.removeEventListener(a.EVENT_START,this.gameLoopEventHandler),window.removeEventListener(this.updateEvent,this.gameLoopEventHandler),Object.keys(this).forEach((function(e){return delete t[e]}))},t}();e.Component=u;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"updateEvent",{get:function(){return a.EVENT_UPDATE_PHYSICS},enumerable:!1,configurable:!0}),e}(u);e.PhysicsComponent=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"updateEvent",{get:function(){return a.EVENT_UPDATE_RENDER},enumerable:!1,configurable:!0}),e}(u);e.RenderComponent=c},function(t,e,n){"use strict";var r=n(3),i=n(5),o=n(35),a=n(45),u=n(6),s=n(57),c=n(98),f=n(4),l=n(7),h=n(58),p=n(12),d=n(26),y=n(31),g=n(28),m=n(42),v=n(34),b=n(37),_=n(59),M=n(54),x=n(167),w=n(97),O=n(33),j=n(24),P=n(88),R=n(25),T=n(30),S=n(52),E=n(44),C=n(46),A=n(53),D=n(10),V=n(100),I=n(101),F=n(60),L=n(43),G=n(47).forEach,B=E("hidden"),k=D("toPrimitive"),N=L.set,U=L.getterFor("Symbol"),q=Object.prototype,H=i.Symbol,W=o("JSON","stringify"),z=O.f,Y=j.f,Q=x.f,X=P.f,K=S("symbols"),Z=S("op-symbols"),$=S("string-to-symbol-registry"),J=S("symbol-to-string-registry"),tt=S("wks"),et=i.QObject,nt=!et||!et.prototype||!et.prototype.findChild,rt=u&&f((function(){return 7!=b(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=z(q,e);r&&delete q[e],Y(t,e,n),r&&t!==q&&Y(q,e,r)}:Y,it=function(t,e){var n=K[t]=b(H.prototype);return N(n,{type:"Symbol",tag:t,description:e}),u||(n.description=e),n},ot=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof H},at=function(t,e,n){t===q&&at(Z,e,n),d(t);var r=m(e,!0);return d(n),l(K,r)?(n.enumerable?(l(t,B)&&t[B][r]&&(t[B][r]=!1),n=b(n,{enumerable:v(0,!1)})):(l(t,B)||Y(t,B,v(1,{})),t[B][r]=!0),rt(t,r,n)):Y(t,r,n)},ut=function(t,e){d(t);var n=g(e),r=_(n).concat(lt(n));return G(r,(function(e){u&&!st.call(n,e)||at(t,e,n[e])})),t},st=function(t){var e=m(t,!0),n=X.call(this,e);return!(this===q&&l(K,e)&&!l(Z,e))&&(!(n||!l(this,e)||!l(K,e)||l(this,B)&&this[B][e])||n)},ct=function(t,e){var n=g(t),r=m(e,!0);if(n!==q||!l(K,r)||l(Z,r)){var i=z(n,r);return!i||!l(K,r)||l(n,B)&&n[B][r]||(i.enumerable=!0),i}},ft=function(t){var e=Q(g(t)),n=[];return G(e,(function(t){l(K,t)||l(C,t)||n.push(t)})),n},lt=function(t){var e=t===q,n=Q(e?Z:g(t)),r=[];return G(n,(function(t){!l(K,t)||e&&!l(q,t)||r.push(K[t])})),r};(s||(T((H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=A(t),n=function(t){this===q&&n.call(Z,t),l(this,B)&&l(this[B],e)&&(this[B][e]=!1),rt(this,e,v(1,t))};return u&&nt&&rt(q,e,{configurable:!0,set:n}),it(e,t)}).prototype,"toString",(function(){return U(this).tag})),T(H,"withoutSetter",(function(t){return it(A(t),t)})),P.f=st,j.f=at,O.f=ct,M.f=x.f=ft,w.f=lt,V.f=function(t){return it(D(t),t)},u&&(Y(H.prototype,"description",{configurable:!0,get:function(){return U(this).description}}),a||T(q,"propertyIsEnumerable",st,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:H}),G(_(tt),(function(t){I(t)})),r({target:"Symbol",stat:!0,forced:!s},{for:function(t){var e=String(t);if(l($,e))return $[e];var n=H(e);return $[e]=n,J[n]=e,n},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(l(J,t))return J[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),r({target:"Object",stat:!0,forced:!s,sham:!u},{create:function(t,e){return void 0===e?b(t):ut(b(t),e)},defineProperty:at,defineProperties:ut,getOwnPropertyDescriptor:ct}),r({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:ft,getOwnPropertySymbols:lt}),r({target:"Object",stat:!0,forced:f((function(){w.f(1)}))},{getOwnPropertySymbols:function(t){return w.f(y(t))}}),W)&&r({target:"JSON",stat:!0,forced:!s||f((function(){var t=H();return"[null]"!=W([t])||"{}"!=W({a:t})||"{}"!=W(Object(t))}))},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(p(e)||void 0!==t)&&!ot(t))return h(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ot(e))return e}),i[1]=e,W.apply(null,i)}});H.prototype[k]||R(H.prototype,k,H.prototype.valueOf),F(H,"Symbol"),C[B]=!0},function(t,e,n){var r=n(5),i=n(52),o=n(7),a=n(53),u=n(57),s=n(98),c=i("wks"),f=r.Symbol,l=s?f:f&&f.withoutSetter||a;t.exports=function(t){return o(c,t)||(u&&o(f,t)?c[t]=f[t]:c[t]=l("Symbol."+t)),c[t]}},function(t,e,n){"use strict";var r=n(28),i=n(169),o=n(62),a=n(43),u=n(103),s=a.set,c=a.getterFor("Array Iterator");t.exports=u(Array,"Array",(function(t,e){s(this,{type:"Array Iterator",target:r(t),index:0,kind:e})}),(function(){var t=c(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";var r=n(3),i=n(6),o=n(5),a=n(7),u=n(12),s=n(24).f,c=n(93),f=o.Symbol;if(i&&"function"==typeof f&&(!("description"in f.prototype)||void 0!==f().description)){var l={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new f(t):void 0===t?f():f(t);return""===t&&(l[e]=!0),e};c(h,f);var p=h.prototype=f.prototype;p.constructor=h;var d=p.toString,y="Symbol(test)"==String(f("test")),g=/^Symbol\((.*)\)[^)]+$/;s(p,"description",{configurable:!0,get:function(){var t=u(this)?this.valueOf():this,e=d.call(t);if(a(l,t))return"";var n=y?e.slice(7,-1):e.replace(g,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:h})}},function(t,e,n){n(101)("iterator")},function(t,e,n){var r=n(30),i=Date.prototype,o=i.toString,a=i.getTime;new Date(NaN)+""!="Invalid Date"&&r(i,"toString",(function(){var t=a.call(this);return t==t?o.call(this):"Invalid Date"}))},function(t,e,n){n(3)({target:"Object",stat:!0,sham:!n(6)},{create:n(37)})},function(t,e,n){var r=n(3),i=n(4),o=n(31),a=n(63),u=n(105);r({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!u},{getPrototypeOf:function(t){return a(o(t))}})},function(t,e,n){n(3)({target:"Object",stat:!0},{setPrototypeOf:n(106)})},function(t,e,n){var r=n(64),i=n(30),o=n(172);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(t,e,n){var r=n(3),i=n(35),o=n(61),a=n(26),u=n(12),s=n(37),c=n(174),f=n(4),l=i("Reflect","construct"),h=f((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),p=!f((function(){l((function(){}))})),d=h||p;r({target:"Reflect",stat:!0,forced:d,sham:d},{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(p&&!h)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var i=n.prototype,f=s(u(i)?i:Object.prototype),d=Function.apply.call(t,f,e);return u(d)?d:f}})},function(t,e,n){"use strict";var r=n(30),i=n(26),o=n(4),a=n(175),u=RegExp.prototype,s=u.toString,c=o((function(){return"/a/b"!=s.call({source:"a",flags:"b"})})),f="toString"!=s.name;(c||f)&&r(RegExp.prototype,"toString",(function(){var t=i(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in u)?a.call(t):n)}),{unsafe:!0})},function(t,e,n){"use strict";var r=n(176).charAt,i=n(43),o=n(103),a=i.set,u=i.getterFor("String Iterator");o(String,"String",(function(t){a(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){var r=n(5),i=n(107),o=n(11),a=n(25),u=n(10),s=u("iterator"),c=u("toStringTag"),f=o.values;for(var l in i){var h=r[l],p=h&&h.prototype;if(p){if(p[s]!==f)try{a(p,s,f)}catch(t){p[s]=f}if(p[c]||a(p,c,l),i[l])for(var d in o)if(p[d]!==o[d])try{a(p,d,o[d])}catch(t){p[d]=o[d]}}}},function(t,e,n){var r=n(6),i=n(90),o=n(26),a=n(42),u=Object.defineProperty;e.f=r?u:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(6),i=n(24),o=n(34);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(12);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(3),i=n(6);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(24).f})},function(t,e,n){var r=n(89),i=n(41);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RenderData=e.RenderDataType=void 0;var r=n(1);!function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Geometric=2]="Geometric",t[t.Collider=3]="Collider"}(e.RenderDataType||(e.RenderDataType={}));var i=function(){function t(){this.ui=!1,this.debug=!1,this.layer=null,this._position=new r.Vector2(0,0),this._positionInViewport=new r.Vector2(0,0)}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position.set(t.x,t.y)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"positionInViewport",{get:function(){return this._positionInViewport},set:function(t){this._positionInViewport.set(t.x,t.y)},enumerable:!1,configurable:!0}),t}();e.RenderData=i},function(t,e,n){var r=n(5),i=n(25),o=n(7),a=n(50),u=n(92),s=n(43),c=s.get,f=s.enforce,l=String(String).split("String");(t.exports=function(t,e,n,u){var s,c=!!u&&!!u.unsafe,h=!!u&&!!u.enumerable,p=!!u&&!!u.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),(s=f(n)).source||(s.source=l.join("string"==typeof e?e:""))),t!==r?(c?!p&&t[e]&&(h=!0):delete t[e],h?t[e]=n:i(t,e,n)):h?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||u(this)}))},function(t,e,n){var r=n(41);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var r=n(1),i=function(){function t(t,e,n,i){this._position=new r.Vector2,this._center=new r.Vector2,this._width=0,this._height=0,this.set(t,e,n,i)}return Object.defineProperty(t.prototype,"x",{get:function(){return this._position.x},set:function(t){this._position.set(t,this._position.y)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._position.y},set:function(t){this._position.set(this._position.x,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x1",{get:function(){return this._position.x+this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y1",{get:function(){return this._position.y+this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position.set(t.x,t.y)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return this._center.set(this.x+this.width/2,this.y+this.height/2),this._center},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e,n,r){this._position.set(t,e),this._width=n,this._height=r},t.prototype.equals=function(t){return this.position.equals(t.position)&&this.width===t.width&&this.height===t.height},t.prototype.updateFromRect=function(t){this.set(t.x,t.y,t.width,t.height)},t.prototype.overlappingRectangle=function(t){return this.x1>=t.x&&this.x<=t.x1&&this.y1>=t.y&&this.y<=t.y1},t}();e.Rectangle=i},function(t,e,n){var r=n(6),i=n(88),o=n(34),a=n(28),u=n(42),s=n(7),c=n(90),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=a(t),e=u(e,!0),c)try{return f(t,e)}catch(t){}if(s(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(95),i=n(5),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r,i=n(26),o=n(99),a=n(56),u=n(46),s=n(166),c=n(91),f=n(44),l=f("IE_PROTO"),h=function(){},p=function(t){return"<script>"+t+"<\/script>"},d=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;d=r?function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=c("iframe")).style.display="none",s.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete d.prototype[a[n]];return d()};u[l]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=i(t),n=new h,h.prototype=null,n[l]=t):n=d(),void 0===e?n:o(n,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameObject=e.LAYER_DEFAULT=void 0;var r=n(113),i=n(71),o=n(2);e.LAYER_DEFAULT="Default";var a=function(){function t(){var t=this;this._uuid=r.v4(),this.name=null,this.tag=null,this.layer=e.LAYER_DEFAULT,this.ui=!1,this._active=!0,this.started=!1,this._parent=null,this.sceneManager=o.container.getSingleton("SceneManager"),this.gameObjectManager=o.container.getSingleton("GameObjectManager"),this.components=[],this.inactiveComponents=[],this.inactiveChildren=[],this.gameLoopEventHandler=function(e){!1!==t._active&&(!1===t.started&&e.type===o.EVENT_START?(t.start(),t.started=!0):!0===t.started&&e.type===o.EVENT_UPDATE&&t.update())},this.addComponent((function(){return new i.Transform})),window.addEventListener(o.EVENT_START,this.gameLoopEventHandler),window.addEventListener(o.EVENT_UPDATE,this.gameLoopEventHandler)}return Object.defineProperty(t.prototype,"uuid",{get:function(){return this._uuid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return this.getComponentByType(i.TYPE_TRANSFORM)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){this._parent=t,this.transform.forceUpdate()},enumerable:!1,configurable:!0}),t.prototype.getCurrentScene=function(){return this.sceneManager.getCurrentScene()},t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.findGameObjectByName=function(t){return this.gameObjectManager.findGameObjectByName(t)},t.prototype.findGameObjectsByTag=function(t){return this.gameObjectManager.findGameObjectsByTag(t)},t.prototype.findGameObjectByTag=function(t){return this.gameObjectManager.findGameObjectByTag(t)},t.prototype.addComponent=function(t,e){void 0===e&&(e=null);var n=t();return this.checkMultipleComponent(n),n.name=e,n.gameObject=this,this.components.push(n),n},t.prototype.checkMultipleComponent=function(t){if(!1===t.allowMultiple&&this.hasComponentOfType(t.type))throw new Error("GameObject only allows one component of type "+t.type)},t.prototype.getComponents=function(){return this.components},t.prototype.getComponentByName=function(t){return this.components.reduce((function(e,n){return n.name===t?n:e}),null)},t.prototype.getComponentByType=function(t){return this.components.reduce((function(e,n){return n.type===t?n:e}),null)},t.prototype.getComponentsByType=function(t){return this.components.filter((function(e){return e.type===t}))},t.prototype.hasComponentOfName=function(t){return null!==this.getComponentByName(t)},t.prototype.hasComponentOfType=function(t){return null!==this.getComponentByType(t)},t.prototype.removeComponentByName=function(t){var e=this;this.components.every((function(n,r){if(n.name===t)return n.destroy(),delete e.components[r],!1}))},t.prototype.removeComponentByType=function(t){var e=this;this.components.every((function(n,r){if(n.type===t)return n.destroy(),delete e.components[r],!1}))},t.prototype.removeComponents=function(){var t=this;this.components.every((function(e,n){return e.destroy(),delete t.components[n]})),this.components=[]},t.prototype.addChild=function(t,e){return this.gameObjectManager.addGameObject(t,e,this)},t.prototype.getChildren=function(){return this.gameObjectManager.findGameObjectsByParent(this)},t.prototype.getChild=function(t){return this.gameObjectManager.findGameObjectByParentAndName(this,t)},t.prototype.destroyChildren=function(){var t=this;this.gameObjectManager.findGameObjectsByParent(this).forEach((function(e){return t.gameObjectManager.destroyGameObject(e)}))},t.prototype.setActive=function(t){var e=this;!1===t&&this.updateInactiveCache(),this.components.filter((function(t){return-1===e.inactiveComponents.indexOf(t.uuid)})).forEach((function(e){return e.setActive(t)})),this.getChildren().filter((function(t){return-1===e.inactiveChildren.indexOf(t.uuid)})).forEach((function(e){return e.setActive(t)})),this.transform.forceUpdate(),this._active=t},t.prototype.updateInactiveCache=function(){var t=this;this.inactiveComponents=[],this.inactiveChildren=[],this.components.filter((function(t){return!1===t.active})).forEach((function(e){return t.inactiveComponents.push(e.uuid)})),this.getChildren().filter((function(t){return!1===t.active})).forEach((function(e){return t.inactiveChildren.push(e.uuid)}))},t.prototype.destroyGameObjectByName=function(t){this.destroyGameObject(this.findGameObjectByName(t))},t.prototype.destroyGameObject=function(t){this.gameObjectManager.destroyGameObject(t)},t.prototype.destroy=function(){var t=this;window.removeEventListener(o.EVENT_START,this.gameLoopEventHandler),window.removeEventListener(o.EVENT_UPDATE,this.gameLoopEventHandler),this.removeComponents(),Object.keys(this).forEach((function(e){return delete t[e]}))},t}();e.GameObject=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.ShapeType=void 0;var r=n(1);!function(t){t[t.Rectangle=0]="Rectangle"}(e.ShapeType||(e.ShapeType={}));var i=function(){function t(){this._vertex=[],this._position=new r.Vector2,this._direction=new r.Vector2,this._height=0,this._width=0,this._angle=0}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position.set(t.x,t.y)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertex",{get:function(){return this._vertex},enumerable:!1,configurable:!0}),t}();e.Shape=i},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(12);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r,i,o,a=n(162),u=n(5),s=n(12),c=n(25),f=n(7),l=n(51),h=n(44),p=n(46),d=u.WeakMap;if(a){var y=l.state||(l.state=new d),g=y.get,m=y.has,v=y.set;r=function(t,e){return e.facade=t,v.call(y,t,e),e},i=function(t){return g.call(y,t)||{}},o=function(t){return m.call(y,t)}}else{var b=h("state");p[b]=!0,r=function(t,e){return e.facade=t,c(t,b,e),e},i=function(t){return f(t,b)?t[b]:{}},o=function(t){return f(t,b)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!s(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var r=n(52),i=n(53),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e){t.exports=!1},function(t,e){t.exports={}},function(t,e,n){var r=n(168),i=n(89),o=n(31),a=n(55),u=n(102),s=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,f=4==t,l=6==t,h=5==t||l;return function(p,d,y,g){for(var m,v,b=o(p),_=i(b),M=r(d,y,3),x=a(_.length),w=0,O=g||u,j=e?O(p,x):n?O(p,0):void 0;x>w;w++)if((h||w in _)&&(v=M(m=_[w],w,b),t))if(e)j[w]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return w;case 2:s.call(j,m)}else if(f)return!1;return l?-1:c||f?f:j}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToRgb=void 0,e.hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16)/256,g:parseInt(e[2],16)/256,b:parseInt(e[3],16)/256}:null}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.ColliderComponent=void 0;var a=n(8),u=n(2),s=function(t){function e(){var e=t.call(this)||this;return e.collisionManager=u.container.getSingleton("CollisionManager"),e.colliders=[],e._physics=!0,e.collisionsCache=[],e}return i(e,t),Object.defineProperty(e.prototype,"physics",{get:function(){return this._physics},enumerable:!1,configurable:!0}),e.prototype.addCollider=function(t){this.colliders.push(t),this.collisionManager.addCollider(t)},e.prototype.collidesWithLayer=function(t){return null!==this.getCollisionWithLayer(t)},e.prototype.getCollisionWithLayer=function(t){this.updatePosition();for(var e=0,n=this.colliders;e<n.length;e++)for(var r=n[e],i=0,o=this.collisionManager.getCollisionsForCollider(r);i<o.length;i++){var a=o[i];if(a.remoteCollider.gameObject.layer===t)return a}return null},e.prototype.getCollisionsWithLayer=function(t){this.updatePosition(),this.collisionsCache=[];for(var e=0,n=this.colliders;e<n.length;e++)for(var r=n[e],i=0,a=this.collisionManager.getCollisionsForCollider(r);i<a.length;i++){var u=a[i];u.remoteCollider.gameObject.layer===t&&this.collisionsCache.push(u)}return o(this.collisionsCache)},e.prototype.setActive=function(e){var n=this;!0===e&&!1===this.active?this.colliders.forEach((function(t){return n.collisionManager.addCollider(t)})):!1===e&&!0===this.active&&this.colliders.forEach((function(t){return n.collisionManager.removeCollider(t)})),t.prototype.setActive.call(this,e)},e.prototype.destroy=function(){var e=this;this.colliders.forEach((function(t){return e.collisionManager.removeCollider(t)})),t.prototype.destroy.call(this)},e}(a.Component);e.ColliderComponent=s},function(t,e,n){var r=n(5),i=n(25);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(5),i=n(50),o=r["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=o},function(t,e,n){var r=n(45),i=n(51);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.7.0",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var r=n(96),i=n(56).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(36),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var r=n(4);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,n){var r=n(40);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(96),i=n(56);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(24).f,i=n(7),o=n(10)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e){t.exports={}},function(t,e,n){var r=n(7),i=n(31),o=n(44),a=n(105),u=o("IE_PROTO"),s=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,u)?t[u]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var r={};r[n(10)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){n(3)({target:"Math",stat:!0},{sign:n(177)})},function(t,e,n){var r=n(4),i=n(10),o=n(109),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){var r=n(6),i=n(4),o=n(7),a=Object.defineProperty,u={},s=function(t){throw t};t.exports=function(t,e){if(o(u,t))return u[t];e||(e={});var n=[][t],c=!!o(e,"ACCESSORS")&&e.ACCESSORS,f=o(e,0)?e[0]:s,l=o(e,1)?e[1]:void 0;return u[t]=!!n&&!i((function(){if(c&&!r)return!0;var t={length:-1};c?a(t,1,{enumerable:!0,get:s}):t[1]=1,n.call(t,f,l)}))}},function(t,e,n){"use strict";n.r(e),n.d(e,"glMatrix",(function(){return r})),n.d(e,"mat2",(function(){return i})),n.d(e,"mat2d",(function(){return o})),n.d(e,"mat3",(function(){return a})),n.d(e,"mat4",(function(){return u})),n.d(e,"quat",(function(){return f})),n.d(e,"quat2",(function(){return l})),n.d(e,"vec2",(function(){return h})),n.d(e,"vec3",(function(){return s})),n.d(e,"vec4",(function(){return c}));var r={};n.r(r),n.d(r,"EPSILON",(function(){return p})),n.d(r,"ARRAY_TYPE",(function(){return d})),n.d(r,"RANDOM",(function(){return y})),n.d(r,"setMatrixArrayType",(function(){return g})),n.d(r,"toRadian",(function(){return v})),n.d(r,"equals",(function(){return b}));var i={};n.r(i),n.d(i,"create",(function(){return _})),n.d(i,"clone",(function(){return M})),n.d(i,"copy",(function(){return x})),n.d(i,"identity",(function(){return w})),n.d(i,"fromValues",(function(){return O})),n.d(i,"set",(function(){return j})),n.d(i,"transpose",(function(){return P})),n.d(i,"invert",(function(){return R})),n.d(i,"adjoint",(function(){return T})),n.d(i,"determinant",(function(){return S})),n.d(i,"multiply",(function(){return E})),n.d(i,"rotate",(function(){return C})),n.d(i,"scale",(function(){return A})),n.d(i,"fromRotation",(function(){return D})),n.d(i,"fromScaling",(function(){return V})),n.d(i,"str",(function(){return I})),n.d(i,"frob",(function(){return F})),n.d(i,"LDU",(function(){return L})),n.d(i,"add",(function(){return G})),n.d(i,"subtract",(function(){return B})),n.d(i,"exactEquals",(function(){return k})),n.d(i,"equals",(function(){return N})),n.d(i,"multiplyScalar",(function(){return U})),n.d(i,"multiplyScalarAndAdd",(function(){return q})),n.d(i,"mul",(function(){return H})),n.d(i,"sub",(function(){return W}));var o={};n.r(o),n.d(o,"create",(function(){return z})),n.d(o,"clone",(function(){return Y})),n.d(o,"copy",(function(){return Q})),n.d(o,"identity",(function(){return X})),n.d(o,"fromValues",(function(){return K})),n.d(o,"set",(function(){return Z})),n.d(o,"invert",(function(){return $})),n.d(o,"determinant",(function(){return J})),n.d(o,"multiply",(function(){return tt})),n.d(o,"rotate",(function(){return et})),n.d(o,"scale",(function(){return nt})),n.d(o,"translate",(function(){return rt})),n.d(o,"fromRotation",(function(){return it})),n.d(o,"fromScaling",(function(){return ot})),n.d(o,"fromTranslation",(function(){return at})),n.d(o,"str",(function(){return ut})),n.d(o,"frob",(function(){return st})),n.d(o,"add",(function(){return ct})),n.d(o,"subtract",(function(){return ft})),n.d(o,"multiplyScalar",(function(){return lt})),n.d(o,"multiplyScalarAndAdd",(function(){return ht})),n.d(o,"exactEquals",(function(){return pt})),n.d(o,"equals",(function(){return dt})),n.d(o,"mul",(function(){return yt})),n.d(o,"sub",(function(){return gt}));var a={};n.r(a),n.d(a,"create",(function(){return mt})),n.d(a,"fromMat4",(function(){return vt})),n.d(a,"clone",(function(){return bt})),n.d(a,"copy",(function(){return _t})),n.d(a,"fromValues",(function(){return Mt})),n.d(a,"set",(function(){return xt})),n.d(a,"identity",(function(){return wt})),n.d(a,"transpose",(function(){return Ot})),n.d(a,"invert",(function(){return jt})),n.d(a,"adjoint",(function(){return Pt})),n.d(a,"determinant",(function(){return Rt})),n.d(a,"multiply",(function(){return Tt})),n.d(a,"translate",(function(){return St})),n.d(a,"rotate",(function(){return Et})),n.d(a,"scale",(function(){return Ct})),n.d(a,"fromTranslation",(function(){return At})),n.d(a,"fromRotation",(function(){return Dt})),n.d(a,"fromScaling",(function(){return Vt})),n.d(a,"fromMat2d",(function(){return It})),n.d(a,"fromQuat",(function(){return Ft})),n.d(a,"normalFromMat4",(function(){return Lt})),n.d(a,"projection",(function(){return Gt})),n.d(a,"str",(function(){return Bt})),n.d(a,"frob",(function(){return kt})),n.d(a,"add",(function(){return Nt})),n.d(a,"subtract",(function(){return Ut})),n.d(a,"multiplyScalar",(function(){return qt})),n.d(a,"multiplyScalarAndAdd",(function(){return Ht})),n.d(a,"exactEquals",(function(){return Wt})),n.d(a,"equals",(function(){return zt})),n.d(a,"mul",(function(){return Yt})),n.d(a,"sub",(function(){return Qt}));var u={};n.r(u),n.d(u,"create",(function(){return Xt})),n.d(u,"clone",(function(){return Kt})),n.d(u,"copy",(function(){return Zt})),n.d(u,"fromValues",(function(){return $t})),n.d(u,"set",(function(){return Jt})),n.d(u,"identity",(function(){return te})),n.d(u,"transpose",(function(){return ee})),n.d(u,"invert",(function(){return ne})),n.d(u,"adjoint",(function(){return re})),n.d(u,"determinant",(function(){return ie})),n.d(u,"multiply",(function(){return oe})),n.d(u,"translate",(function(){return ae})),n.d(u,"scale",(function(){return ue})),n.d(u,"rotate",(function(){return se})),n.d(u,"rotateX",(function(){return ce})),n.d(u,"rotateY",(function(){return fe})),n.d(u,"rotateZ",(function(){return le})),n.d(u,"fromTranslation",(function(){return he})),n.d(u,"fromScaling",(function(){return pe})),n.d(u,"fromRotation",(function(){return de})),n.d(u,"fromXRotation",(function(){return ye})),n.d(u,"fromYRotation",(function(){return ge})),n.d(u,"fromZRotation",(function(){return me})),n.d(u,"fromRotationTranslation",(function(){return ve})),n.d(u,"fromQuat2",(function(){return be})),n.d(u,"getTranslation",(function(){return _e})),n.d(u,"getScaling",(function(){return Me})),n.d(u,"getRotation",(function(){return xe})),n.d(u,"fromRotationTranslationScale",(function(){return we})),n.d(u,"fromRotationTranslationScaleOrigin",(function(){return Oe})),n.d(u,"fromQuat",(function(){return je})),n.d(u,"frustum",(function(){return Pe})),n.d(u,"perspective",(function(){return Re})),n.d(u,"perspectiveFromFieldOfView",(function(){return Te})),n.d(u,"ortho",(function(){return Se})),n.d(u,"lookAt",(function(){return Ee})),n.d(u,"targetTo",(function(){return Ce})),n.d(u,"str",(function(){return Ae})),n.d(u,"frob",(function(){return De})),n.d(u,"add",(function(){return Ve})),n.d(u,"subtract",(function(){return Ie})),n.d(u,"multiplyScalar",(function(){return Fe})),n.d(u,"multiplyScalarAndAdd",(function(){return Le})),n.d(u,"exactEquals",(function(){return Ge})),n.d(u,"equals",(function(){return Be})),n.d(u,"mul",(function(){return ke})),n.d(u,"sub",(function(){return Ne}));var s={};n.r(s),n.d(s,"create",(function(){return Ue})),n.d(s,"clone",(function(){return qe})),n.d(s,"length",(function(){return He})),n.d(s,"fromValues",(function(){return We})),n.d(s,"copy",(function(){return ze})),n.d(s,"set",(function(){return Ye})),n.d(s,"add",(function(){return Qe})),n.d(s,"subtract",(function(){return Xe})),n.d(s,"multiply",(function(){return Ke})),n.d(s,"divide",(function(){return Ze})),n.d(s,"ceil",(function(){return $e})),n.d(s,"floor",(function(){return Je})),n.d(s,"min",(function(){return tn})),n.d(s,"max",(function(){return en})),n.d(s,"round",(function(){return nn})),n.d(s,"scale",(function(){return rn})),n.d(s,"scaleAndAdd",(function(){return on})),n.d(s,"distance",(function(){return an})),n.d(s,"squaredDistance",(function(){return un})),n.d(s,"squaredLength",(function(){return sn})),n.d(s,"negate",(function(){return cn})),n.d(s,"inverse",(function(){return fn})),n.d(s,"normalize",(function(){return ln})),n.d(s,"dot",(function(){return hn})),n.d(s,"cross",(function(){return pn})),n.d(s,"lerp",(function(){return dn})),n.d(s,"hermite",(function(){return yn})),n.d(s,"bezier",(function(){return gn})),n.d(s,"random",(function(){return mn})),n.d(s,"transformMat4",(function(){return vn})),n.d(s,"transformMat3",(function(){return bn})),n.d(s,"transformQuat",(function(){return _n})),n.d(s,"rotateX",(function(){return Mn})),n.d(s,"rotateY",(function(){return xn})),n.d(s,"rotateZ",(function(){return wn})),n.d(s,"angle",(function(){return On})),n.d(s,"zero",(function(){return jn})),n.d(s,"str",(function(){return Pn})),n.d(s,"exactEquals",(function(){return Rn})),n.d(s,"equals",(function(){return Tn})),n.d(s,"sub",(function(){return En})),n.d(s,"mul",(function(){return Cn})),n.d(s,"div",(function(){return An})),n.d(s,"dist",(function(){return Dn})),n.d(s,"sqrDist",(function(){return Vn})),n.d(s,"len",(function(){return In})),n.d(s,"sqrLen",(function(){return Fn})),n.d(s,"forEach",(function(){return Ln}));var c={};n.r(c),n.d(c,"create",(function(){return Gn})),n.d(c,"clone",(function(){return Bn})),n.d(c,"fromValues",(function(){return kn})),n.d(c,"copy",(function(){return Nn})),n.d(c,"set",(function(){return Un})),n.d(c,"add",(function(){return qn})),n.d(c,"subtract",(function(){return Hn})),n.d(c,"multiply",(function(){return Wn})),n.d(c,"divide",(function(){return zn})),n.d(c,"ceil",(function(){return Yn})),n.d(c,"floor",(function(){return Qn})),n.d(c,"min",(function(){return Xn})),n.d(c,"max",(function(){return Kn})),n.d(c,"round",(function(){return Zn})),n.d(c,"scale",(function(){return $n})),n.d(c,"scaleAndAdd",(function(){return Jn})),n.d(c,"distance",(function(){return tr})),n.d(c,"squaredDistance",(function(){return er})),n.d(c,"length",(function(){return nr})),n.d(c,"squaredLength",(function(){return rr})),n.d(c,"negate",(function(){return ir})),n.d(c,"inverse",(function(){return or})),n.d(c,"normalize",(function(){return ar})),n.d(c,"dot",(function(){return ur})),n.d(c,"cross",(function(){return sr})),n.d(c,"lerp",(function(){return cr})),n.d(c,"random",(function(){return fr})),n.d(c,"transformMat4",(function(){return lr})),n.d(c,"transformQuat",(function(){return hr})),n.d(c,"zero",(function(){return pr})),n.d(c,"str",(function(){return dr})),n.d(c,"exactEquals",(function(){return yr})),n.d(c,"equals",(function(){return gr})),n.d(c,"sub",(function(){return mr})),n.d(c,"mul",(function(){return vr})),n.d(c,"div",(function(){return br})),n.d(c,"dist",(function(){return _r})),n.d(c,"sqrDist",(function(){return Mr})),n.d(c,"len",(function(){return xr})),n.d(c,"sqrLen",(function(){return wr})),n.d(c,"forEach",(function(){return Or}));var f={};n.r(f),n.d(f,"create",(function(){return jr})),n.d(f,"identity",(function(){return Pr})),n.d(f,"setAxisAngle",(function(){return Rr})),n.d(f,"getAxisAngle",(function(){return Tr})),n.d(f,"getAngle",(function(){return Sr})),n.d(f,"multiply",(function(){return Er})),n.d(f,"rotateX",(function(){return Cr})),n.d(f,"rotateY",(function(){return Ar})),n.d(f,"rotateZ",(function(){return Dr})),n.d(f,"calculateW",(function(){return Vr})),n.d(f,"exp",(function(){return Ir})),n.d(f,"ln",(function(){return Fr})),n.d(f,"pow",(function(){return Lr})),n.d(f,"slerp",(function(){return Gr})),n.d(f,"random",(function(){return Br})),n.d(f,"invert",(function(){return kr})),n.d(f,"conjugate",(function(){return Nr})),n.d(f,"fromMat3",(function(){return Ur})),n.d(f,"fromEuler",(function(){return qr})),n.d(f,"str",(function(){return Hr})),n.d(f,"clone",(function(){return Zr})),n.d(f,"fromValues",(function(){return $r})),n.d(f,"copy",(function(){return Jr})),n.d(f,"set",(function(){return ti})),n.d(f,"add",(function(){return ei})),n.d(f,"mul",(function(){return ni})),n.d(f,"scale",(function(){return ri})),n.d(f,"dot",(function(){return ii})),n.d(f,"lerp",(function(){return oi})),n.d(f,"length",(function(){return ai})),n.d(f,"len",(function(){return ui})),n.d(f,"squaredLength",(function(){return si})),n.d(f,"sqrLen",(function(){return ci})),n.d(f,"normalize",(function(){return fi})),n.d(f,"exactEquals",(function(){return li})),n.d(f,"equals",(function(){return hi})),n.d(f,"rotationTo",(function(){return pi})),n.d(f,"sqlerp",(function(){return di})),n.d(f,"setAxes",(function(){return yi}));var l={};n.r(l),n.d(l,"create",(function(){return gi})),n.d(l,"clone",(function(){return mi})),n.d(l,"fromValues",(function(){return vi})),n.d(l,"fromRotationTranslationValues",(function(){return bi})),n.d(l,"fromRotationTranslation",(function(){return _i})),n.d(l,"fromTranslation",(function(){return Mi})),n.d(l,"fromRotation",(function(){return xi})),n.d(l,"fromMat4",(function(){return wi})),n.d(l,"copy",(function(){return Oi})),n.d(l,"identity",(function(){return ji})),n.d(l,"set",(function(){return Pi})),n.d(l,"getReal",(function(){return Ri})),n.d(l,"getDual",(function(){return Ti})),n.d(l,"setReal",(function(){return Si})),n.d(l,"setDual",(function(){return Ei})),n.d(l,"getTranslation",(function(){return Ci})),n.d(l,"translate",(function(){return Ai})),n.d(l,"rotateX",(function(){return Di})),n.d(l,"rotateY",(function(){return Vi})),n.d(l,"rotateZ",(function(){return Ii})),n.d(l,"rotateByQuatAppend",(function(){return Fi})),n.d(l,"rotateByQuatPrepend",(function(){return Li})),n.d(l,"rotateAroundAxis",(function(){return Gi})),n.d(l,"add",(function(){return Bi})),n.d(l,"multiply",(function(){return ki})),n.d(l,"mul",(function(){return Ni})),n.d(l,"scale",(function(){return Ui})),n.d(l,"dot",(function(){return qi})),n.d(l,"lerp",(function(){return Hi})),n.d(l,"invert",(function(){return Wi})),n.d(l,"conjugate",(function(){return zi})),n.d(l,"length",(function(){return Yi})),n.d(l,"len",(function(){return Qi})),n.d(l,"squaredLength",(function(){return Xi})),n.d(l,"sqrLen",(function(){return Ki})),n.d(l,"normalize",(function(){return Zi})),n.d(l,"str",(function(){return $i})),n.d(l,"exactEquals",(function(){return Ji})),n.d(l,"equals",(function(){return to}));var h={};n.r(h),n.d(h,"create",(function(){return eo})),n.d(h,"clone",(function(){return no})),n.d(h,"fromValues",(function(){return ro})),n.d(h,"copy",(function(){return io})),n.d(h,"set",(function(){return oo})),n.d(h,"add",(function(){return ao})),n.d(h,"subtract",(function(){return uo})),n.d(h,"multiply",(function(){return so})),n.d(h,"divide",(function(){return co})),n.d(h,"ceil",(function(){return fo})),n.d(h,"floor",(function(){return lo})),n.d(h,"min",(function(){return ho})),n.d(h,"max",(function(){return po})),n.d(h,"round",(function(){return yo})),n.d(h,"scale",(function(){return go})),n.d(h,"scaleAndAdd",(function(){return mo})),n.d(h,"distance",(function(){return vo})),n.d(h,"squaredDistance",(function(){return bo})),n.d(h,"length",(function(){return _o})),n.d(h,"squaredLength",(function(){return Mo})),n.d(h,"negate",(function(){return xo})),n.d(h,"inverse",(function(){return wo})),n.d(h,"normalize",(function(){return Oo})),n.d(h,"dot",(function(){return jo})),n.d(h,"cross",(function(){return Po})),n.d(h,"lerp",(function(){return Ro})),n.d(h,"random",(function(){return To})),n.d(h,"transformMat2",(function(){return So})),n.d(h,"transformMat2d",(function(){return Eo})),n.d(h,"transformMat3",(function(){return Co})),n.d(h,"transformMat4",(function(){return Ao})),n.d(h,"rotate",(function(){return Do})),n.d(h,"angle",(function(){return Vo})),n.d(h,"zero",(function(){return Io})),n.d(h,"str",(function(){return Fo})),n.d(h,"exactEquals",(function(){return Lo})),n.d(h,"equals",(function(){return Go})),n.d(h,"len",(function(){return Bo})),n.d(h,"sub",(function(){return ko})),n.d(h,"mul",(function(){return No})),n.d(h,"div",(function(){return Uo})),n.d(h,"dist",(function(){return qo})),n.d(h,"sqrDist",(function(){return Ho})),n.d(h,"sqrLen",(function(){return Wo})),n.d(h,"forEach",(function(){return zo}));var p=1e-6,d="undefined"!=typeof Float32Array?Float32Array:Array,y=Math.random;function g(t){d=t}var m=Math.PI/180;function v(t){return t*m}function b(t,e){return Math.abs(t-e)<=p*Math.max(1,Math.abs(t),Math.abs(e))}function _(){var t=new d(4);return d!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function M(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function x(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function w(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function O(t,e,n,r){var i=new d(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function j(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function P(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function R(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function T(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function S(t){return t[0]*t[3]-t[2]*t[1]}function E(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*c+o*f,t[3]=i*c+a*f,t}function C(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*-u+o*s,t[3]=i*-u+a*s,t}function A(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=n[0],s=n[1];return t[0]=r*u,t[1]=i*u,t[2]=o*s,t[3]=a*s,t}function D(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function V(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function I(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function F(t){return Math.hypot(t[0],t[1],t[2],t[3])}function L(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function G(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function B(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function k(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function N(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-a)<=p*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=p*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-s)<=p*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-c)<=p*Math.max(1,Math.abs(o),Math.abs(c))}function U(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function q(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var H=E,W=B;function z(){var t=new d(6);return d!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function Y(t){var e=new d(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Q(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function X(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function K(t,e,n,r,i,o){var a=new d(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function Z(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function $(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=n*o-r*i;return s?(s=1/s,t[0]=o*s,t[1]=-r*s,t[2]=-i*s,t[3]=n*s,t[4]=(i*u-o*a)*s,t[5]=(r*a-n*u)*s,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=n[0],f=n[1],l=n[2],h=n[3],p=n[4],d=n[5];return t[0]=r*c+o*f,t[1]=i*c+a*f,t[2]=r*l+o*h,t[3]=i*l+a*h,t[4]=r*p+o*d+u,t[5]=i*p+a*d+s,t}function et(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=Math.sin(n),f=Math.cos(n);return t[0]=r*f+o*c,t[1]=i*f+a*c,t[2]=r*-c+o*f,t[3]=i*-c+a*f,t[4]=u,t[5]=s,t}function nt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=n[0],f=n[1];return t[0]=r*c,t[1]=i*c,t[2]=o*f,t[3]=a*f,t[4]=u,t[5]=s,t}function rt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*f+u,t[5]=i*c+a*f+s,t}function it(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function at(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function ut(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function st(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ct(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function ft(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function lt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function ht(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function pt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function dt(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=e[0],c=e[1],f=e[2],l=e[3],h=e[4],d=e[5];return Math.abs(n-s)<=p*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-c)<=p*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-f)<=p*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-l)<=p*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-h)<=p*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(u-d)<=p*Math.max(1,Math.abs(u),Math.abs(d))}var yt=tt,gt=ft;function mt(){var t=new d(9);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function vt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function bt(t){var e=new d(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function _t(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Mt(t,e,n,r,i,o,a,u,s){var c=new d(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=a,c[7]=u,c[8]=s,c}function xt(t,e,n,r,i,o,a,u,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t}function wt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ot(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function jt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=f*a-u*c,h=-f*o+u*s,p=c*o-a*s,d=n*l+r*h+i*p;return d?(d=1/d,t[0]=l*d,t[1]=(-f*r+i*c)*d,t[2]=(u*r-i*a)*d,t[3]=h*d,t[4]=(f*n-i*s)*d,t[5]=(-u*n+i*o)*d,t[6]=p*d,t[7]=(-c*n+r*s)*d,t[8]=(a*n-r*o)*d,t):null}function Pt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8];return t[0]=a*f-u*c,t[1]=i*c-r*f,t[2]=r*u-i*a,t[3]=u*s-o*f,t[4]=n*f-i*s,t[5]=i*o-n*u,t[6]=o*c-a*s,t[7]=r*s-n*c,t[8]=n*a-r*o,t}function Rt(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],u=t[6],s=t[7],c=t[8];return e*(c*o-a*s)+n*(-c*i+a*u)+r*(s*i-o*u)}function Tt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],p=n[1],d=n[2],y=n[3],g=n[4],m=n[5],v=n[6],b=n[7],_=n[8];return t[0]=h*r+p*a+d*c,t[1]=h*i+p*u+d*f,t[2]=h*o+p*s+d*l,t[3]=y*r+g*a+m*c,t[4]=y*i+g*u+m*f,t[5]=y*o+g*s+m*l,t[6]=v*r+b*a+_*c,t[7]=v*i+b*u+_*f,t[8]=v*o+b*s+_*l,t}function St(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],p=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=h*r+p*a+c,t[7]=h*i+p*u+f,t[8]=h*o+p*s+l,t}function Et(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=Math.sin(n),p=Math.cos(n);return t[0]=p*r+h*a,t[1]=p*i+h*u,t[2]=p*o+h*s,t[3]=p*a-h*r,t[4]=p*u-h*i,t[5]=p*s-h*o,t[6]=c,t[7]=f,t[8]=l,t}function Ct(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function At(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Dt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Vt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function It(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Ft(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,u=r+r,s=i+i,c=n*a,f=r*a,l=r*u,h=i*a,p=i*u,d=i*s,y=o*a,g=o*u,m=o*s;return t[0]=1-l-d,t[3]=f-m,t[6]=h+g,t[1]=f+m,t[4]=1-c-d,t[7]=p-y,t[2]=h-g,t[5]=p+y,t[8]=1-c-l,t}function Lt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],y=e[13],g=e[14],m=e[15],v=n*u-r*a,b=n*s-i*a,_=n*c-o*a,M=r*s-i*u,x=r*c-o*u,w=i*c-o*s,O=f*y-l*d,j=f*g-h*d,P=f*m-p*d,R=l*g-h*y,T=l*m-p*y,S=h*m-p*g,E=v*S-b*T+_*R+M*P-x*j+w*O;return E?(E=1/E,t[0]=(u*S-s*T+c*R)*E,t[1]=(s*P-a*S-c*j)*E,t[2]=(a*T-u*P+c*O)*E,t[3]=(i*T-r*S-o*R)*E,t[4]=(n*S-i*P+o*j)*E,t[5]=(r*P-n*T-o*O)*E,t[6]=(y*w-g*x+m*M)*E,t[7]=(g*_-d*w-m*b)*E,t[8]=(d*x-y*_+m*v)*E,t):null}function Gt(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Bt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function kt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Nt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Ut(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function qt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Ht(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Wt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function zt(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=e[0],h=e[1],d=e[2],y=e[3],g=e[4],m=e[5],v=e[6],b=e[7],_=e[8];return Math.abs(n-l)<=p*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-h)<=p*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-d)<=p*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-y)<=p*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-g)<=p*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-m)<=p*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-v)<=p*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(c-b)<=p*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(f-_)<=p*Math.max(1,Math.abs(f),Math.abs(_))}var Yt=Tt,Qt=Ut;function Xt(){var t=new d(16);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Kt(t){var e=new d(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Zt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $t(t,e,n,r,i,o,a,u,s,c,f,l,h,p,y,g){var m=new d(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=i,m[5]=o,m[6]=a,m[7]=u,m[8]=s,m[9]=c,m[10]=f,m[11]=l,m[12]=h,m[13]=p,m[14]=y,m[15]=g,m}function Jt(t,e,n,r,i,o,a,u,s,c,f,l,h,p,d,y,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=l,t[11]=h,t[12]=p,t[13]=d,t[14]=y,t[15]=g,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],y=e[13],g=e[14],m=e[15],v=n*u-r*a,b=n*s-i*a,_=n*c-o*a,M=r*s-i*u,x=r*c-o*u,w=i*c-o*s,O=f*y-l*d,j=f*g-h*d,P=f*m-p*d,R=l*g-h*y,T=l*m-p*y,S=h*m-p*g,E=v*S-b*T+_*R+M*P-x*j+w*O;return E?(E=1/E,t[0]=(u*S-s*T+c*R)*E,t[1]=(i*T-r*S-o*R)*E,t[2]=(y*w-g*x+m*M)*E,t[3]=(h*x-l*w-p*M)*E,t[4]=(s*P-a*S-c*j)*E,t[5]=(n*S-i*P+o*j)*E,t[6]=(g*_-d*w-m*b)*E,t[7]=(f*w-h*_+p*b)*E,t[8]=(a*T-u*P+c*O)*E,t[9]=(r*P-n*T-o*O)*E,t[10]=(d*x-y*_+m*v)*E,t[11]=(l*_-f*x-p*v)*E,t[12]=(u*j-a*R-s*O)*E,t[13]=(n*R-r*j+i*O)*E,t[14]=(y*b-d*M-g*v)*E,t[15]=(f*M-l*b+h*v)*E,t):null}function re(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],y=e[13],g=e[14],m=e[15];return t[0]=u*(h*m-p*g)-l*(s*m-c*g)+y*(s*p-c*h),t[1]=-(r*(h*m-p*g)-l*(i*m-o*g)+y*(i*p-o*h)),t[2]=r*(s*m-c*g)-u*(i*m-o*g)+y*(i*c-o*s),t[3]=-(r*(s*p-c*h)-u*(i*p-o*h)+l*(i*c-o*s)),t[4]=-(a*(h*m-p*g)-f*(s*m-c*g)+d*(s*p-c*h)),t[5]=n*(h*m-p*g)-f*(i*m-o*g)+d*(i*p-o*h),t[6]=-(n*(s*m-c*g)-a*(i*m-o*g)+d*(i*c-o*s)),t[7]=n*(s*p-c*h)-a*(i*p-o*h)+f*(i*c-o*s),t[8]=a*(l*m-p*y)-f*(u*m-c*y)+d*(u*p-c*l),t[9]=-(n*(l*m-p*y)-f*(r*m-o*y)+d*(r*p-o*l)),t[10]=n*(u*m-c*y)-a*(r*m-o*y)+d*(r*c-o*u),t[11]=-(n*(u*p-c*l)-a*(r*p-o*l)+f*(r*c-o*u)),t[12]=-(a*(l*g-h*y)-f*(u*g-s*y)+d*(u*h-s*l)),t[13]=n*(l*g-h*y)-f*(r*g-i*y)+d*(r*h-i*l),t[14]=-(n*(u*g-s*y)-a*(r*g-i*y)+d*(r*s-i*u)),t[15]=n*(u*h-s*l)-a*(r*h-i*l)+f*(r*s-i*u),t}function ie(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],h=t[11],p=t[12],d=t[13],y=t[14],g=t[15];return(e*a-n*o)*(l*g-h*y)-(e*u-r*o)*(f*g-h*d)+(e*s-i*o)*(f*y-l*d)+(n*u-r*a)*(c*g-h*p)-(n*s-i*a)*(c*y-l*p)+(r*s-i*u)*(c*d-f*p)}function oe(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],p=e[10],d=e[11],y=e[12],g=e[13],m=e[14],v=e[15],b=n[0],_=n[1],M=n[2],x=n[3];return t[0]=b*r+_*u+M*l+x*y,t[1]=b*i+_*s+M*h+x*g,t[2]=b*o+_*c+M*p+x*m,t[3]=b*a+_*f+M*d+x*v,b=n[4],_=n[5],M=n[6],x=n[7],t[4]=b*r+_*u+M*l+x*y,t[5]=b*i+_*s+M*h+x*g,t[6]=b*o+_*c+M*p+x*m,t[7]=b*a+_*f+M*d+x*v,b=n[8],_=n[9],M=n[10],x=n[11],t[8]=b*r+_*u+M*l+x*y,t[9]=b*i+_*s+M*h+x*g,t[10]=b*o+_*c+M*p+x*m,t[11]=b*a+_*f+M*d+x*v,b=n[12],_=n[13],M=n[14],x=n[15],t[12]=b*r+_*u+M*l+x*y,t[13]=b*i+_*s+M*h+x*g,t[14]=b*o+_*c+M*p+x*m,t[15]=b*a+_*f+M*d+x*v,t}function ae(t,e,n){var r,i,o,a,u,s,c,f,l,h,p,d,y=n[0],g=n[1],m=n[2];return e===t?(t[12]=e[0]*y+e[4]*g+e[8]*m+e[12],t[13]=e[1]*y+e[5]*g+e[9]*m+e[13],t[14]=e[2]*y+e[6]*g+e[10]*m+e[14],t[15]=e[3]*y+e[7]*g+e[11]*m+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],p=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=p,t[11]=d,t[12]=r*y+u*g+l*m+e[12],t[13]=i*y+s*g+h*m+e[13],t[14]=o*y+c*g+p*m+e[14],t[15]=a*y+f*g+d*m+e[15]),t}function ue(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function se(t,e,n,r){var i,o,a,u,s,c,f,l,h,d,y,g,m,v,b,_,M,x,w,O,j,P,R,T,S=r[0],E=r[1],C=r[2],A=Math.hypot(S,E,C);return A<p?null:(S*=A=1/A,E*=A,C*=A,i=Math.sin(n),a=1-(o=Math.cos(n)),u=e[0],s=e[1],c=e[2],f=e[3],l=e[4],h=e[5],d=e[6],y=e[7],g=e[8],m=e[9],v=e[10],b=e[11],_=S*S*a+o,M=E*S*a+C*i,x=C*S*a-E*i,w=S*E*a-C*i,O=E*E*a+o,j=C*E*a+S*i,P=S*C*a+E*i,R=E*C*a-S*i,T=C*C*a+o,t[0]=u*_+l*M+g*x,t[1]=s*_+h*M+m*x,t[2]=c*_+d*M+v*x,t[3]=f*_+y*M+b*x,t[4]=u*w+l*O+g*j,t[5]=s*w+h*O+m*j,t[6]=c*w+d*O+v*j,t[7]=f*w+y*O+b*j,t[8]=u*P+l*R+g*T,t[9]=s*P+h*R+m*T,t[10]=c*P+d*R+v*T,t[11]=f*P+y*R+b*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],u=e[6],s=e[7],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+f*r,t[6]=u*i+l*r,t[7]=s*i+h*r,t[8]=c*i-o*r,t[9]=f*i-a*r,t[10]=l*i-u*r,t[11]=h*i-s*r,t}function fe(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],u=e[2],s=e[3],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-f*r,t[2]=u*i-l*r,t[3]=s*i-h*r,t[8]=o*r+c*i,t[9]=a*r+f*i,t[10]=u*r+l*i,t[11]=s*r+h*i,t}function le(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],u=e[2],s=e[3],c=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+f*r,t[2]=u*i+l*r,t[3]=s*i+h*r,t[4]=c*i-o*r,t[5]=f*i-a*r,t[6]=l*i-u*r,t[7]=h*i-s*r,t}function he(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function pe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function de(t,e,n){var r,i,o,a=n[0],u=n[1],s=n[2],c=Math.hypot(a,u,s);return c<p?null:(a*=c=1/c,u*=c,s*=c,r=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=a*a*o+i,t[1]=u*a*o+s*r,t[2]=s*a*o-u*r,t[3]=0,t[4]=a*u*o-s*r,t[5]=u*u*o+i,t[6]=s*u*o+a*r,t[7]=0,t[8]=a*s*o+u*r,t[9]=u*s*o-a*r,t[10]=s*s*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function ye(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ge(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=r+r,s=i+i,c=o+o,f=r*u,l=r*s,h=r*c,p=i*s,d=i*c,y=o*c,g=a*u,m=a*s,v=a*c;return t[0]=1-(p+y),t[1]=l+v,t[2]=h-m,t[3]=0,t[4]=l-v,t[5]=1-(f+y),t[6]=d+g,t[7]=0,t[8]=h+m,t[9]=d-g,t[10]=1-(f+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function be(t,e){var n=new d(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=r*r+i*i+o*o+a*a;return l>0?(n[0]=2*(u*a+f*r+s*o-c*i)/l,n[1]=2*(s*a+f*i+c*r-u*o)/l,n[2]=2*(c*a+f*o+u*i-s*r)/l):(n[0]=2*(u*a+f*r+s*o-c*i),n[1]=2*(s*a+f*i+c*r-u*o),n[2]=2*(c*a+f*o+u*i-s*r)),ve(t,e,n),t}function _e(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Me(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],u=e[6],s=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,u),t[2]=Math.hypot(s,c,f),t}function xe(t,e){var n=new d(3);Me(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,u=e[1]*i,s=e[2]*o,c=e[4]*r,f=e[5]*i,l=e[6]*o,h=e[8]*r,p=e[9]*i,y=e[10]*o,g=a+f+y,m=0;return g>0?(m=2*Math.sqrt(g+1),t[3]=.25*m,t[0]=(l-p)/m,t[1]=(h-s)/m,t[2]=(u-c)/m):a>f&&a>y?(m=2*Math.sqrt(1+a-f-y),t[3]=(l-p)/m,t[0]=.25*m,t[1]=(u+c)/m,t[2]=(h+s)/m):f>y?(m=2*Math.sqrt(1+f-a-y),t[3]=(h-s)/m,t[0]=(u+c)/m,t[1]=.25*m,t[2]=(l+p)/m):(m=2*Math.sqrt(1+y-a-f),t[3]=(u-c)/m,t[0]=(h+s)/m,t[1]=(l+p)/m,t[2]=.25*m),t}function we(t,e,n,r){var i=e[0],o=e[1],a=e[2],u=e[3],s=i+i,c=o+o,f=a+a,l=i*s,h=i*c,p=i*f,d=o*c,y=o*f,g=a*f,m=u*s,v=u*c,b=u*f,_=r[0],M=r[1],x=r[2];return t[0]=(1-(d+g))*_,t[1]=(h+b)*_,t[2]=(p-v)*_,t[3]=0,t[4]=(h-b)*M,t[5]=(1-(l+g))*M,t[6]=(y+m)*M,t[7]=0,t[8]=(p+v)*x,t[9]=(y-m)*x,t[10]=(1-(l+d))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Oe(t,e,n,r,i){var o=e[0],a=e[1],u=e[2],s=e[3],c=o+o,f=a+a,l=u+u,h=o*c,p=o*f,d=o*l,y=a*f,g=a*l,m=u*l,v=s*c,b=s*f,_=s*l,M=r[0],x=r[1],w=r[2],O=i[0],j=i[1],P=i[2],R=(1-(y+m))*M,T=(p+_)*M,S=(d-b)*M,E=(p-_)*x,C=(1-(h+m))*x,A=(g+v)*x,D=(d+b)*w,V=(g-v)*w,I=(1-(h+y))*w;return t[0]=R,t[1]=T,t[2]=S,t[3]=0,t[4]=E,t[5]=C,t[6]=A,t[7]=0,t[8]=D,t[9]=V,t[10]=I,t[11]=0,t[12]=n[0]+O-(R*O+E*j+D*P),t[13]=n[1]+j-(T*O+C*j+V*P),t[14]=n[2]+P-(S*O+A*j+I*P),t[15]=1,t}function je(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,u=r+r,s=i+i,c=n*a,f=r*a,l=r*u,h=i*a,p=i*u,d=i*s,y=o*a,g=o*u,m=o*s;return t[0]=1-l-d,t[1]=f+m,t[2]=h-g,t[3]=0,t[4]=f-m,t[5]=1-c-d,t[6]=p+y,t[7]=0,t[8]=h+g,t[9]=p-y,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pe(t,e,n,r,i,o,a){var u=1/(n-e),s=1/(i-r),c=1/(o-a);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(i+r)*s,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function Re(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function Te(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(a+u),c=2/(i+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-u)*s*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Se(t,e,n,r,i,o,a){var u=1/(e-n),s=1/(r-i),c=1/(o-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*u,t[13]=(i+r)*s,t[14]=(a+o)*c,t[15]=1,t}function Ee(t,e,n,r){var i,o,a,u,s,c,f,l,h,d,y=e[0],g=e[1],m=e[2],v=r[0],b=r[1],_=r[2],M=n[0],x=n[1],w=n[2];return Math.abs(y-M)<p&&Math.abs(g-x)<p&&Math.abs(m-w)<p?te(t):(f=y-M,l=g-x,h=m-w,i=b*(h*=d=1/Math.hypot(f,l,h))-_*(l*=d),o=_*(f*=d)-v*h,a=v*l-b*f,(d=Math.hypot(i,o,a))?(i*=d=1/d,o*=d,a*=d):(i=0,o=0,a=0),u=l*a-h*o,s=h*i-f*a,c=f*o-l*i,(d=Math.hypot(u,s,c))?(u*=d=1/d,s*=d,c*=d):(u=0,s=0,c=0),t[0]=i,t[1]=u,t[2]=f,t[3]=0,t[4]=o,t[5]=s,t[6]=l,t[7]=0,t[8]=a,t[9]=c,t[10]=h,t[11]=0,t[12]=-(i*y+o*g+a*m),t[13]=-(u*y+s*g+c*m),t[14]=-(f*y+l*g+h*m),t[15]=1,t)}function Ce(t,e,n,r){var i=e[0],o=e[1],a=e[2],u=r[0],s=r[1],c=r[2],f=i-n[0],l=o-n[1],h=a-n[2],p=f*f+l*l+h*h;p>0&&(f*=p=1/Math.sqrt(p),l*=p,h*=p);var d=s*h-c*l,y=c*f-u*h,g=u*l-s*f;return(p=d*d+y*y+g*g)>0&&(d*=p=1/Math.sqrt(p),y*=p,g*=p),t[0]=d,t[1]=y,t[2]=g,t[3]=0,t[4]=l*g-h*y,t[5]=h*d-f*g,t[6]=f*y-l*d,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function Ae(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function De(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Ve(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Ie(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Fe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Le(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Ge(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Be(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],y=t[12],g=t[13],m=t[14],v=t[15],b=e[0],_=e[1],M=e[2],x=e[3],w=e[4],O=e[5],j=e[6],P=e[7],R=e[8],T=e[9],S=e[10],E=e[11],C=e[12],A=e[13],D=e[14],V=e[15];return Math.abs(n-b)<=p*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-_)<=p*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-M)<=p*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(o-x)<=p*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=p*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(u-O)<=p*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(s-j)<=p*Math.max(1,Math.abs(s),Math.abs(j))&&Math.abs(c-P)<=p*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(f-R)<=p*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(l-T)<=p*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(h-S)<=p*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(d-E)<=p*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(y-C)<=p*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(g-A)<=p*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(m-D)<=p*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(v-V)<=p*Math.max(1,Math.abs(v),Math.abs(V))}var ke=oe,Ne=Ie;function Ue(){var t=new d(3);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function qe(t){var e=new d(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function He(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function We(t,e,n){var r=new d(3);return r[0]=t,r[1]=e,r[2]=n,r}function ze(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ye(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Qe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Xe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ke(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Ze(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function $e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Je(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function en(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function nn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function rn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function on(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function an(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function un(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function sn(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function cn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function fn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function ln(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function hn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function pn(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],u=n[1],s=n[2];return t[0]=i*s-o*u,t[1]=o*a-r*s,t[2]=r*u-i*a,t}function dn(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function yn(t,e,n,r,i,o){var a=o*o,u=a*(2*o-3)+1,s=a*(o-2)+o,c=a*(o-1),f=a*(3-2*o);return t[0]=e[0]*u+n[0]*s+r[0]*c+i[0]*f,t[1]=e[1]*u+n[1]*s+r[1]*c+i[1]*f,t[2]=e[2]*u+n[2]*s+r[2]*c+i[2]*f,t}function gn(t,e,n,r,i,o){var a=1-o,u=a*a,s=o*o,c=u*a,f=3*o*u,l=3*s*a,h=s*o;return t[0]=e[0]*c+n[0]*f+r[0]*l+i[0]*h,t[1]=e[1]*c+n[1]*f+r[1]*l+i[1]*h,t[2]=e[2]*c+n[2]*f+r[2]*l+i[2]*h,t}function mn(t,e){e=e||1;var n=2*y()*Math.PI,r=2*y()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function vn(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function bn(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function _n(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],u=e[0],s=e[1],c=e[2],f=i*c-o*s,l=o*u-r*c,h=r*s-i*u,p=i*h-o*l,d=o*f-r*h,y=r*l-i*f,g=2*a;return f*=g,l*=g,h*=g,p*=2,d*=2,y*=2,t[0]=u+f+p,t[1]=s+l+d,t[2]=c+h+y,t}function Mn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function xn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function wn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function On(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],u=e[2],s=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+a*a+u*u),c=s&&hn(t,e)/s;return Math.acos(Math.min(Math.max(c,-1),1))}function jn(t){return t[0]=0,t[1]=0,t[2]=0,t}function Pn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Rn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Tn(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],u=e[2];return Math.abs(n-o)<=p*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=p*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-u)<=p*Math.max(1,Math.abs(i),Math.abs(u))}var Sn,En=Xe,Cn=Ke,An=Ze,Dn=an,Vn=un,In=He,Fn=sn,Ln=(Sn=Ue(),function(t,e,n,r,i,o){var a,u;for(e||(e=3),n||(n=0),u=r?Math.min(r*e+n,t.length):t.length,a=n;a<u;a+=e)Sn[0]=t[a],Sn[1]=t[a+1],Sn[2]=t[a+2],i(Sn,Sn,o),t[a]=Sn[0],t[a+1]=Sn[1],t[a+2]=Sn[2];return t});function Gn(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Bn(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function kn(t,e,n,r){var i=new d(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function Nn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Un(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function qn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Hn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Wn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function zn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Yn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Qn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Xn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Kn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Zn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function $n(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Jn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function tr(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(n,r,i,o)}function er(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function nr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function rr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function ir(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function or(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function ar(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function ur(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function sr(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],u=n[1]*r[2]-n[2]*r[1],s=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],f=e[0],l=e[1],h=e[2],p=e[3];return t[0]=l*c-h*s+p*u,t[1]=-f*c+h*a-p*o,t[2]=f*s-l*a+p*i,t[3]=-f*u+l*o-h*i,t}function cr(t,e,n,r){var i=e[0],o=e[1],a=e[2],u=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=u+r*(n[3]-u),t}function fr(t,e){var n,r,i,o,a,u;e=e||1;do{a=(n=2*y()-1)*n+(r=2*y()-1)*r}while(a>=1);do{u=(i=2*y()-1)*i+(o=2*y()-1)*o}while(u>=1);var s=Math.sqrt((1-a)/u);return t[0]=e*n,t[1]=e*r,t[2]=e*i*s,t[3]=e*o*s,t}function lr(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function hr(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],u=n[1],s=n[2],c=n[3],f=c*r+u*o-s*i,l=c*i+s*r-a*o,h=c*o+a*i-u*r,p=-a*r-u*i-s*o;return t[0]=f*c+p*-a+l*-s-h*-u,t[1]=l*c+p*-u+h*-a-f*-s,t[2]=h*c+p*-s+f*-u-l*-a,t[3]=e[3],t}function pr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function dr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function yr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function gr(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-a)<=p*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=p*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-s)<=p*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-c)<=p*Math.max(1,Math.abs(o),Math.abs(c))}var mr=Hn,vr=Wn,br=zn,_r=tr,Mr=er,xr=nr,wr=rr,Or=function(){var t=Gn();return function(e,n,r,i,o,a){var u,s;for(n||(n=4),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();function jr(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Pr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Rr(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Tr(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>p?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Sr(t,e){var n=ii(t,e);return Math.acos(2*n*n-1)}function Er(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*f+a*u+i*c-o*s,t[1]=i*f+a*s+o*u-r*c,t[2]=o*f+a*c+r*s-i*u,t[3]=a*f-r*u-i*s-o*c,t}function Cr(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=i*s+o*u,t[2]=o*s-i*u,t[3]=a*s-r*u,t}function Ar(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-o*u,t[1]=i*s+a*u,t[2]=o*s+r*u,t[3]=a*s-i*u,t}function Dr(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*u,t[1]=i*s-r*u,t[2]=o*s+a*u,t[3]=a*s-o*u,t}function Vr(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function Ir(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),u=Math.exp(o),s=a>0?u*Math.sin(a)/a:0;return t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=u*Math.cos(a),t}function Fr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),u=a>0?Math.atan2(a,o)/a:0;return t[0]=n*u,t[1]=r*u,t[2]=i*u,t[3]=.5*Math.log(n*n+r*r+i*i+o*o),t}function Lr(t,e,n){return Fr(t,e),ri(t,t,n),Ir(t,t),t}function Gr(t,e,n,r){var i,o,a,u,s,c=e[0],f=e[1],l=e[2],h=e[3],d=n[0],y=n[1],g=n[2],m=n[3];return(o=c*d+f*y+l*g+h*m)<0&&(o=-o,d=-d,y=-y,g=-g,m=-m),1-o>p?(i=Math.acos(o),a=Math.sin(i),u=Math.sin((1-r)*i)/a,s=Math.sin(r*i)/a):(u=1-r,s=r),t[0]=u*c+s*d,t[1]=u*f+s*y,t[2]=u*l+s*g,t[3]=u*h+s*m,t}function Br(t){var e=y(),n=y(),r=y(),i=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=o*Math.sin(2*Math.PI*r),t[3]=o*Math.cos(2*Math.PI*r),t}function kr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,u=a?1/a:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-i*u,t[3]=o*u,t}function Nr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Ur(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}function qr(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),a=Math.cos(e),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=o*s*f-a*u*c,t[1]=a*u*f+o*s*c,t[2]=a*s*c-o*u*f,t[3]=a*s*f+o*u*c,t}function Hr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Wr,zr,Yr,Qr,Xr,Kr,Zr=Bn,$r=kn,Jr=Nn,ti=Un,ei=qn,ni=Er,ri=$n,ii=ur,oi=cr,ai=nr,ui=ai,si=rr,ci=si,fi=ar,li=yr,hi=gr,pi=(Wr=Ue(),zr=We(1,0,0),Yr=We(0,1,0),function(t,e,n){var r=hn(e,n);return r<-.999999?(pn(Wr,zr,e),In(Wr)<1e-6&&pn(Wr,Yr,e),ln(Wr,Wr),Rr(t,Wr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(pn(Wr,e,n),t[0]=Wr[0],t[1]=Wr[1],t[2]=Wr[2],t[3]=1+r,fi(t,t))}),di=(Qr=jr(),Xr=jr(),function(t,e,n,r,i,o){return Gr(Qr,e,i,o),Gr(Xr,n,r,o),Gr(t,Qr,Xr,2*o*(1-o)),t}),yi=(Kr=mt(),function(t,e,n,r){return Kr[0]=n[0],Kr[3]=n[1],Kr[6]=n[2],Kr[1]=r[0],Kr[4]=r[1],Kr[7]=r[2],Kr[2]=-e[0],Kr[5]=-e[1],Kr[8]=-e[2],fi(t,Ur(t,Kr))});function gi(){var t=new d(8);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function mi(t){var e=new d(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function vi(t,e,n,r,i,o,a,u){var s=new d(8);return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=i,s[5]=o,s[6]=a,s[7]=u,s}function bi(t,e,n,r,i,o,a){var u=new d(8);u[0]=t,u[1]=e,u[2]=n,u[3]=r;var s=.5*i,c=.5*o,f=.5*a;return u[4]=s*r+c*n-f*e,u[5]=c*r+f*t-s*n,u[6]=f*r+s*e-c*t,u[7]=-s*t-c*e-f*n,u}function _i(t,e,n){var r=.5*n[0],i=.5*n[1],o=.5*n[2],a=e[0],u=e[1],s=e[2],c=e[3];return t[0]=a,t[1]=u,t[2]=s,t[3]=c,t[4]=r*c+i*s-o*u,t[5]=i*c+o*a-r*s,t[6]=o*c+r*u-i*a,t[7]=-r*a-i*u-o*s,t}function Mi(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function xi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function wi(t,e){var n=jr();xe(n,e);var r=new d(3);return _e(r,e),_i(t,n,r),t}function Oi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function ji(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Pi(t,e,n,r,i,o,a,u,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=u,t[7]=s,t}var Ri=Jr;function Ti(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Si=Jr;function Ei(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Ci(t,e){var n=e[4],r=e[5],i=e[6],o=e[7],a=-e[0],u=-e[1],s=-e[2],c=e[3];return t[0]=2*(n*c+o*a+r*s-i*u),t[1]=2*(r*c+o*u+i*a-n*s),t[2]=2*(i*c+o*s+n*u-r*a),t}function Ai(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=.5*n[0],s=.5*n[1],c=.5*n[2],f=e[4],l=e[5],h=e[6],p=e[7];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=a*u+i*c-o*s+f,t[5]=a*s+o*u-r*c+l,t[6]=a*c+r*s-i*u+h,t[7]=-r*u-i*s-o*c+p,t}function Di(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=u*a+f*r+s*o-c*i,h=s*a+f*i+c*r-u*o,p=c*a+f*o+u*i-s*r,d=f*a-u*r-s*i-c*o;return Cr(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=l*a+d*r+h*o-p*i,t[5]=h*a+d*i+p*r-l*o,t[6]=p*a+d*o+l*i-h*r,t[7]=d*a-l*r-h*i-p*o,t}function Vi(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=u*a+f*r+s*o-c*i,h=s*a+f*i+c*r-u*o,p=c*a+f*o+u*i-s*r,d=f*a-u*r-s*i-c*o;return Ar(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=l*a+d*r+h*o-p*i,t[5]=h*a+d*i+p*r-l*o,t[6]=p*a+d*o+l*i-h*r,t[7]=d*a-l*r-h*i-p*o,t}function Ii(t,e,n){var r=-e[0],i=-e[1],o=-e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=u*a+f*r+s*o-c*i,h=s*a+f*i+c*r-u*o,p=c*a+f*o+u*i-s*r,d=f*a-u*r-s*i-c*o;return Dr(t,e,n),r=t[0],i=t[1],o=t[2],a=t[3],t[4]=l*a+d*r+h*o-p*i,t[5]=h*a+d*i+p*r-l*o,t[6]=p*a+d*o+l*i-h*r,t[7]=d*a-l*r-h*i-p*o,t}function Fi(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],u=e[0],s=e[1],c=e[2],f=e[3];return t[0]=u*a+f*r+s*o-c*i,t[1]=s*a+f*i+c*r-u*o,t[2]=c*a+f*o+u*i-s*r,t[3]=f*a-u*r-s*i-c*o,u=e[4],s=e[5],c=e[6],f=e[7],t[4]=u*a+f*r+s*o-c*i,t[5]=s*a+f*i+c*r-u*o,t[6]=c*a+f*o+u*i-s*r,t[7]=f*a-u*r-s*i-c*o,t}function Li(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*f+a*u+i*c-o*s,t[1]=i*f+a*s+o*u-r*c,t[2]=o*f+a*c+r*s-i*u,t[3]=a*f-r*u-i*s-o*c,u=n[4],s=n[5],c=n[6],f=n[7],t[4]=r*f+a*u+i*c-o*s,t[5]=i*f+a*s+o*u-r*c,t[6]=o*f+a*c+r*s-i*u,t[7]=a*f-r*u-i*s-o*c,t}function Gi(t,e,n,r){if(Math.abs(r)<p)return Oi(t,e);var i=Math.hypot(n[0],n[1],n[2]);r*=.5;var o=Math.sin(r),a=o*n[0]/i,u=o*n[1]/i,s=o*n[2]/i,c=Math.cos(r),f=e[0],l=e[1],h=e[2],d=e[3];t[0]=f*c+d*a+l*s-h*u,t[1]=l*c+d*u+h*a-f*s,t[2]=h*c+d*s+f*u-l*a,t[3]=d*c-f*a-l*u-h*s;var y=e[4],g=e[5],m=e[6],v=e[7];return t[4]=y*c+v*a+g*s-m*u,t[5]=g*c+v*u+m*a-y*s,t[6]=m*c+v*s+y*u-g*a,t[7]=v*c-y*a-g*u-m*s,t}function Bi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function ki(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=n[4],s=n[5],c=n[6],f=n[7],l=e[4],h=e[5],p=e[6],d=e[7],y=n[0],g=n[1],m=n[2],v=n[3];return t[0]=r*v+a*y+i*m-o*g,t[1]=i*v+a*g+o*y-r*m,t[2]=o*v+a*m+r*g-i*y,t[3]=a*v-r*y-i*g-o*m,t[4]=r*f+a*u+i*c-o*s+l*v+d*y+h*m-p*g,t[5]=i*f+a*s+o*u-r*c+h*v+d*g+p*y-l*m,t[6]=o*f+a*c+r*s-i*u+p*v+d*m+l*g-h*y,t[7]=a*f-r*u-i*s-o*c+d*v-l*y-h*g-p*m,t}var Ni=ki;function Ui(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var qi=ii;function Hi(t,e,n,r){var i=1-r;return qi(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function Wi(t,e){var n=Xi(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function zi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Yi=ai,Qi=Yi,Xi=si,Ki=Xi;function Zi(t,e){var n=Xi(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,o=e[2]/n,a=e[3]/n,u=e[4],s=e[5],c=e[6],f=e[7],l=r*u+i*s+o*c+a*f;t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=(u-r*l)/n,t[5]=(s-i*l)/n,t[6]=(c-o*l)/n,t[7]=(f-a*l)/n}return t}function $i(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Ji(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function to(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=e[0],l=e[1],h=e[2],d=e[3],y=e[4],g=e[5],m=e[6],v=e[7];return Math.abs(n-f)<=p*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-l)<=p*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-h)<=p*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-d)<=p*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-y)<=p*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(u-g)<=p*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(s-m)<=p*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(c-v)<=p*Math.max(1,Math.abs(c),Math.abs(v))}function eo(){var t=new d(2);return d!=Float32Array&&(t[0]=0,t[1]=0),t}function no(t){var e=new d(2);return e[0]=t[0],e[1]=t[1],e}function ro(t,e){var n=new d(2);return n[0]=t,n[1]=e,n}function io(t,e){return t[0]=e[0],t[1]=e[1],t}function oo(t,e,n){return t[0]=e,t[1]=n,t}function ao(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function uo(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function so(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function co(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function fo(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function lo(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function ho(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function po(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function yo(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function go(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function mo(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function vo(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function bo(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function _o(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function Mo(t){var e=t[0],n=t[1];return e*e+n*n}function xo(t,e){return t[0]=-e[0],t[1]=-e[1],t}function wo(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Oo(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function jo(t,e){return t[0]*e[0]+t[1]*e[1]}function Po(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function Ro(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function To(t,e){e=e||1;var n=2*y()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function So(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function Eo(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function Co(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function Ao(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function Do(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),u=Math.cos(r);return t[0]=i*u-o*a+n[0],t[1]=i*a+o*u+n[1],t}function Vo(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),u=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(u,-1),1))}function Io(t){return t[0]=0,t[1]=0,t}function Fo(t){return"vec2("+t[0]+", "+t[1]+")"}function Lo(t,e){return t[0]===e[0]&&t[1]===e[1]}function Go(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=p*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=p*Math.max(1,Math.abs(r),Math.abs(o))}var Bo=_o,ko=uo,No=so,Uo=co,qo=vo,Ho=bo,Wo=Mo,zo=function(){var t=eo();return function(e,n,r,i,o,a){var u,s;for(n||(n=2),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,a),e[u]=t[0],e[u+1]=t[1];return e}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix2=void 0;var r=n(1),i=function(){function t(t){void 0===t&&(t=null),this._data=[[0,0],[0,0]],this._data=null!=t?t:this._data}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!1,configurable:!0}),t.prototype.multiplyVector2=function(t){return new r.Vector2(this._data[0][0]*t.x+this._data[0][1]*t.y,this._data[1][0]*t.x+this._data[1][1]*t.y)},t.prototype.rotate=function(t){this._data[0][0]=Math.cos(t),this._data[0][1]=-Math.sin(t),this._data[1][0]=Math.sin(t),this._data[1][1]=Math.cos(t)},t}();e.Matrix2=i},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GeometricRenderData=e.GEOMETRIC_POLYGON=e.GEOMETRIC_RECTANGLE=void 0;var o=n(29);e.GEOMETRIC_RECTANGLE="Rectangle",e.GEOMETRIC_POLYGON="Polygon";var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=o.RenderDataType.Geometric,e.color=null,e.geometric=null,e.geometricType=null,e.geometricUsePosition=!1,e}return i(e,t),e}(o.RenderData);e.GeometricRenderData=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Transform=e.TYPE_TRANSFORM=void 0;var o=n(8),a=n(1);e.TYPE_TRANSFORM="Transform";var u=function(t){function n(){var n=t.call(this)||this;return n._position=new a.Vector2(0,0),n._innerPosition=new a.Vector2(0,0),n._scale=new a.Vector2(1,1),n._rotation=0,n.parentTransform=null,n.allowMultiple=!1,n.type=e.TYPE_TRANSFORM,n}return i(n,t),Object.defineProperty(n.prototype,"position",{get:function(){return this._position},set:function(t){this._position.set(t.x,t.y)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"innerPosition",{get:function(){return this._innerPosition},set:function(t){this._innerPosition.set(t.x,t.y)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale.set(t.x,t.y)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t},enumerable:!1,configurable:!0}),n.prototype.update=function(){null===this.parentTransform&&null!==this.gameObject.parent&&(this.parentTransform=this.gameObject.parent.transform),null!==this.parentTransform&&null===this.gameObject.parent&&(this.parentTransform=null),null!==this.parentTransform?this.translateFromParent():this._innerPosition.set(this._position.x,this._position.y)},n.prototype.translateFromParent=function(){var t=this.parentTransform._rotation*Math.PI/180,e=Math.atan2(this._innerPosition.x,this._innerPosition.y),n=Math.hypot(this._innerPosition.x,this._innerPosition.y);this._position.set(this.parentTransform._position.x+n*Math.sin(e-t),this.parentTransform._position.y+n*Math.cos(e-t)),this._rotation=this.parentTransform._rotation},n.prototype.forceUpdate=function(){this.update()},n}(o.Component);e.Transform=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GamepadData=e.GamepadController=void 0;var r=n(2),i=function(){function t(){var t=this;this.gamepads=[],this.eventHandler=function(e){"gamepadconnected"===e.type?t.gamepadConnected(e.gamepad):"gamepaddisconnected"===e.type&&t.gamepadDisconected(e.gamepad)},window.addEventListener("gamepadconnected",this.eventHandler),window.addEventListener("gamepaddisconnected",this.eventHandler),window.addEventListener(r.EVENT_UPDATE,(function(){return t.update()}));for(var e=0;e<navigator.getGamepads().length;e++)this.gamepads[e]=new o}return t.prototype.getGamepad=function(t){var e;return null!==(e=this.gamepads[t])&&void 0!==e?e:null},t.prototype.gamepadConnected=function(t){this.gamepads[t.index].updateFromGamepad(t)},t.prototype.gamepadDisconected=function(t){this.gamepads[t.index].updateFromGamepad(t)},t.prototype.update=function(){for(var t=0,e=navigator.getGamepads();t<e.length;t++){var n=e[t];null!==n&&this.gamepads[n.index].updateFromGamepad(n)}},t}();e.GamepadController=i;var o=function(){function t(){this._connected=!1,this._id=null,this.buttons=new Map,this.axes=new Map}return t.prototype.updateFromGamepad=function(t){var e=this;this._id=t.id,this._connected=t.connected,t.buttons.forEach((function(t,n){return e.buttons.set(n,t.pressed)})),t.axes.forEach((function(t,n){return e.axes.set(n,t)}))},t.prototype.getButtonPressed=function(t){return this.buttons.get(t)},t.prototype.getAxis=function(t){return this.axes.get(t)},Object.defineProperty(t.prototype,"connected",{get:function(){return this._connected},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dpadUp",{get:function(){var t;return null!==(t=this.buttons.get(12))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dpadDown",{get:function(){var t;return null!==(t=this.buttons.get(13))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dpadLeft",{get:function(){var t;return null!==(t=this.buttons.get(14))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dpadRight",{get:function(){var t;return null!==(t=this.buttons.get(15))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomFace",{get:function(){var t;return null!==(t=this.buttons.get(0))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightFace",{get:function(){var t;return null!==(t=this.buttons.get(1))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftFace",{get:function(){var t;return null!==(t=this.buttons.get(2))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topFace",{get:function(){var t;return null!==(t=this.buttons.get(3))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftShoulder",{get:function(){var t;return null!==(t=this.buttons.get(4))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightShoulder",{get:function(){var t;return null!==(t=this.buttons.get(5))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftTrigger",{get:function(){var t;return null!==(t=this.buttons.get(6))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightTrigger",{get:function(){var t;return null!==(t=this.buttons.get(7))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){var t;return null!==(t=this.buttons.get(8))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"back",{get:function(){var t;return null!==(t=this.buttons.get(9))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftStickButton",{get:function(){var t;return null!==(t=this.buttons.get(10))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightStickButton",{get:function(){var t;return null!==(t=this.buttons.get(11))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftStickHorizontal",{get:function(){var t;return null!==(t=this.axes.get(0))&&void 0!==t?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftStickVertical",{get:function(){var t;return null!==(t=this.axes.get(1))&&void 0!==t?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightStickHorizontal",{get:function(){var t;return null!==(t=this.axes.get(2))&&void 0!==t?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightStickVertical",{get:function(){var t;return null!==(t=this.axes.get(3))&&void 0!==t?t:0},enumerable:!1,configurable:!0}),t}();e.GamepadData=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardController=void 0;var r=function(){function t(){var t=this;this.keyPresses=new Map,this.eventHandler=function(e){"keydown"===e.type&&t.keyPresses.set(e.code,!0),"keyup"===e.type&&t.keyPresses.set(e.code,!1)},window.addEventListener("keydown",this.eventHandler),window.addEventListener("keyup",this.eventHandler)}return t.prototype.isPressed=function(t){var e;return null!==(e=this.keyPresses.get(t))&&void 0!==e&&e},t}();e.KeyboardController=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MouseController=void 0;var r=n(2),i=n(1),o=function(){function t(t){this._leftButtonPressed=!1,this._scrollButtonPressed=!1,this._rightButtonPressed=!1,this._positionInViewport=new i.Vector2(0,0),this._hasMoved=!1,this.lastPositionInViewport=new i.Vector2(0,0),this.canvas=t,this.setup()}return Object.defineProperty(t.prototype,"leftButtonPressed",{get:function(){return this._leftButtonPressed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollButtonPressed",{get:function(){return this._scrollButtonPressed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightButtonPressed",{get:function(){return this._rightButtonPressed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"positionInViewport",{get:function(){return this._positionInViewport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasMoved",{get:function(){return this._hasMoved},enumerable:!1,configurable:!0}),t.prototype.setup=function(){var t=this;this.canvas.addEventListener("mousemove",(function(e){return t.updatePosition(e)})),this.canvas.addEventListener("mousedown",(function(e){return t.updateButtonDown(e)})),this.canvas.addEventListener("mouseup",(function(e){return t.updateButtonUp(e)})),window.addEventListener(r.EVENT_UPDATE,(function(){return t.update()}))},t.prototype.updateButtonDown=function(t){t.preventDefault(),t.stopPropagation(),this._leftButtonPressed=0===t.button,this._scrollButtonPressed=1===t.button,this._rightButtonPressed=2===t.button},t.prototype.updateButtonUp=function(t){t.preventDefault(),t.stopPropagation(),this._leftButtonPressed=0!==t.button&&this._leftButtonPressed,this._scrollButtonPressed=1!==t.button&&this._scrollButtonPressed,this._rightButtonPressed=2!==t.button&&this._rightButtonPressed},t.prototype.updatePosition=function(t){t.preventDefault(),t.stopPropagation(),this._positionInViewport.set(t.offsetX/(this.canvas.clientWidth/this.canvas.width)-this.canvas.width/2,-t.offsetY/(this.canvas.clientHeight/this.canvas.height)+this.canvas.height/2)},t.prototype.update=function(){this._positionInViewport.x!==this.lastPositionInViewport.x||this._positionInViewport.y!==this.lastPositionInViewport.y?(this._hasMoved=!0,this.lastPositionInViewport.set(this._positionInViewport.x,this._positionInViewport.y)):this._hasMoved=!1},t}();e.MouseController=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLRenderer=e.WebGLContextVersion=void 0;var r=n(29),i=n(48);!function(t){t.LegacyWebGL="webgl",t.WebGL2="webgl2"}(e.WebGLContextVersion||(e.WebGLContextVersion={}));var o=function(){function t(t,e,n,r,i,o,a,u){this.fontAtlas=new Map,this.canvas=e,this.gl=this.canvas.getContext(t),n.loadProgram(),this.textureManager=r,this.imageRenderer=o,this.textRenderer=a,this.geometricRenderer=u,this.fontAtlasFactory=i}return t.prototype.clearCanvas=function(t){var e=i.hexToRgb(t);this.gl.clearColor(e.r,e.g,e.b,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT)},t.prototype.render=function(t,e){e.type===r.RenderDataType.Image&&(this.renderImage(t,e),this.lastRender="image"),e.type===r.RenderDataType.Text&&(this.renderText(t,e),this.lastRender="text"),e.type===r.RenderDataType.Collider&&(this.geometricRenderer.renderCollider(t.viewportRect,e,this.lastRender),this.lastRender="geometric")},t.prototype.renderImage=function(t,e){this.imageRenderer.render(!0===e.ui?t.originalViewportRect:t.viewportRect,this.textureManager.getOrCreateTextureFromImage(e.image,e.smooth),e,this.lastRender)},t.prototype.renderText=function(t,e){var n=this,r=Symbol.for(e.fontFamily);!1===this.fontAtlas.has(r)?this.fontAtlasFactory.create([[32,126],[161,255]],e.fontFamily,e.fontUrl).then((function(i){n.fontAtlas.set(r,i),n.fontAtlasLoaded(i,t,e)})):this.fontAtlasLoaded(this.fontAtlas.get(r),t,e)},t.prototype.fontAtlasLoaded=function(t,e,n){this.textRenderer.render(!0===n.ui?e.originalViewportRect:e.viewportRect,this.textureManager.getOrCreateTextureFromCanvas(n.fontFamily,t.canvas,!0),t,n,this.lastRender)},t}();e.WebGLRenderer=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PhysicsIterationManager=e.DEFAULT_ITERATIONS=e.DEFAULT_FRAMERATE=void 0,e.DEFAULT_FRAMERATE=60,e.DEFAULT_ITERATIONS=4;var r=function(){function t(t,e,n){this._physicsDeltaTime=0,this._deltaTimeAccumulator=0,this.timeManager=t,this._physicsFramerate=e,this._physicsIterations=n,this._unscaledPhysicsDeltaTime=parseFloat((1/this._physicsFramerate/this._physicsIterations).toFixed(6))}return Object.defineProperty(t.prototype,"physicsFramerate",{get:function(){return this._physicsFramerate},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"physicsIterations",{get:function(){return this._physicsIterations},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"physicsDeltaTime",{get:function(){return this._physicsDeltaTime},enumerable:!1,configurable:!0}),t.prototype.update=function(t){if(0!==this.timeManager.timeScale)for(this._physicsDeltaTime=this._unscaledPhysicsDeltaTime*this.timeManager.timeScale,this._deltaTimeAccumulator+=this.timeManager.unscaledDeltaTime;this._deltaTimeAccumulator>=this._unscaledPhysicsDeltaTime;)t(),this._deltaTimeAccumulator-=this._unscaledPhysicsDeltaTime},t}();e.PhysicsIterationManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssetManagerFacade=void 0;var r=n(2),i=function(){function t(){}return t.initialize=function(){this.assetManager=r.container.getSingleton("AssetManager")},t.getAssetsLoaded=function(){return this.assetManager.getAssetsLoaded()},t.createImage=function(t){return this.assetManager.createImage(t)},t.createAudio=function(t){return this.assetManager.createAudio(t)},t.createVideo=function(t){return this.assetManager.createVideo(t)},t.getImage=function(t){return this.assetManager.getImage(t)},t.getVideo=function(t){return this.assetManager.getVideo(t)},t.getAudio=function(t){return this.assetManager.getAudio(t)},t.assetManager=null,t}();e.AssetManagerFacade=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DomManagerFacade=void 0;var r=n(2),i=function(){function t(){}return t.initialize=function(){this.domManager=r.container.getSingleton("DomManager")},Object.defineProperty(t,"gameWidth",{get:function(){return this.domManager.canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(t,"gameHeight",{get:function(){return this.domManager.canvas.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"canvas",{get:function(){return this.domManager.canvas},enumerable:!1,configurable:!0}),t.domManager=null,t}();e.DomManagerFacade=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InputManagerFacade=void 0;var r=n(2),i=function(){function t(){}return t.initialize=function(){this.inputManager=r.container.getSingleton("InputManager")},Object.defineProperty(t,"mouse",{get:function(){return this.inputManager.mouse},enumerable:!1,configurable:!0}),Object.defineProperty(t,"keyboard",{get:function(){return this.inputManager.keyboard},enumerable:!1,configurable:!0}),Object.defineProperty(t,"gamepad",{get:function(){return this.inputManager.gamepad},enumerable:!1,configurable:!0}),t.inputManager=null,t}();e.InputManagerFacade=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SceneManagerFacade=void 0;var r=n(2),i=function(){function t(){}return t.initialize=function(){this.sceneManager=r.container.getSingleton("SceneManager")},t.loadScene=function(t){this.sceneManager.loadScene(t)},t.getCurrentSceneName=function(){return this.sceneManager.currentSceneName},t.loadOpeningScene=function(){this.sceneManager.loadOpeningScene()},t.sceneManager=null,t}();e.SceneManagerFacade=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeManagerFacade=void 0;var r=n(2),i=function(){function t(){}return t.initialize=function(){this.timeManager=r.container.getSingleton("TimeManager")},Object.defineProperty(t,"deltaTime",{get:function(){return this.timeManager.deltaTime},enumerable:!1,configurable:!0}),t.getTimeScale=function(){return this.timeManager.timeScale},t.setTimeScale=function(t){this.timeManager.timeScale=t},Object.defineProperty(t,"unscaledDeltaTime",{get:function(){return this.timeManager.unscaledDeltaTime},enumerable:!1,configurable:!0}),t.timeManager=null,t}();e.TimeManagerFacade=i},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GameCamera=void 0;var o=n(38),a=n(83),u=function(t){function e(){var e=t.call(this)||this;return e.transform.position.set(0,0),e.camera=e.addComponent((function(){return new a.Camera})),e}return i(e,t),Object.defineProperty(e.prototype,"layers",{get:function(){return this.camera.layers},set:function(t){this.camera.layers=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this.camera.depth},set:function(t){this.camera.depth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zoom",{get:function(){return this.camera.zoom},set:function(t){this.camera.zoom=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"originalViewporRect",{get:function(){return this.camera.originalViewportRect},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldSpaceRect",{get:function(){return this.camera.worldSpaceRect},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportRect",{get:function(){return this.camera.viewportRect},enumerable:!1,configurable:!0}),e.prototype.addLayer=function(t){this.camera.layers.push(t)},e}(o.GameObject);e.GameCamera=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=e.TYPE_CAMERA=void 0;var a=n(8),u=n(144),s=n(2),c=n(38),f=n(32),l=[c.LAYER_DEFAULT];e.TYPE_CAMERA="Camera";var h=function(t){function n(){var n=t.call(this)||this;return n.renderManager=s.container.getSingleton("RenderManager"),n.domManager=s.container.getSingleton("DomManager"),n._layers=l,n._depth=0,n._zoom=1,n._originalViewportRect=new f.Rectangle(0,0,0,0),n._viewportRect=new f.Rectangle(0,0,0,0),n._worldSpaceRect=new f.Rectangle(0,0,0,0),n.cameraData=new u.CameraData,n.allowMultiple=!1,n.type=e.TYPE_CAMERA,n.canvas=n.domManager.canvas,n}return i(n,t),Object.defineProperty(n.prototype,"layers",{get:function(){return this._layers},set:function(t){this._layers=o(l,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"zoom",{get:function(){return this._zoom},set:function(t){if(this.zoom<=0)throw new Error("zoom must be greather than 0");this._zoom=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"originalViewportRect",{get:function(){return this._originalViewportRect},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"worldSpaceRect",{get:function(){return this._worldSpaceRect},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"viewportRect",{get:function(){return this._viewportRect},enumerable:!1,configurable:!0}),n.prototype.addLayer=function(t){this._layers.push(t)},n.prototype.update=function(){this.updateOriginalViewportRect(),this.updateViewportRect(),this.updateWorldSpaceRect(),this.updateCameraData()},n.prototype.updateOriginalViewportRect=function(){this._originalViewportRect.x=-this.canvas.width/2,this._originalViewportRect.y=-this.canvas.height/2,this._originalViewportRect.width=this.canvas.width,this._originalViewportRect.height=this.canvas.height},n.prototype.updateViewportRect=function(){var t=1/this.zoom;this._viewportRect.x=this._originalViewportRect.x*t,this._viewportRect.y=this._originalViewportRect.y*t,this._viewportRect.width=this._originalViewportRect.width*t,this._viewportRect.height=this._originalViewportRect.height*t},n.prototype.updateWorldSpaceRect=function(){this._worldSpaceRect.x=this.gameObject.transform.position.x-this._viewportRect.width/2,this._worldSpaceRect.y=this.gameObject.transform.position.y-this._viewportRect.height/2,this._worldSpaceRect.width=this._viewportRect.width,this._worldSpaceRect.height=this._viewportRect.height},n.prototype.updateCameraData=function(){this.cameraData.depth=this._depth,this.cameraData.layers=this._layers,this.cameraData.originalViewportRect=this._originalViewportRect,this.cameraData.viewportRect=this._viewportRect,this.cameraData.worldSpaceRect=this._worldSpaceRect,this.cameraData.zoom=this._zoom,this.renderManager.addCameraData(this.cameraData)},n}(a.RenderComponent);e.Camera=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RectangleCollider=void 0;var r=n(1),i=n(150),o=function(){function t(t,e,n,o,a){this._position=new r.Vector2(0,0),this._width=0,this._height=0,this._position.set(t.x,t.y),this._quadVertex=[new r.Vector2(0,0),new r.Vector2(0,0),new r.Vector2(0,0),new r.Vector2(0,0)],this._width=e,this._height=n,this.gameObject=a,this.physics=o,this.shape=new i.Rectangle(this.position.x-this.width/2,this._position.y-this._height/2,this.position.x+this.width/2,this._position.y+this._height/2),this.updateQuadVertex()}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position.set(t.x,t.y),this.updateQuadVertex(),this.updateShape()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.updateQuadVertex()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.updateQuadVertex()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeftQuadVertex",{get:function(){return this._quadVertex[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomRightQuadvertex",{get:function(){return this._quadVertex[3]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topLeftQuadVertex",{get:function(){return this._quadVertex[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topRightQuadVertex",{get:function(){return this._quadVertex[2]},enumerable:!1,configurable:!0}),t.prototype.updateShape=function(){this.shape.position=this._position,this.shape.update()},t.prototype.updateQuadVertex=function(){this._quadVertex[0].set(this._position.x-this._width/2,this._position.y-this._height/2),this._quadVertex[1].set(this._position.x-this._width/2,this._position.y+this._height/2),this._quadVertex[2].set(this._position.x+this._width/2,this._position.y+this._height/2),this._quadVertex[3].set(this._position.x+this._width/2,this._position.y-this._height/2)},t}();e.RectangleCollider=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ColliderRenderData=void 0;var o=n(29),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=o.RenderDataType.Collider,e.color=null,e.shape=null,e}return i(e,t),e}(o.RenderData);e.ColliderRenderData=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ImageRenderData=void 0;var o=n(29),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=o.RenderDataType.Image,e.image=null,e.width=0,e.height=0,e.slice=null,e.flipHorizontal=!1,e.flipVertical=!1,e.rotation=null,e.smooth=!0,e.alpha=1,e.maskColor=null,e.maskColorMix=null,e}return i(e,t),e}(o.RenderData);e.ImageRenderData=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TilemapRenderer=void 0;var o=n(8),a=n(86),u=n(2),s=n(1),c=n(156),f=function(t){function e(){var e=t.call(this)||this;return e.tileset=null,e.tileScale=1,e.smooth=!0,e.tileWidth=0,e.tileHeight=0,e.orientation=new s.Vector2(1,1),e.renderManager=u.container.getSingleton("RenderManager"),e.tilemapProcessed=!1,e.tilesRenderData=[],e._width=0,e._height=0,e.tiles=[],e._realWidth=0,e._realHeight=0,e.allowMultiple=!1,e}return i(e,t),e.prototype.start=function(){this.tileWidth=this.tileset.tileWidth*this.tileScale*Math.abs(this.gameObject.transform.scale.x),this.tileHeight=this.tileset.tileHeight*this.tileScale*Math.abs(this.gameObject.transform.scale.y),this.orientation.set(Math.sign(this.gameObject.transform.scale.x),Math.sign(this.gameObject.transform.scale.y)),this.processTilemap(),this.updateTilesPosition()},e.prototype.update=function(){var t=this;this.tilesRenderData.forEach((function(e){return t.renderManager.addToRenderStack(e)}))},e.prototype.processTile=function(t,e,n,r,i){void 0===r&&(r=1),void 0===i&&(i={h:!1,v:!1});var o=this.createRenderData(t,e,n,r,i);this.updateSizeInfo(e+1,n+1),this.tilesRenderData.push(o)},e.prototype.createRenderData=function(t,e,n,r,i){void 0===r&&(r=1),void 0===i&&(i={h:!1,v:!1});var o=new a.ImageRenderData;return o.position.set(this.gameObject.transform.position.x+e*this.tileWidth*this.orientation.x+this.tileWidth*this.orientation.x/2,this.gameObject.transform.position.y-n*this.tileHeight*this.orientation.y-this.tileHeight*this.orientation.y/2),o.ui=!1,o.image=this.tileset.image,o.layer=this.gameObject.layer,o.width=this.tileWidth,o.height=this.tileHeight,o.slice=t,o.smooth=this.smooth,o.alpha=r,o.flipHorizontal=i.h!==this.orientation.x<0,o.flipVertical=i.v!==this.orientation.y<0,o},e.prototype.updateSizeInfo=function(t,e){this._width<t&&(this._width=t,this._realWidth+=this.tileWidth),this._height<e&&(this._height=e,this._realHeight+=this.tileHeight)},e.prototype.updateTilesPosition=function(){var t=this;this.tilesRenderData.forEach((function(e){e.position.set(e.position.x-Math.round(t._realWidth/2)*t.orientation.x,e.position.y+Math.round(t._realHeight/2)*t.orientation.y),t.addTileData(e)}))},e.prototype.addTileData=function(t){this.tiles.push(new c.TileData(t.position,t.width,t.height))},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realWidth",{get:function(){return this._realWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return this._realHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilesData",{get:function(){return this.tiles},enumerable:!1,configurable:!0}),e}(o.RenderComponent);e.TilemapRenderer=f},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(4),i=n(40),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(6),i=n(4),o=n(91);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(5),i=n(12),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},function(t,e,n){var r=n(51),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},function(t,e,n){var r=n(7),i=n(94),o=n(33),a=n(24);t.exports=function(t,e){for(var n=i(e),u=a.f,s=o.f,c=0;c<n.length;c++){var f=n[c];r(t,f)||u(t,f,s(e,f))}}},function(t,e,n){var r=n(35),i=n(54),o=n(97),a=n(26);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(5);t.exports=r},function(t,e,n){var r=n(7),i=n(28),o=n(163).indexOf,a=n(46);t.exports=function(t,e){var n,u=i(t),s=0,c=[];for(n in u)!r(a,n)&&r(u,n)&&c.push(n);for(;e.length>s;)r(u,n=e[s++])&&(~o(c,n)||c.push(n));return c}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(57);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var r=n(6),i=n(24),o=n(26),a=n(59);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),u=r.length,s=0;u>s;)i.f(t,n=r[s++],e[n]);return t}},function(t,e,n){var r=n(10);e.f=r},function(t,e,n){var r=n(95),i=n(7),o=n(100),a=n(24).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},function(t,e,n){var r=n(12),i=n(58),o=n(10)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){"use strict";var r=n(3),i=n(170),o=n(63),a=n(106),u=n(60),s=n(25),c=n(30),f=n(10),l=n(45),h=n(62),p=n(104),d=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,g=f("iterator"),m=function(){return this};t.exports=function(t,e,n,f,p,v,b){i(n,e,f);var _,M,x,w=function(t){if(t===p&&T)return T;if(!y&&t in P)return P[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},O=e+" Iterator",j=!1,P=t.prototype,R=P[g]||P["@@iterator"]||p&&P[p],T=!y&&R||w(p),S="Array"==e&&P.entries||R;if(S&&(_=o(S.call(new t)),d!==Object.prototype&&_.next&&(l||o(_)===d||(a?a(_,d):"function"!=typeof _[g]&&s(_,g,m)),u(_,O,!0,!0),l&&(h[O]=m))),"values"==p&&R&&"values"!==R.name&&(j=!0,T=function(){return R.call(this)}),l&&!b||P[g]===T||s(P,g,T),h[e]=T,p)if(M={values:w("values"),keys:v?T:w("keys"),entries:w("entries")},b)for(x in M)(y||j||!(x in P))&&c(P,x,M[x]);else r({target:e,proto:!0,forced:y||j},M);return M}},function(t,e,n){"use strict";var r,i,o,a=n(63),u=n(25),s=n(7),c=n(10),f=n(45),l=c("iterator"),h=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):h=!0),null==r&&(r={}),f||s(r,l)||u(r,l,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},function(t,e,n){var r=n(4);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){var r=n(26),i=n(171);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){"use strict";var r=n(3),i=n(47).map,o=n(66),a=n(67),u=o("map"),s=a("map");r({target:"Array",proto:!0,forced:!u||!s},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r,i,o=n(5),a=n(178),u=o.process,s=u&&u.versions,c=s&&s.v8;c?i=(r=c.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},function(t,e,n){"use strict";var r=n(3),i=n(4),o=n(58),a=n(12),u=n(31),s=n(55),c=n(111),f=n(102),l=n(66),h=n(10),p=n(109),d=h("isConcatSpreadable"),y=p>=51||!i((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),g=l("concat"),m=function(t){if(!a(t))return!1;var e=t[d];return void 0!==e?!!e:o(t)};r({target:"Array",proto:!0,forced:!y||!g},{concat:function(t){var e,n,r,i,o,a=u(this),l=f(a,0),h=0;for(e=-1,r=arguments.length;e<r;e++)if(m(o=-1===e?a:arguments[e])){if(h+(i=s(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,h++)n in o&&c(l,h,o[n])}else{if(h>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(l,h++,o)}return l.length=h,l}})},function(t,e,n){"use strict";var r=n(42),i=n(24),o=n(34);t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},function(t,e,n){"use strict";var r=n(47).forEach,i=n(181),o=n(67),a=i("forEach"),u=o("forEach");t.exports=a&&u?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,n){"use strict";var r;n.r(e),n.d(e,"v1",(function(){return y})),n.d(e,"v3",(function(){return j})),n.d(e,"v4",(function(){return P})),n.d(e,"v5",(function(){return S})),n.d(e,"NIL",(function(){return E})),n.d(e,"version",(function(){return C})),n.d(e,"validate",(function(){return u})),n.d(e,"stringify",(function(){return h})),n.d(e,"parse",(function(){return g}));var i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=function(t){return"string"==typeof t&&a.test(t)},s=[],c=0;c<256;++c)s.push((c+256).toString(16).substr(1));var f,l,h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]).toLowerCase();if(!u(n))throw TypeError("Stringified UUID is invalid");return n},p=0,d=0;var y=function(t,e,n){var r=e&&n||0,i=e||new Array(16),a=(t=t||{}).node||f,u=void 0!==t.clockseq?t.clockseq:l;if(null==a||null==u){var s=t.random||(t.rng||o)();null==a&&(a=f=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==u&&(u=l=16383&(s[6]<<8|s[7]))}var c=void 0!==t.msecs?t.msecs:Date.now(),y=void 0!==t.nsecs?t.nsecs:d+1,g=c-p+(y-d)/1e4;if(g<0&&void 0===t.clockseq&&(u=u+1&16383),(g<0||c>p)&&void 0===t.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=c,d=y,l=u;var m=(1e4*(268435455&(c+=122192928e5))+y)%4294967296;i[r++]=m>>>24&255,i[r++]=m>>>16&255,i[r++]=m>>>8&255,i[r++]=255&m;var v=c/4294967296*1e4&268435455;i[r++]=v>>>8&255,i[r++]=255&v,i[r++]=v>>>24&15|16,i[r++]=v>>>16&255,i[r++]=u>>>8|128,i[r++]=255&u;for(var b=0;b<6;++b)i[r+b]=a[b];return e||h(i)};var g=function(t){if(!u(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n};var m=function(t,e,n){function r(t,r,i,o){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof r&&(r=g(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+t.length);if(a.set(r),a.set(t,r.length),(a=n(a))[6]=15&a[6]|e,a[8]=63&a[8]|128,i){o=o||0;for(var u=0;u<16;++u)i[o+u]=a[u];return i}return h(a)}try{r.name=t}catch(t){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r};function v(t){return 14+(t+64>>>9<<4)+1}function b(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function _(t,e,n,r,i,o){return b((a=b(b(e,t),b(r,o)))<<(u=i)|a>>>32-u,n);var a,u}function M(t,e,n,r,i,o,a){return _(e&n|~e&r,t,e,i,o,a)}function x(t,e,n,r,i,o,a){return _(e&r|n&~r,t,e,i,o,a)}function w(t,e,n,r,i,o,a){return _(e^n^r,t,e,i,o,a)}function O(t,e,n,r,i,o,a){return _(n^(e|~r),t,e,i,o,a)}var j=m("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){for(var e=[],n=32*t.length,r=0;r<n;r+=8){var i=t[r>>5]>>>r%32&255,o=parseInt("0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[v(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<t.length;a+=16){var u=n,s=r,c=i,f=o;n=M(n,r,i,o,t[a],7,-680876936),o=M(o,n,r,i,t[a+1],12,-389564586),i=M(i,o,n,r,t[a+2],17,606105819),r=M(r,i,o,n,t[a+3],22,-1044525330),n=M(n,r,i,o,t[a+4],7,-176418897),o=M(o,n,r,i,t[a+5],12,1200080426),i=M(i,o,n,r,t[a+6],17,-1473231341),r=M(r,i,o,n,t[a+7],22,-45705983),n=M(n,r,i,o,t[a+8],7,1770035416),o=M(o,n,r,i,t[a+9],12,-1958414417),i=M(i,o,n,r,t[a+10],17,-42063),r=M(r,i,o,n,t[a+11],22,-1990404162),n=M(n,r,i,o,t[a+12],7,1804603682),o=M(o,n,r,i,t[a+13],12,-40341101),i=M(i,o,n,r,t[a+14],17,-1502002290),r=M(r,i,o,n,t[a+15],22,1236535329),n=x(n,r,i,o,t[a+1],5,-165796510),o=x(o,n,r,i,t[a+6],9,-1069501632),i=x(i,o,n,r,t[a+11],14,643717713),r=x(r,i,o,n,t[a],20,-373897302),n=x(n,r,i,o,t[a+5],5,-701558691),o=x(o,n,r,i,t[a+10],9,38016083),i=x(i,o,n,r,t[a+15],14,-660478335),r=x(r,i,o,n,t[a+4],20,-405537848),n=x(n,r,i,o,t[a+9],5,568446438),o=x(o,n,r,i,t[a+14],9,-1019803690),i=x(i,o,n,r,t[a+3],14,-187363961),r=x(r,i,o,n,t[a+8],20,1163531501),n=x(n,r,i,o,t[a+13],5,-1444681467),o=x(o,n,r,i,t[a+2],9,-51403784),i=x(i,o,n,r,t[a+7],14,1735328473),r=x(r,i,o,n,t[a+12],20,-1926607734),n=w(n,r,i,o,t[a+5],4,-378558),o=w(o,n,r,i,t[a+8],11,-2022574463),i=w(i,o,n,r,t[a+11],16,1839030562),r=w(r,i,o,n,t[a+14],23,-35309556),n=w(n,r,i,o,t[a+1],4,-1530992060),o=w(o,n,r,i,t[a+4],11,1272893353),i=w(i,o,n,r,t[a+7],16,-155497632),r=w(r,i,o,n,t[a+10],23,-1094730640),n=w(n,r,i,o,t[a+13],4,681279174),o=w(o,n,r,i,t[a],11,-358537222),i=w(i,o,n,r,t[a+3],16,-722521979),r=w(r,i,o,n,t[a+6],23,76029189),n=w(n,r,i,o,t[a+9],4,-640364487),o=w(o,n,r,i,t[a+12],11,-421815835),i=w(i,o,n,r,t[a+15],16,530742520),r=w(r,i,o,n,t[a+2],23,-995338651),n=O(n,r,i,o,t[a],6,-198630844),o=O(o,n,r,i,t[a+7],10,1126891415),i=O(i,o,n,r,t[a+14],15,-1416354905),r=O(r,i,o,n,t[a+5],21,-57434055),n=O(n,r,i,o,t[a+12],6,1700485571),o=O(o,n,r,i,t[a+3],10,-1894986606),i=O(i,o,n,r,t[a+10],15,-1051523),r=O(r,i,o,n,t[a+1],21,-2054922799),n=O(n,r,i,o,t[a+8],6,1873313359),o=O(o,n,r,i,t[a+15],10,-30611744),i=O(i,o,n,r,t[a+6],15,-1560198380),r=O(r,i,o,n,t[a+13],21,1309151649),n=O(n,r,i,o,t[a+4],6,-145523070),o=O(o,n,r,i,t[a+11],10,-1120210379),i=O(i,o,n,r,t[a+2],15,718787259),r=O(r,i,o,n,t[a+9],21,-343485551),n=b(n,u),r=b(r,s),i=b(i,c),o=b(o,f)}return[n,r,i,o]}(function(t){if(0===t.length)return[];for(var e=8*t.length,n=new Uint32Array(v(e)),r=0;r<e;r+=8)n[r>>5]|=(255&t[r/8])<<r%32;return n}(t),8*t.length))}));var P=function(t,e,n){var r=(t=t||{}).random||(t.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return h(r)};function R(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function T(t,e){return t<<e|t>>>32-e}var S=m("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,a=Math.ceil(o/16),u=new Array(a),s=0;s<a;++s){for(var c=new Uint32Array(16),f=0;f<16;++f)c[f]=t[64*s+4*f]<<24|t[64*s+4*f+1]<<16|t[64*s+4*f+2]<<8|t[64*s+4*f+3];u[s]=c}u[a-1][14]=8*(t.length-1)/Math.pow(2,32),u[a-1][14]=Math.floor(u[a-1][14]),u[a-1][15]=8*(t.length-1)&4294967295;for(var l=0;l<a;++l){for(var h=new Uint32Array(80),p=0;p<16;++p)h[p]=u[l][p];for(var d=16;d<80;++d)h[d]=T(h[d-3]^h[d-8]^h[d-14]^h[d-16],1);for(var y=n[0],g=n[1],m=n[2],v=n[3],b=n[4],_=0;_<80;++_){var M=Math.floor(_/20),x=T(y,5)+R(M,g,m,v)+b+e[M]+h[_]>>>0;b=v,v=m,m=T(g,30)>>>0,g=y,y=x}n[0]=n[0]+y>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+m>>>0,n[3]=n[3]+v>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),E="00000000-0000-0000-0000-000000000000";var C=function(t){if(!u(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},function(t){t.exports=JSON.parse('{"compressionlevel":-1,"editorsettings":{"export":{"format":"json","target":"Tilemap01.json"}},"height":105,"infinite":true,"layers":[{"chunks":[{"data":[8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,20,20,20,10,11,12,20,20,10,11,12,20,20,10,11,12,20,20,20,22,20,24,20,20,22,20,24,20,20,22,20,24,20,20,20,34,35,36,20,20,34,35,36,20,20,34,35,36,20,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,1,20,21,0,0,0,0,0,0,0,0,0,0,1,2,2,30,2,2,2,2,2,2,2,2,2,2,2,2,30,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],"height":16,"width":16,"x":0,"y":0},{"data":[8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,20,20,10,11,12,20,20,10,11,12,20,20,10,11,12,20,20,20,22,20,24,20,20,22,20,24,20,20,22,20,24,20,20,20,34,35,36,20,20,34,35,36,20,20,34,35,36,20,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,44,2,2,44,2,44,2,2,3,0,0,0,0,0,0,14,14,14,14,14,14,14,14,14,15,0,43,45,0,0,0,14,14,14,14,14,14,14,14,14,15,0,0,0,0,43,45,14,14,14,14,14,14,14,14,14,15,0,0,0,0,0,0,14,14,14,14,14,14,14,14,14,28,2,2,2,2,2,2],"height":16,"width":16,"x":16,"y":0},{"data":[8,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,20,10,11,12,20,20,0,0,0,0,0,0,0,0,0,0,20,22,20,24,20,20,0,0,0,0,0,0,0,0,0,0,20,34,35,36,20,20,0,0,0,0,0,0,0,0,0,0,32,32,32,32,12,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,3,0,0,0,0,0,0,0,0,0,0],"height":16,"width":16,"x":32,"y":0},{"data":[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":16,"width":16,"x":0,"y":16},{"data":[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":16,"width":16,"x":16,"y":16},{"data":[14,14,14,14,14,15,0,0,0,0,0,0,0,0,0,0,14,14,14,14,14,15,0,0,0,0,0,0,0,0,0,0,14,14,14,14,14,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":16,"width":16,"x":32,"y":16}],"height":32,"id":1,"name":"Tile Layer 1","opacity":1,"startx":0,"starty":0,"type":"tilelayer","visible":true,"width":48,"x":0,"y":0}],"nextlayerid":2,"nextobjectid":1,"orientation":"orthogonal","renderorder":"right-down","tiledversion":"1.4.2","tileheight":16,"tilesets":[{"firstgid":1,"source":"../../../../Tiled Projects/Mini Platformer/Tileset01.tsx"}],"tilewidth":16,"type":"map","version":1.4,"width":116}')},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadDependencies=void 0;var r=n(116),i=n(117),o=n(122),a=n(123),u=n(72),s=n(124),c=n(73),f=n(74),l=n(125),h=n(126),p=n(127),d=n(128),y=n(129),g=n(130),m=n(75),v=n(131),b=n(132),_=n(133),M=n(134),x=n(139),w=n(140),O=n(141),j=n(76);e.loadDependencies=function(t,e){t.add("DomManager",(function(){return new o.DomManager(e.config.containerNode,e.config.gameWidth,e.config.gameHeight)}));var n=t.getSingleton("DomManager");P(t,e,n),T(t,n),t.add("SceneManager",(function(){return new v.SceneManager(e,t.getSingleton("RenderManager"))})),t.add("CollisionManager",(function(){return new i.CollisionManager(t.getSingleton("RenderManager"))})),t.add("GameObjectManager",(function(){return new a.GameObjectManager})),t.add("AssetManager",(function(){return new r.AssetManager})),t.add("TimeManager",(function(){return new b.TimeManager})),t.add("PhysicsIterationManager",(function(){return new j.PhysicsIterationManager(t.getSingleton("TimeManager"),e.config.physicsFramerate,e.config.physicsIterations)}))};var P=function(t,e,n){var r=S();if("default"===e.config.context2d||"fallback"===e.config.context2d&&null===r)t.add("Renderer",(function(){return new l.Context2DRenderer(n.canvas)})),e.config.debugEnabled&&console.log("Using 2d rendering context");else{if(null===r)throw new Error("WebGL is not supported, use context2d instead.");R(r,t,n),e.config.debugEnabled&&console.log("Using WebGL rendering context (version: "+r+")")}t.add("RenderManager",(function(){return new h.RenderManager(t.getSingleton("Renderer"),e.config.debugEnabled)})),t.add("FontAtlasFactory",(function(){return new x.FontAtlasFactory}))},R=function(t,e,n){e.add("ShaderLoader",(function(){return new y.ShaderLoader})),e.add("ProgramFactory",(function(){return new d.ProgramFactory(e.getSingleton("ShaderLoader"))})),e.add("ProgramManager",(function(){return new M.ProgramManager(e.getSingleton("ProgramFactory"),t,n.canvas)})),e.add("TextureFactory",(function(){return new g.TextureFactory(t,n.canvas)})),e.add("TextureManager",(function(){return new _.TextureManager(e.getSingleton("TextureFactory"))})),e.add("WebGLImageRenderer",(function(){return new p.ImageRenderer(t,n.canvas,e.getSingleton("ProgramManager"))})),e.add("WebGLTextRenderer",(function(){return new w.TextRenderer(t,n.canvas,e.getSingleton("ProgramManager"))})),e.add("WebGLGeometricRenderer",(function(){return new O.GeometricRenderer(t,n.canvas,e.getSingleton("ProgramManager"))})),e.add("Renderer",(function(){return new m.WebGLRenderer(t,n.canvas,e.getSingleton("ProgramManager"),e.getSingleton("TextureManager"),e.getSingleton("FontAtlasFactory"),e.getSingleton("WebGLImageRenderer"),e.getSingleton("WebGLTextRenderer"),e.getSingleton("WebGLGeometricRenderer"))}))},T=function(t,e){t.add("Mouse",(function(){return new f.MouseController(e.canvas)})),t.add("Keyboard",(function(){return new c.KeyboardController})),t.add("Gamepad",(function(){return new u.GamepadController})),t.add("InputManager",(function(){return new s.InputManager(t.getSingleton("Mouse"),t.getSingleton("Keyboard"),t.getSingleton("Gamepad"))}))},S=function(){return null!==document.createElement("canvas").getContext(m.WebGLContextVersion.WebGL2)?m.WebGLContextVersion.WebGL2:null!==document.createElement("canvas").getContext(m.WebGLContextVersion.LegacyWebGL)?m.WebGLContextVersion.LegacyWebGL:null}},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.AssetManager=e.AssetType=void 0,function(t){t.Image="Image",t.Audio="Audio",t.Video="Video"}(r=e.AssetType||(e.AssetType={}));var i=function(){this.type=null,this.url=null,this.loaded=!1,this.element=null},o=function(){function t(){this.assets=[]}return t.prototype.getAssetsLoaded=function(){return this.assets.reduce((function(t,e){return t&&e.loaded}),!0)},t.prototype.createImage=function(t){var e=this.createAsset(t,r.Image);return e.element=new Image,e.element.src=t,e.element.naturalWidth?e.loaded=!0:e.element.addEventListener("load",(function(){return e.loaded=!0})),e.element},t.prototype.createAudio=function(t){var e=this.createAsset(t,r.Audio);return e.element=new Audio,e.element.src=t,e.element.duration?e.loaded=!0:e.element.addEventListener("canplaythrough",(function(){return e.loaded=!0})),e.element},t.prototype.createVideo=function(t){var e=this.createAsset(t,r.Video);return e.element=document.createElement("video"),e.element.src=t,e.element.duration?e.loaded=!0:e.element.addEventListener("canplaythrough",(function(){return e.loaded=!0})),e.element},t.prototype.getImage=function(t){return this.getAsset(t,r.Image)},t.prototype.getVideo=function(t){return this.getAsset(t,r.Video)},t.prototype.getAudio=function(t){return this.getAsset(t,r.Audio)},t.prototype.getAsset=function(t,e){return void 0===e&&(e=null),this.assets.reduce((function(n,r){return r.url!==t||null!==e&&e!==r.type?n:r}),null).element},t.prototype.createAsset=function(t,e){var n=new i;return n.type=e,n.url=t,this.assets.push(n),n},t}();e.AssetManager=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CollisionManager=void 0;var r=n(70),i=n(38),o=n(32),a=n(1),u=n(118),s=n(119),c=function(){function t(t){this.debug=!1,this.colliders=[],this.satResolver=new s.SatResolver,this.renderManager=t,this.quad=new u.QuadTree(0,new o.Rectangle(-2500,-2500,5e3,5e3))}return t.prototype.prepare=function(){!0===this.debug&&this.debugQuads(this.quad),this.refreshQuad()},t.prototype.addCollider=function(t){this.colliders.push(t)},t.prototype.removeCollider=function(t){var e=this.colliders.indexOf(t);-1!==e&&(delete this.colliders[e],this.colliders.splice(e,1))},t.prototype.getCollisionsForCollider=function(t){var e=this.broadPhase(t);return this.narrowPhase(t,e)},t.prototype.broadPhase=function(t){return this.quad.retrieve(t)},t.prototype.narrowPhase=function(t,e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r],a=this.satResolver.getSatData(t.shape,o.shape);null!==a&&n.push({localCollider:t,remoteCollider:o,collisionData:a})}return n},t.prototype.refreshQuad=function(){this.quad.clear();for(var t=0,e=this.colliders;t<e.length;t++){var n=e[t];this.quad.insert(n)}},t.prototype.debugQuads=function(t){var e=new r.GeometricRenderData;e.debug=!0,e.position=new a.Vector2(t.bounds.x,t.bounds.y),e.layer=i.LAYER_DEFAULT,e.geometric=t.bounds,e.geometricType=r.GEOMETRIC_RECTANGLE,e.color="#0000FF",this.renderManager.addToRenderStack(e);for(var n=0,o=t.quadrants;n<o.length;n++){var u=o[n];this.debugQuads(u)}},t}();e.CollisionManager=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuadTree=void 0;var r=n(1),i=n(32),o=function(){function t(t,e){this.maxColliders=20,this.maxLevels=5,this.sw=0,this.se=1,this.nw=2,this.ne=3,this.colliders=[],this.quadrants=[],this.level=t,this.bounds=e}return t.prototype.insert=function(t){this.hasQuadChildren()?this.insertColliderIntoChildrenQuads(t):(this.colliders.push(t),!1!==this.isQuadFull()&&this.level<this.maxLevels&&this.splitQuad())},t.prototype.retrieve=function(t){var e=[];if(this.hasQuadChildren())for(var n=0,r=this.getChildrenQuadrantForCollider(t);n<r.length;n++){var i=r[n];e.push.apply(e,i.retrieve(t))}e.push.apply(e,this.colliders);var o=e.indexOf(t);return-1!==o&&e.splice(o,1),e},t.prototype.clear=function(){for(var t=0,e=this.quadrants;t<e.length;t++){e[t].clear()}this.colliders=[],this.quadrants=[]},t.prototype.splitQuad=function(){var e=this.getQuadrantMidPoint(),n=e.x,r=e.y,o=this.level+1,a=this.bounds.width/2,u=this.bounds.height/2;this.quadrants=[new t(o,new i.Rectangle(n-a,r-u,a,u)),new t(o,new i.Rectangle(n,r-u,a,u)),new t(o,new i.Rectangle(n-a,r,a,u)),new t(o,new i.Rectangle(n,r,a,u))];for(var s=0,c=this.colliders;s<c.length;s++){var f=c[s];this.insertColliderIntoChildrenQuads(f)}this.colliders=[]},t.prototype.getChildrenQuadrantForCollider=function(t){if(0===this.quadrants.length)throw new Error("Current quadrant does not have quadrant children.");var e=this.getQuadrantMidPoint(),n=e.x,r=e.y,i=[];if(t.bottomLeftQuadVertex.x<=n&&t.bottomLeftQuadVertex.y<=r&&i.push(this.quadrants[this.sw]),t.bottomRightQuadvertex.x>=n&&t.bottomRightQuadvertex.y<=r&&i.push(this.quadrants[this.se]),t.topLeftQuadVertex.x<=n&&t.topLeftQuadVertex.y>=r&&i.push(this.quadrants[this.nw]),t.topRightQuadVertex.x>=n&&t.topRightQuadVertex.y>=r&&i.push(this.quadrants[this.ne]),0===i.length)throw new Error("Children does not fit in any children quadrant");return i},t.prototype.insertColliderIntoChildrenQuads=function(t){for(var e=0,n=this.getChildrenQuadrantForCollider(t);e<n.length;e++){n[e].insert(t)}},t.prototype.getQuadrantMidPoint=function(){return new r.Vector2(this.bounds.width/2+this.bounds.x,this.bounds.height/2+this.bounds.y)},t.prototype.hasQuadChildren=function(){return this.quadrants.length>0},t.prototype.isQuadFull=function(){return this.colliders.length>this.maxColliders},t}();e.QuadTree=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SatResolver=void 0;var r=n(1),i=n(39),o=n(120),a=n(121),u=function(){function t(){}return t.prototype.getSatData=function(t,e){this.currentOverlap=null,this.vertexShape=null;for(var n=null,i=null,a=this.findAxes(t,e),u=this.getShapeAxes(t),s=0;s<a.length;s++){var c=this.projShapeOntoAxis(a[s],t),f=this.projShapeOntoAxis(a[s],e);if(this.currentOverlap=Math.min(c.max,f.max)-Math.max(c.min,f.min),this.currentOverlap<0)return null;if(c.max>f.max&&c.min<f.min||c.max<f.max&&c.min>f.min){var l=Math.abs(c.min-f.min),h=Math.abs(c.max-f.max);l<h?this.currentOverlap+=l:(this.currentOverlap+=h,r.Vector2.scale(a[s],a[s],-1))}(this.currentOverlap<n||null===n)&&(n=this.currentOverlap,i=a[s],s<u?(this.vertexShape=e,c.max>f.max&&r.Vector2.scale(i,a[s],-1)):(this.vertexShape=t,c.max<f.max&&r.Vector2.scale(i,a[s],-1)))}var p=this.projShapeOntoAxis(i,this.vertexShape).collisionVertex;return this.vertexShape===e&&r.Vector2.scale(i,i,-1),new o.SatData(n,i,p)},t.prototype.findAxes=function(t,e){var n=[];return t.type===i.ShapeType.Rectangle&&(n.push(r.Vector2.normal(new r.Vector2,t.direction)),n.push(t.direction)),e.type===i.ShapeType.Rectangle&&(n.push(r.Vector2.normal(new r.Vector2,t.direction)),n.push(e.direction)),n},t.prototype.getShapeAxes=function(t){if(t.type===i.ShapeType.Rectangle)return 2},t.prototype.projShapeOntoAxis=function(t,e){for(var n=r.Vector2.dot(t,e.vertex[0]),i=n,o=e.vertex[0],u=0;u<e.vertex.length;u++){var s=r.Vector2.dot(t,e.vertex[u]);s<n&&(n=s,o=e.vertex[u]),s>i&&(i=s)}return new a.ShapeAxisProjection(n,i,o)},t}();e.SatResolver=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SatData=void 0;var r=n(1),i=function(){function t(t,e,n){this._direction=new r.Vector2,this._contactVertex=new r.Vector2,this._penetration=t,this._direction.set(e.x,e.y),this._contactVertex.set(n.x,n.y)}return Object.defineProperty(t.prototype,"penetration",{get:function(){return this._penetration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contactVertex",{get:function(){return this._contactVertex},enumerable:!1,configurable:!0}),t}();e.SatData=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeAxisProjection=void 0;var r=n(1),i=function(){function t(t,e,n){this._collisionVertex=new r.Vector2,this._min=t,this._max=e,this._collisionVertex.set(n.x,n.y)}return Object.defineProperty(t.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collisionVertex",{get:function(){return this._collisionVertex},enumerable:!1,configurable:!0}),t}();e.ShapeAxisProjection=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DomManager=void 0;var r=function(){function t(t,e,n){this._canvas=null,this.containerNode=t,this.gameWidth=e,this.gameHeight=n,this.setupCanvas()}return Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),t.prototype.setupCanvas=function(){this._canvas=document.createElement("canvas"),this._canvas.id="miniEngineGameCanvas",this._canvas.width=Math.floor(this.gameWidth),this._canvas.height=Math.floor(this.gameHeight),this._canvas.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.containerNode.appendChild(this._canvas)},t}();e.DomManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameObjectManager=void 0;var r=function(){function t(){this.gameObjects=[]}return t.prototype.addGameObject=function(t,e,n){if(void 0===n&&(n=null),this.findGameObjectByName(e))throw new Error("There is already a GameObject with the name "+e);var r=t();return r.name=e,r.parent=n,this.gameObjects.push(r),r},t.prototype.getGameObjects=function(){return this.gameObjects},t.prototype.findGameObjectByUuid=function(t){return this.gameObjects.reduce((function(e,n){return n.uuid===t?n:e}),null)},t.prototype.findGameObjectByName=function(t){return this.gameObjects.reduce((function(e,n){return n.name===t?n:e}),null)},t.prototype.findGameObjectsByParent=function(t){return this.gameObjects.filter((function(e){return e.parent===t}))},t.prototype.findGameObjectByParentAndName=function(t,e){return this.gameObjects.reduce((function(n,r){return r.name===e&&r.parent===t?r:n}),null)},t.prototype.findGameObjectsByTag=function(t){return this.gameObjects.filter((function(e){return e.tag===t}))},t.prototype.findGameObjectByTag=function(t){var e;return null!==(e=this.findGameObjectsByTag(t)[0])&&void 0!==e?e:null},t.prototype.destroyAllGameObjects=function(){var t=this;this.gameObjects.forEach((function(e){return t._destroyGameObject(e,!1)})),this.gameObjects=[]},t.prototype.destroyGameObject=function(t){this._destroyGameObject(t,!0)},t.prototype._destroyGameObject=function(t,e){var n=this.gameObjects.indexOf(t);-1!==n&&(e&&this.destroyChildren(t),t.destroy(),delete this.gameObjects[n])},t.prototype.destroyChildren=function(t){var e=this;this.findGameObjectsByParent(t).forEach((function(t){e.destroyChildren(t),e.destroyGameObject(t)}))},t}();e.GameObjectManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InputManager=void 0;var r=function(t,e,n){this.mouse=t,this.keyboard=e,this.gamepad=n};e.InputManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context2DRenderer=void 0;var r=n(1),i=n(39),o=n(70),a=n(29),u=function(){function t(t){this.canvas=null,this.canvasContext=null,this.imagePosition=new r.Vector2(0,0),this.canvas=t,this.canvasContext=t.getContext("2d")}return t.prototype.clearCanvas=function(t){void 0===t&&(t=null),this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height),null!==t&&(this.canvasContext.fillStyle=t,this.canvasContext.fillRect(0,0,this.canvas.width,this.canvas.height))},t.prototype.render=function(t,e){e.type===a.RenderDataType.Image&&this.renderImage(e,t.zoom),e.type===a.RenderDataType.Text&&this.renderText(e),e.type===a.RenderDataType.Geometric&&this.renderGeometric(e),e.type===a.RenderDataType.Collider&&this.renderCollider(e,t.zoom)},t.prototype.renderImage=function(t,e){this.updateRenderPosition(t),this.imagePosition.set(0,0),this.canvasContext.save(),!0!==t.ui&&this.canvasContext.setTransform(e,0,0,e,this.canvas.width*(1-e)/2,this.canvas.height*(1-e)/2),t.rotation?(this.canvasContext.translate(t.positionInViewport.x+t.width/2,t.positionInViewport.y+t.height/2),this.imagePosition.set(-t.width/2,-t.height/2),this.canvasContext.rotate(-t.rotation*Math.PI/180)):(this.canvasContext.translate(t.positionInViewport.x,t.positionInViewport.y),this.imagePosition.set(t.flipHorizontal?-t.width:this.imagePosition.x,t.flipVertical?-t.height:this.imagePosition.y)),this.canvasContext.imageSmoothingEnabled=t.smooth,this.canvasContext.scale(t.flipHorizontal?-1:1,t.flipVertical?-1:1),void 0!==t.slice&&null!==t.slice?this.canvasContext.drawImage(t.image,t.slice.x,t.slice.y,t.slice.width,t.slice.height,this.imagePosition.x,this.imagePosition.y,t.width,t.height):this.canvasContext.drawImage(t.image,this.imagePosition.x,this.imagePosition.y,t.width,t.height),this.canvasContext.restore()},t.prototype.renderText=function(t){var e=this;this.updateRenderPosition(t),this.canvasContext.save();var n=[t.bold?"bold":"",t.italic?"italic":"",t.fontSize+"px",t.fontFamily];this.canvasContext.font=n.join(" "),this.canvasContext.fillStyle=t.color,this.canvasContext.textBaseline="middle",Array.isArray(t.text)?t.text.forEach((function(n,r){e.canvasContext.fillText(n,t.positionInViewport.x,t.positionInViewport.y+(t.lineSeparation+t.fontSize)*r)})):this.canvasContext.fillText(t.text,t.positionInViewport.x,t.positionInViewport.y),this.canvasContext.restore()},t.prototype.renderGeometric=function(t){switch(this.canvasContext.save(),this.updateRenderPosition(t),t.geometricType){case o.GEOMETRIC_RECTANGLE:this.canvasContext.strokeStyle=t.color,this.canvasContext.strokeRect(t.positionInViewport.x,t.positionInViewport.y,t.geometric.width,t.geometric.height);break;case o.GEOMETRIC_POLYGON:}this.canvasContext.restore()},t.prototype.renderCollider=function(t,e){var n=this;this.canvasContext.save(),!0!==t.ui&&this.canvasContext.setTransform(e,0,0,e,this.canvas.width*(1-e)/2,this.canvas.height*(1-e)/2),this.updateRenderPosition(t),this.canvasContext.beginPath(),this.canvasContext.strokeStyle=t.color;var r=t.shape.clone();switch(r.position=t.positionInViewport,r.update(),r.type){case i.ShapeType.Rectangle:this.canvasContext.moveTo(r.vertex[0].x,r.vertex[0].y),[1,2,3,0].forEach((function(t){n.canvasContext.lineTo(r.vertex[t].x,r.vertex[t].y)}))}this.canvasContext.strokeStyle=t.color,this.canvasContext.stroke(),this.canvasContext.closePath(),this.canvasContext.restore()},t.prototype.updateRenderPosition=function(t){t.type===a.RenderDataType.Image&&this.centerImage(t),t.positionInViewport.set(Number((t.positionInViewport.x+this.canvas.width/2).toFixed(0)),Number((this.canvas.height/2-t.positionInViewport.y).toFixed(0)))},t.prototype.centerImage=function(t){t.positionInViewport.set(t.positionInViewport.x-Math.floor(t.width/2),t.positionInViewport.y+Math.floor(t.height/2))},t}();e.Context2DRenderer=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RenderManager=void 0;var r=n(32),i=function(){function t(t,e){void 0===e&&(e=!1),this.gameRenderer=null,this.debug=!1,this.renderStack=[],this.cameras=[],this.cacheRect=new r.Rectangle(0,0,0,0),this.gameRenderer=t,this.debug=e}return t.prototype.clearCanvas=function(t){void 0===t&&(t=null),this.gameRenderer.clearCanvas(t)},t.prototype.addToRenderStack=function(t){this.renderStack.push(t)},t.prototype.addCameraData=function(t){this.cameras.push(t)},t.prototype.render=function(){var t=this;this.cameras.sort((function(t,e){return t.depth-e.depth})).forEach((function(e){return t.renderByCamera(e)})),this.clear()},t.prototype.clear=function(){this.renderStack=[],this.cameras=[]},t.prototype.renderByCamera=function(t){var e=this;this.renderStack.forEach((function(n){!1!==t.layers.includes(n.layer)&&(e.setPositionInViewport(t,n),(!0===n.ui||!0===e.debug&&!0===n.debug||!1!==e.isInsideViewportRect(t,n))&&e.gameRenderer.render(t,n))}))},t.prototype.setPositionInViewport=function(t,e){!0!==e.ui?e.positionInViewport.set(Number((e.position.x-t.worldSpaceRect.x-t.worldSpaceRect.width/2).toFixed(0)),Number((e.position.y-t.worldSpaceRect.y-t.worldSpaceRect.height/2).toFixed(0))):e.positionInViewport=e.position},t.prototype.isInsideViewportRect=function(t,e){return this.cacheRect.set(e.positionInViewport.x-e.width/2,e.positionInViewport.y-e.height/2,e.width,e.height),t.viewportRect.overlappingRectangle(this.cacheRect)},t}();e.RenderManager=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ImageRenderer=void 0;var r=n(68),i=n(48),o=function(){function t(t,e,n){this.posVertices=[],this.texVertices=[],this.lastTexture=null,this.maskColor=null,this.gl=e.getContext(t),this.programManager=n,this.projectionMatrix=r.mat4.create(),this.modelMatrix=r.mat4.create(),this.textureMatrix=r.mat4.create(),this.posVertices=[-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,.5,.5],this.texVertices=[0,1,0,0,1,1,1,1,0,0,1,0]}return t.prototype.render=function(t,e,n,o){"image"!==o&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.programManager.positionBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.posVertices),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.programManager.textureBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.texVertices),this.gl.STATIC_DRAW)),this.modelMatrix=r.mat4.identity(this.modelMatrix),r.mat4.translate(this.modelMatrix,this.modelMatrix,[n.positionInViewport.x,n.positionInViewport.y,0]),r.mat4.scale(this.modelMatrix,this.modelMatrix,[n.width*(n.flipHorizontal?-1:1),n.height*(n.flipVertical?-1:1),1]),r.mat4.rotateZ(this.modelMatrix,this.modelMatrix,n.rotation*(Math.PI/180)),this.textureMatrix=r.mat4.identity(this.textureMatrix),null!==n.slice&&(r.mat4.translate(this.textureMatrix,this.textureMatrix,[n.slice.x/n.image.naturalWidth,n.slice.y/n.image.naturalHeight,0]),r.mat4.scale(this.textureMatrix,this.textureMatrix,[(n.slice.width-.5)/n.image.naturalWidth,(n.slice.height-.5)/n.image.naturalHeight,1])),this.projectionMatrix=r.mat4.identity(this.projectionMatrix),r.mat4.ortho(this.projectionMatrix,t.x,t.x1,t.y,t.y1,-1,1),this.gl.uniformMatrix4fv(this.programManager.projectionMatrixUniform,!1,this.projectionMatrix),this.gl.uniformMatrix4fv(this.programManager.modelMatrixUniform,!1,this.modelMatrix),this.gl.uniformMatrix4fv(this.programManager.textureMatrixUniform,!1,this.textureMatrix),n.alpha<1?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this.lastTexture===e&&"text"!==o||(this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(this.programManager.textureUniform,0),this.lastTexture=e),this.gl.uniform1i(this.programManager.renderTextureUniform,1),this.gl.uniform1f(this.programManager.alphaUniform,n.alpha),this.maskColor=null!==n.maskColor?i.hexToRgb(n.maskColor):{r:1,g:1,b:1},this.gl.uniform4f(this.programManager.colorUniform,this.maskColor.r,this.maskColor.g,this.maskColor.b,1),this.gl.uniform1f(this.programManager.colorMixUniform,n.maskColorMix),this.gl.drawArrays(this.gl.TRIANGLES,0,6)},t}();e.ImageRenderer=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramFactory=void 0;var r=function(){function t(t){this.shaderLoader=t}return t.prototype.create=function(t,e,n){var r=t.createProgram(),i=this.shaderLoader.load(t,t.VERTEX_SHADER,e),o=this.shaderLoader.load(t,t.FRAGMENT_SHADER,n);return this.link(t,r,i,o),r},t.prototype.link=function(t,e,n,r){t.attachShader(e,n),t.attachShader(e,r),t.linkProgram(e);var i=t.LINK_STATUS;if(!t.getProgramParameter(e,i)){var o=t.getProgramInfoLog(e);throw t.deleteProgram(e),new Error("Unable to initialize the Program: "+o)}},t}();e.ProgramFactory=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShaderLoader=void 0;var r=function(){function t(){}return t.prototype.load=function(t,e,n){var r=t.createShader(e);t.shaderSource(r,n),t.compileShader(r);var i=t.COMPILE_STATUS;if(!t.getShaderParameter(r,i)){var o=t.getShaderInfoLog(r);throw t.deleteShader(r),new Error("Unable to initialize the shader program: "+o)}return r},t}();e.ShaderLoader=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextureFactory=void 0;var r=function(){function t(t,e){this.gl=e.getContext(t)}return t.prototype.createFromImage=function(t,e,n){var r=this;return void 0===e&&(e=!0),void 0===n&&(n=null),n=null!=n?n:this.gl.createTexture(),t.naturalWidth?this.create(t,n,e):t.addEventListener("load",(function(){return r.create(t,n,e)})),n},t.prototype.createFromCanvas=function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=null),n=null!=n?n:this.gl.createTexture(),this.create(t,n,e),n},t.prototype.create=function(t,e,n){void 0===n&&(n=!0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),!1===n?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST)):(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR))},t}();e.TextureFactory=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SceneManager=void 0;var r=function(){function t(t,e){this.game=null,this.scenes=new Map,this.currentScene=null,this.openingSceneName=null,this.game=t,this.renderManager=e}return t.prototype.getCurrentScene=function(){return this.currentScene},t.prototype.addScene=function(t,e,n){if(void 0===n&&(n=!1),this.scenes.has(t))throw new Error("There is already a scene with the name '"+t+"'");this.scenes.set(t,e),!0!==n&&null!==this.openingSceneName||(this.openingSceneName=t)},t.prototype.loadOpeningScene=function(){if(null===this.openingSceneName)throw new Error("There is no opening scene");this.loadScene(this.openingSceneName)},t.prototype.loadScene=function(t){if(null===this.game)throw new Error("Game not initialized.");if(!1===this.scenes.has(t))throw new Error("Scene with name "+t+" does not exists");var e=this.game.running;e&&this.game.stopLoop(),this.unloadCurrentScene(),this.currentScene=this.scenes.get(t)(),this.currentScene.name=t,this.currentScene.game=this.game,e&&this.game.resumeLoop()},t.prototype.unloadCurrentScene=function(){null!==this.currentScene&&(this.currentScene.destroy(),this.currentScene=null,this.currentSceneName=null,this.renderManager.clear())},t}();e.SceneManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeManager=void 0;var r=function(){function t(){this.max=.1,this.then=0,this._deltaTime=0,this._timeScale=1,this._unscaledDeltaTime=0}return t.prototype.start=function(){this.then=Date.now()},t.prototype.update=function(t){var e=.001*t;this._unscaledDeltaTime=Math.min(Math.max(0,e-this.then),this.max),this._deltaTime=this._unscaledDeltaTime*this._timeScale,this.then=e},Object.defineProperty(t.prototype,"deltaTime",{get:function(){return this._deltaTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeScale",{get:function(){return this._timeScale},set:function(t){this._timeScale=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unscaledDeltaTime",{get:function(){return this._unscaledDeltaTime},enumerable:!1,configurable:!0}),t}();e.TimeManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;var r=function(){function t(t){this.textures=new Map,this.textureFactory=t}return t.prototype.getTexture=function(t){var e;return null!==(e=this.textures.get(Symbol.for(t)))&&void 0!==e?e:null},t.prototype.getOrCreateTextureFromImage=function(t,e){var n;return void 0===e&&(e=!0),null!==(n=this.textures.get(Symbol.for(t.src)))&&void 0!==n?n:this.createTextureFromImage(t,e)},t.prototype.createTextureFromImage=function(t,e){void 0===e&&(e=!0);var n=this.textureFactory.createFromImage(t,e);return this.textures.set(Symbol.for(t.src),n),n},t.prototype.getOrCreateTextureFromCanvas=function(t,e,n){var r;return void 0===n&&(n=!0),null!==(r=this.textures.get(Symbol.for(t)))&&void 0!==r?r:this.createTextureFromCanvas(t,e,n)},t.prototype.createTextureFromCanvas=function(t,e,n){void 0===n&&(n=!0);var r=this.textureFactory.createFromCanvas(e,n);return this.textures.set(Symbol.for(t),r),r},t}();e.TextureManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;var r=n(75),i=n(135),o=n(136),a=n(137),u=n(138),s=function(){function t(t,e,n){this.gl=n.getContext(e),this.programFactory=t,this.contextVersion=e}return t.prototype.loadProgram=function(){this.program=this.contextVersion===r.WebGLContextVersion.WebGL2?this.programFactory.create(this.gl,o.imageVertexShader,i.imageFragmentShader):this.programFactory.create(this.gl,u.imageVertexShader,a.imageFragmentShader),this.positionBuffer=this.gl.createBuffer(),this.textureBuffer=this.gl.createBuffer(),this.positionCoordsAttr=this.gl.getAttribLocation(this.program,"positionCoords"),this.texCoordsAttr=this.gl.getAttribLocation(this.program,"textureCoords"),this.modelMatrixUniform=this.gl.getUniformLocation(this.program,"modelMatrix"),this.projectionMatrixUniform=this.gl.getUniformLocation(this.program,"projectionMatrix"),this.textureMatrixUniform=this.gl.getUniformLocation(this.program,"textureMatrix"),this.textureUniform=this.gl.getUniformLocation(this.program,"u_texImage"),this.alphaUniform=this.gl.getUniformLocation(this.program,"u_alpha"),this.colorUniform=this.gl.getUniformLocation(this.program,"u_color"),this.colorMixUniform=this.gl.getUniformLocation(this.program,"u_colorMix"),this.renderTextureUniform=this.gl.getUniformLocation(this.program,"u_renderTexture"),this.gl.useProgram(this.program),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.enableVertexAttribArray(this.positionCoordsAttr),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionBuffer),this.gl.vertexAttribPointer(this.positionCoordsAttr,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.texCoordsAttr),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureBuffer),this.gl.vertexAttribPointer(this.texCoordsAttr,2,this.gl.FLOAT,!1,0,0)},t}();e.ProgramManager=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.imageFragmentShader=void 0,e.imageFragmentShader="#version 300 es\n#if __VERSION__ < 130\n#define TEXTURE2D texture2D\n#else\n#define TEXTURE2D texture\n#endif\n\nprecision mediump float;\n\nout vec4 fragColor;\n\nin vec2 texCoords;\n\nuniform int u_renderTexture;\nuniform sampler2D u_texImage;\nuniform float u_alpha;\nuniform vec4 u_color;\nuniform float u_colorMix;\n\nvoid main()\n{\n    if (u_renderTexture == 1) {\n        vec4 texColor = TEXTURE2D(u_texImage, texCoords);\n    \n        if(texColor.a < 0.0001)\n            discard;\n        \n        fragColor = mix(vec4(texColor.rgb, u_alpha), u_color, clamp(u_colorMix, 0.0, 1.0));\n    } else {\n        fragColor = u_color;\n    }\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.imageVertexShader=void 0,e.imageVertexShader="#version 300 es\nprecision mediump float;\n\nin vec2 positionCoords;\nin vec2 textureCoords;\n\nout vec2 texCoords;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 textureMatrix;\n\nvoid main()\n{\n    gl_Position = projectionMatrix * modelMatrix * vec4(positionCoords, 0, 1);\n    texCoords = (textureMatrix * vec4(textureCoords, 0, 1)).xy;\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.imageFragmentShader=void 0,e.imageFragmentShader="precision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D u_texImage;\nuniform float u_alpha;\nuniform vec4 u_color;\nuniform float u_colorMix;\n\nvoid main()\n{\n    vec4 texColor = texture(u_texImage, texCoords);\n\n    if(texColor.a < 0.0001)\n        discard;\n\n    gl_FragColor = mix(vec4(texColor.rgb, u_alpha), u_color, clamp(u_colorMix, 0.0, 1.0));\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.imageVertexShader=void 0,e.imageVertexShader="precision mediump float;\n\nattribute vec2 positionCoords;\nattribute vec2 textureCoords;\n\nvarying vec2 texCoords;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 textureMatrix;\n\nvoid main()\n{\n    gl_Position = projectionMatrix * modelMatrix * vec4(positionCoords, 0, 1);\n    texCoords = (textureMatrix * vec4(textureCoords, 0, 1)).xy;\n}"},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.FontAtlas=e.FontAtlasFactory=void 0;var o=function(){function t(){this.fontSize=70,this.deltaHeight=1,this.step=[this.fontSize,this.fontSize*this.deltaHeight]}return t.prototype.create=function(t,e,n){return void 0===n&&(n=null),r(this,void 0,void 0,(function(){var r,o=this;return i(this,(function(i){switch(i.label){case 0:return r=new a(e),this.chars=[],t.forEach((function(t){for(var e=t[0];e<=t[1];e++)o.chars.push(String.fromCharCode(e))})),r.canvas.width=Math.round(Math.sqrt(this.chars.length))*this.fontSize,r.canvas.height=r.canvas.width*this.deltaHeight,null===n?[3,2]:[4,this.loadFont(r,e,n)];case 1:return i.sent(),[3,3];case 2:this.renderAtlas(r,e),i.label=3;case 3:return[2,r]}}))}))},t.prototype.loadFont=function(t,e,n){return r(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return[4,(r=new FontFace(e,"url("+n+")")).load()];case 1:return o=i.sent(),document.fonts.add(r),this.renderAtlas(t,o.family),[2]}}))}))},t.prototype.renderAtlas=function(t,e){var n=t.canvas.getContext("2d");n.clearRect(0,0,t.canvas.width,t.canvas.height),n.textBaseline="top",n.fillStyle="#000",n.font=this.fontSize+"px "+e;for(var r=0,i=0,o=0;o<this.chars.length;o++)n.fillText(this.chars[o],r,i),t.glyphsData.set(this.chars[o],{x:r,y:i,width:this.fontSize,height:this.fontSize*this.deltaHeight}),(r+=this.step[0])>t.canvas.width-this.step[0]&&(r=0,i+=this.step[1])},t}();e.FontAtlasFactory=o;var a=function(t){this.canvas=document.createElement("canvas"),this.glyphsData=new Map,this.name=t};e.FontAtlas=a},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.TextRenderer=void 0;var i=n(68),o=n(1),a=n(48),u=function(){function t(t,e,n){this.posVertices=[],this.texVertices=[],this.posVerticesSize=new o.Vector2,this.lastTexture=null,this.maskColor=null,this.gl=e.getContext(t),this.programManager=n,this.projectionMatrix=i.mat4.create(),this.modelMatrix=i.mat4.create(),this.textureMatrix=i.mat4.create()}return t.prototype.render=function(t,e,n,r,o){this.generateTextVertices(n,r),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.programManager.positionBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.posVertices),this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.programManager.textureBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.texVertices),this.gl.DYNAMIC_DRAW),this.modelMatrix=i.mat4.identity(this.modelMatrix),i.mat4.translate(this.modelMatrix,this.modelMatrix,[r.positionInViewport.x+("center"===r.pivot?-this.posVerticesSize.x/2:"right"===r.pivot?-this.posVerticesSize.x:0),r.positionInViewport.y-this.posVerticesSize.y/2,0]),this.projectionMatrix=i.mat4.identity(this.projectionMatrix),i.mat4.ortho(this.projectionMatrix,t.x,t.x1,t.y,t.y1,-1,1),this.gl.uniformMatrix4fv(this.programManager.projectionMatrixUniform,!1,this.projectionMatrix),this.gl.uniformMatrix4fv(this.programManager.modelMatrixUniform,!1,this.modelMatrix),this.gl.uniformMatrix4fv(this.programManager.textureMatrixUniform,!1,this.textureMatrix),this.gl.disable(this.gl.BLEND),this.lastTexture===e&&"image"!==o||(this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(this.programManager.textureUniform,0),this.lastTexture=e),this.gl.uniform1i(this.programManager.renderTextureUniform,1),this.gl.uniform1f(this.programManager.alphaUniform,1),this.maskColor=a.hexToRgb(r.color),this.gl.uniform4f(this.programManager.colorUniform,this.maskColor.r,this.maskColor.g,this.maskColor.b,1),this.gl.uniform1f(this.programManager.colorMixUniform,1),this.gl.drawArrays(this.gl.TRIANGLES,0,this.posVertices.length/2)},t.prototype.generateTextVertices=function(t,e){this.posVertices=[],this.texVertices=[];for(var n={x1:0,y1:0,x2:0,y2:e.fontSize},i={u1:0,v1:0,u2:0,v2:0},o=0,a=0;a<e.text.length;a++){var u=e.text[a];if("\n"!==u){var s=t.glyphsData.get(u);s&&(n.x2=n.x1+e.fontSize,o=n.x2>o?n.x2:o,i.u1=s.x/t.canvas.width,i.v1=(s.y+s.height-1)/t.canvas.height,i.u2=(s.x+s.width-1)/t.canvas.width,i.v2=s.y/t.canvas.height,this.posVertices=r(this.posVertices,[n.x1,n.y1,n.x2,n.y1,n.x1,n.y2,n.x1,n.y2,n.x2,n.y1,n.x2,n.y2]),this.texVertices=r(this.texVertices,[i.u1,i.v1,i.u2,i.v1,i.u1,i.v2,i.u1,i.v2,i.u2,i.v1,i.u2,i.v2])),n.x1+=e.fontSize+e.letterSpacing}else n.y1-=e.fontSize+e.lineSeparation,n.y2=n.y1+e.fontSize,n.x1=0}this.posVerticesSize.set(o,Math.abs(n.y2))},t}();e.TextRenderer=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeometricRenderer=void 0;var r=n(68),i=n(39),o=function(){function t(t,e,n){this.vertices=new Map,this.lastVertices=null,this.lastRender=null,this.gl=e.getContext(t),this.programManager=n,this.projectionMatrix=r.mat4.create(),this.modelMatrix=r.mat4.create(),this.textureMatrix=r.mat4.create()}return t.prototype.renderCollider=function(t,e,n){this.lastRender=n,e.shape.type===i.ShapeType.Rectangle&&this.renderRectangle(t,e.positionInViewport,{width:e.shape.width,height:e.shape.height})},t.prototype.renderRectangle=function(t,e,n){var i=Symbol.for("RW"+n.width+"H"+n.height);!1===this.vertices.has(i)&&this.vertices.set(i,this.generateRectangleVertices(n.width,n.height,1));var o=this.vertices.get(i);this.lastVertices===i&&"geometric"===this.lastRender||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.programManager.positionBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(o),this.gl.DYNAMIC_DRAW)),this.lastVertices=i,"geometric"!==this.lastRender&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.programManager.textureBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0]),this.gl.DYNAMIC_DRAW)),this.modelMatrix=r.mat4.identity(this.modelMatrix),r.mat4.translate(this.modelMatrix,this.modelMatrix,[e.x-n.width/2,e.y-n.height/2,0]),this.projectionMatrix=r.mat4.identity(this.projectionMatrix),r.mat4.ortho(this.projectionMatrix,t.x,t.x1,t.y,t.y1,-1,1),this.gl.uniformMatrix4fv(this.programManager.projectionMatrixUniform,!1,this.projectionMatrix),this.gl.uniformMatrix4fv(this.programManager.modelMatrixUniform,!1,this.modelMatrix),this.gl.uniformMatrix4fv(this.programManager.textureMatrixUniform,!1,this.textureMatrix),this.gl.uniform1i(this.programManager.renderTextureUniform,0),this.gl.uniform4f(this.programManager.colorUniform,0,1,0,1),this.gl.drawArrays(this.gl.TRIANGLES,0,o.length/2)},t.prototype.generateRectangleVertices=function(t,e,n){return[0,0,t,0,0,n,0,n,t,0,t,n,t-n,0,t,0,t-n,e,t-n,e,t,0,t,e,0,e-n,t,e-n,0,e,0,e,t,e-n,t,e,0,0,n,0,0,e,0,e,n,0,n,e]},t}();e.GeometricRenderer=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var r=function(){function t(){this.instances=new Map,this.constructors=new Map}return t.prototype.add=function(t,e){if(this.constructors.has(t))throw new Error("There is already an object constructor with the name "+t);this.constructors.set(t,e)},t.prototype.getSingleton=function(t){if(!1===this.constructors.has(t))throw new Error("Invalid object constructor name: "+t);return!1===this.instances.has(t)&&this.instances.set(t,this.constructors.get(t)()),this.instances.get(t)},t.prototype.getTranscient=function(t){if(!1===this.constructors.has(t))throw new Error("Invalid object constructor name: "+t);return this.constructors.get(t)()},t}();e.Container=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Scene=e.GAME_CAMERA_ID=void 0;var r=n(82),i=n(2);e.GAME_CAMERA_ID="GameCamera";var o=function(){function t(){var t=this;this.game=null,this.name=null,this.gameObjectManager=i.container.getSingleton("GameObjectManager"),this.started=!1,this.gameLoopEventHandler=function(e){!1===t.started&&e.type===i.EVENT_START?(t.start(),t.started=!0):!0===t.started&&e.type===i.EVENT_UPDATE&&t.update()},window.addEventListener(i.EVENT_START,this.gameLoopEventHandler),window.addEventListener(i.EVENT_UPDATE,this.gameLoopEventHandler),this.addGameObject((function(){return new r.GameCamera}),e.GAME_CAMERA_ID),this.gameLoopEventHandler.bind(this)}return t.prototype.start=function(){},t.prototype.update=function(){},Object.defineProperty(t.prototype,"gameCamera",{get:function(){return this.findGameObjectByName(e.GAME_CAMERA_ID)},enumerable:!1,configurable:!0}),t.prototype.addGameObject=function(t,e){return this.gameObjectManager.addGameObject(t,e)},t.prototype.getRootGameObjects=function(){return this.gameObjectManager.getGameObjects().filter((function(t){return null===t.parent}))},t.prototype.findGameObjectByName=function(t){return this.gameObjectManager.findGameObjectByName(t)},t.prototype.findGameObjectsByTag=function(t){return this.gameObjectManager.findGameObjectsByTag(t)},t.prototype.findGameObjectByTag=function(t){return this.gameObjectManager.findGameObjectByTag(t)},t.prototype.destroyAllGameObjects=function(){this.gameObjectManager.destroyAllGameObjects()},t.prototype.destroyGameObjectByName=function(t){this.destroyGameObject(this.findGameObjectByName(t))},t.prototype.destroyGameObject=function(t){this.gameObjectManager.destroyGameObject(t)},t.prototype.destroy=function(){var t=this;window.removeEventListener(i.EVENT_START,this.gameLoopEventHandler),window.removeEventListener(i.EVENT_UPDATE,this.gameLoopEventHandler),this.gameObjectManager.destroyAllGameObjects(),Object.keys(this).forEach((function(e){return delete t[e]}))},t}();e.Scene=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CameraData=void 0;var r=function(){this.depth=0,this.layers=[],this.originalViewportRect=null,this.viewportRect=null,this.worldSpaceRect=null,this.zoom=0};e.CameraData=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;var r=n(1),i=function(){function t(t){var e,n,i,o=this;this._image=null,this._slice=null,this._scale=new r.Vector2(1,1),this._smooth=!0,this._width=null,this._height=null,this._loaded=!1,this._image=t.image,this._slice=null!==(e=t.slice)&&void 0!==e?e:this._slice,null!==this._slice&&(this._width=this._slice.width,this._height=this._slice.height),this._scale=null!==(n=t.scale)&&void 0!==n?n:this._scale,this._smooth=null!==(i=t.smooth)&&void 0!==i?i:this._smooth,this._image.naturalWidth?this.onLoad():this._image.addEventListener("load",(function(){return o.onLoad()}))}return Object.defineProperty(t.prototype,"loaded",{get:function(){return this._loaded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this._image},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slice",{get:function(){return this._slice},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"smooth",{get:function(){return this._smooth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var t,e;this._width=(null!==(t=this._width)&&void 0!==t?t:this._image.naturalWidth)*this._scale.x,this._height=(null!==(e=this._height)&&void 0!==e?e:this._image.naturalHeight)*this._scale.y,this._loaded=!0},t}();e.Sprite=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;var r=function(t){var e,n;this.sprites=[],this.speed=1,this.loop=!1,this.sprites=t.sprites,this.speed=null!==(e=t.speed)&&void 0!==e?e:this.speed,this.loop=null!==(n=t.loop)&&void 0!==n?n:this.loop};e.Animation=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tileset=void 0;var r=n(1),i=n(148),o=function(){function t(t){var e,n;this.image=null,this.offset=new r.Vector2(0,0),this.tileOffset=new r.Vector2(0,0),this._tiles=[],this.image=t.image,this.tileWidth=t.tileWidth,this.tileHeight=t.tileHeight,this.gridWidth=t.gridWidth,this.gridHeight=t.gridHeight,this.offset=null!==(e=t.offset)&&void 0!==e?e:this.offset,this.tileOffset=null!==(n=t.tileOffset)&&void 0!==n?n:this.tileOffset,this.generateTiles()}return t.prototype.generateTiles=function(){for(var t=0,e=0;e<this.gridHeight;e++)for(var n=0;n<this.gridWidth;n++)this._tiles[t]=new i.Tile(n*this.tileWidth+this.offset.x+this.tileOffset.x,e*this.tileHeight-this.offset.y-this.tileOffset.y,this.tileWidth,this.tileHeight),t++},t.prototype.getTile=function(t){return this._tiles[t]?this._tiles[t]:null},Object.defineProperty(t.prototype,"tiles",{get:function(){return this._tiles},enumerable:!1,configurable:!0}),t}();e.Tileset=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tile=void 0;var r=function(t,e,n,r){this.x=t,this.y=e,this.width=n,this.height=r};e.Tile=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.BoxCollider=e.TYPE_BOX_COLLIDER=void 0;var o=n(2),a=n(84),u=n(49),s=n(85),c=n(1),f=n(8);e.TYPE_BOX_COLLIDER="BoxCollider";var l=function(t){function n(n){var r,i,o,a,u=t.call(this)||this;return u.debug=!1,u.offsetX=0,u.offsetY=0,u.realWidth=0,u.realHeight=0,u.realOffset=new c.Vector2,u.realPosition=new c.Vector2,u.type=e.TYPE_BOX_COLLIDER,u.width=n.width,u.height=n.height,u.offsetX=null!==(r=n.offsetX)&&void 0!==r?r:u.offsetX,u.offsetY=null!==(i=n.offsetY)&&void 0!==i?i:u.offsetY,u._physics=null!==(o=n.physics)&&void 0!==o?o:u.physics,u.debug=null!==(a=n.debug)&&void 0!==a?a:u.debug,u}return i(n,t),n.prototype.start=function(){var t=this;this.updateRealSize(),this.addCollider(new a.RectangleCollider(this.gameObject.transform.position,this.realWidth,this.realHeight,this._physics,this.gameObject)),this.debug&&this.gameObject.addComponent((function(){return new h(t.colliders[0])}))},n.prototype.update=function(){this.updatePosition()},n.prototype.updatePosition=function(){this.updateRealSize(),this.colliders[0].width=this.realWidth,this.colliders[0].height=this.realHeight,this.colliders[0].position=c.Vector2.add(this.realPosition,this.gameObject.transform.position,this.realOffset)},n.prototype.updateRealSize=function(){this.realWidth=this.width*Math.abs(this.gameObject.transform.scale.x),this.realHeight=this.height*Math.abs(this.gameObject.transform.scale.y),this.realOffset.x=this.offsetX*this.gameObject.transform.scale.x,this.realOffset.y=this.offsetY*this.gameObject.transform.scale.y},n}(u.ColliderComponent);e.BoxCollider=l;var h=function(t){function e(e){var n=t.call(this)||this;return n.renderManager=o.container.getSingleton("RenderManager"),n.type="BoxColliderRenderer",n.renderData=new s.ColliderRenderData,n.renderData.debug=!0,n.renderData.color="#00FF00",n.collider=e,n}return i(e,t),e.prototype.update=function(){this.renderData.layer=this.gameObject.layer,this.renderData.position=this.collider.position,this.renderData.shape=this.collider.shape,this.renderManager.addToRenderStack(this.renderData)},e}(f.RenderComponent)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var o=n(69),a=n(1),u=n(39),s=function(t){function e(e,n,r,i){var s=t.call(this)||this;return s._rotationMatrix=new o.Matrix2,s.vertexHelper=[new a.Vector2(-1,-1),new a.Vector2(-1,1),new a.Vector2(1,1),new a.Vector2(1,-1)],s.cacheVector=new a.Vector2,s._type=u.ShapeType.Rectangle,s._vertex[0]=new a.Vector2(e,n),s._vertex[1]=new a.Vector2(e,i),s._vertex[2]=new a.Vector2(r,i),s._vertex[3]=new a.Vector2(r,n),a.Vector2.unit(s._direction,a.Vector2.subtract(new a.Vector2,s._vertex[1],s._vertex[0])),s._refDirection=s._direction.clone(),s._height=a.Vector2.subtract(new a.Vector2,s._vertex[1],s._vertex[0]).magnitude,s._width=a.Vector2.subtract(new a.Vector2,s._vertex[2],s._vertex[1]).magnitude,a.Vector2.add(s._position,s._vertex[0],a.Vector2.scale(new a.Vector2,s._direction,s._height/2)),a.Vector2.add(s._position,s._position,a.Vector2.scale(new a.Vector2,a.Vector2.normal(new a.Vector2,s._direction),s._width/2)),s._angle=0,s}return i(e,t),e.prototype.update=function(){var t=this;this._rotationMatrix.rotate(this.angle),this._direction=this._rotationMatrix.multiplyVector2(this._refDirection),this.vertexHelper.forEach((function(e,n){a.Vector2.add(t._vertex[n],t._position,a.Vector2.scale(t.cacheVector,a.Vector2.normal(t.cacheVector,t._direction),e.x*t._width/2)),a.Vector2.add(t._vertex[n],t._vertex[n],a.Vector2.scale(t.cacheVector,t._direction,e.y*t._height/2))}))},e.prototype.clone=function(){return new e(this._vertex[0].x,this._vertex[0].y,this._vertex[2].x,this._vertex[2].y)},e}(u.Shape);e.Rectangle=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TilemapCollider=e.TYPE_TILEMAP_COLLIDER=void 0;var o=n(84),a=n(2),u=n(49),s=n(85),c=n(8),f=n(1);e.TYPE_TILEMAP_COLLIDER="TilemapCollider";var l=function(t){function n(n){var r,i=t.call(this)||this;return i.tilemapRenderer=null,i.debug=!1,i.needsCollider=function(t){i.cacheVertex[0].set(t.position.x,t.position.y+t.height),i.cacheVertex[1].set(t.position.x+t.width,t.position.y),i.cacheVertex[2].set(t.position.x,t.position.y-t.height),i.cacheVertex[3].set(t.position.x-t.width,t.position.y);for(var e=function(t){if(void 0===i.tilemapRenderer.tilesData.find((function(e){return e.position.equals(i.cacheVertex[t])})))return{value:!0}},n=0;n<i.cacheVertex.length;n++){var r=e(n);if("object"==typeof r)return r.value}return!1},i.type=e.TYPE_TILEMAP_COLLIDER,i.tilemapRenderer=n.tilemapRenderer,i.debug=null!==(r=n.debug)&&void 0!==r?r:i.debug,i._physics=!0,i.cacheVertex=[new f.Vector2,new f.Vector2,new f.Vector2,new f.Vector2],i}return i(n,t),n.prototype.start=function(){var t=this;this.tilemapRenderer.tilesData.filter(this.needsCollider).forEach((function(e){t.addCollider(new o.RectangleCollider(e.position,e.width,e.height,t._physics,t.gameObject))})),this.debug&&this.gameObject.addComponent((function(){return new h(t.colliders)}))},n.prototype.updatePosition=function(){},n}(u.ColliderComponent);e.TilemapCollider=l;var h=function(t){function e(e){var n=t.call(this)||this;return n.renderManager=a.container.getSingleton("RenderManager"),n.renderData=[],n.colliders=[],n.type="TilemapColliderRenderer",n.colliders=e,n.colliders.forEach((function(t,e){n.renderData[e]=new s.ColliderRenderData,n.renderData[e].debug=!0,n.renderData[e].color="#00FF00"})),n}return i(e,t),e.prototype.update=function(){var t=this;this.colliders.forEach((function(e,n){t.renderData[n].layer=t.gameObject.layer,t.renderData[n].position=e.position,t.renderData[n].shape=e.shape,t.renderManager.addToRenderStack(t.renderData[n])}))},e}(c.RenderComponent)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteRenderer=e.TYPE_SPRITE_RENDERER=void 0;var o=n(8),a=n(86),u=n(2),s=n(1);e.TYPE_SPRITE_RENDERER="SpriteRenderer";var c=function(t){function n(n){var r,i,o,a,c,f,l,h,p,d=t.call(this)||this;return d.renderManager=u.container.getSingleton("RenderManager"),d.sprite=null,d.offset=new s.Vector2,d.flipHorizontal=!1,d.flipVertical=!1,d.rotation=0,d.smooth=!0,d.opacity=1,d._tiled=new s.Vector2(1,1),d.maskColor="#ffffff",d.maskColorMix=0,d.renderData=[],d.goPosition=null,d.cachePosition=new s.Vector2,d.cacheRenderPosition=new s.Vector2,d.type=e.TYPE_SPRITE_RENDERER,d.sprite=n.sprite,d.offset=null!==(r=n.offset)&&void 0!==r?r:d.offset,d.smooth=null!==(i=n.smooth)&&void 0!==i?i:d.smooth,d.rotation=null!==(o=n.rotation)&&void 0!==o?o:d.rotation,d.flipHorizontal=null!==(a=n.flipHorizontal)&&void 0!==a?a:d.flipHorizontal,d.flipVertical=null!==(c=n.flipVertical)&&void 0!==c?c:d.flipVertical,d.opacity=null!==(f=n.opacity)&&void 0!==f?f:d.opacity,d.tiled=null!==(l=n.tiled)&&void 0!==l?l:d._tiled,d.maskColor=null!==(h=n.maskColor)&&void 0!==h?h:d.maskColor,d.maskColorMix=null!==(p=n.maskColorMix)&&void 0!==p?p:d.maskColorMix,d}return i(n,t),Object.defineProperty(n.prototype,"tiled",{get:function(){return this._tiled},set:function(t){if(t.x%1!=0||t.y%1!=0)throw new Error("SpriteRenderer.tiled: Vector2 components must be integer");this._tiled.set(t.x,t.y)},enumerable:!1,configurable:!0}),n.prototype.start=function(){this.goPosition=this.gameObject.transform.position},n.prototype.update=function(){if(!0===this.sprite.loaded){this.updateRenderDataArray();for(var t=0,e=0;e<this._tiled.x;e++)for(var n=0;n<this._tiled.y;n++)this.updateRenderData(t,e,n),t++}},n.prototype.updateRenderDataArray=function(){if(this.renderData.length!==this._tiled.x*this._tiled.y){this.renderData=[];for(var t=0;t<=this._tiled.x*this._tiled.y;t++)this.renderData[t]=new a.ImageRenderData}},n.prototype.updateRenderData=function(t,e,n){this.renderData[t].ui=this.gameObject.ui,this.renderData[t].layer=this.gameObject.layer,this.renderData[t].image=this.sprite.image,this.renderData[t].width=this.sprite.width*Math.abs(this.gameObject.transform.scale.x),this.renderData[t].height=this.sprite.height*Math.abs(this.gameObject.transform.scale.y),this.renderData[t].slice=this.sprite.slice,this.renderData[t].flipHorizontal=this.flipHorizontal!==this.gameObject.transform.scale.x<0,this.renderData[t].flipVertical=this.flipVertical!==this.gameObject.transform.scale.y<0,this.renderData[t].rotation=this.gameObject.transform.rotation+this.rotation,this.renderData[t].smooth=this.sprite.smooth,this.renderData[t].alpha=this.opacity,this.renderData[t].maskColor=this.maskColor,this.renderData[t].maskColorMix=this.maskColorMix,this.calculateRenderPosition(t,e,n),this.renderManager.addToRenderStack(this.renderData[t])},n.prototype.calculateRenderPosition=function(t,e,n){s.Vector2.add(this.cachePosition,this.gameObject.transform.position,this.offset),this.cacheRenderPosition.set(this.renderData[t].width/2*(this.tiled.x-1),this.renderData[t].height/2*(this.tiled.y-1)),s.Vector2.subtract(this.cachePosition,this.cachePosition,this.cacheRenderPosition),this.cacheRenderPosition.set(e*this.renderData[t].width,n*this.renderData[t].height),s.Vector2.add(this.cachePosition,this.cachePosition,this.cacheRenderPosition),this.renderData[t].position=this.cachePosition,0!==this.gameObject.transform.rotation&&this.translateRenderPosition(t)},n.prototype.translateRenderPosition=function(t){var e=this.gameObject.transform.rotation*Math.PI/180,n=Math.atan2(this.renderData[t].position.x-this.goPosition.x,this.renderData[t].position.y-this.goPosition.y),r=Math.hypot(this.renderData[t].position.x-this.goPosition.x,this.renderData[t].position.y-this.goPosition.y);this.renderData[t].position.set(this.goPosition.x+r*Math.sin(n-e),this.goPosition.y+r*Math.cos(n-e))},n}(o.RenderComponent);e.SpriteRenderer=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TextRenderer=e.TYPE_TEXT_RENDERER=void 0;var o=n(8),a=n(154),u=n(2);e.TYPE_TEXT_RENDERER="TextRenderer";var s=function(t){function n(n){var r,i,o,s,c,f,l,h=t.call(this)||this;if(h.text=null,h.fontFamily="Sans",h.fontUrl=null,h.size=12,h.color="#000000",h.lineSeparation=0,h.letterSpacing=0,h.pivot="left",h.renderManager=u.container.getSingleton("RenderManager"),h.renderData=new a.TextRenderData,h.type=e.TYPE_TEXT_RENDERER,h.text=n.text,h.fontFamily=null!==(r=n.fontFamily)&&void 0!==r?r:h.fontFamily,h.fontUrl=null!==(i=n.fontUrl)&&void 0!==i?i:h.fontUrl,h.size=null!==(o=n.size)&&void 0!==o?o:h.size,h.color=null!==(s=n.color)&&void 0!==s?s:h.color,h.lineSeparation=null!==(c=n.lineSeparation)&&void 0!==c?c:h.lineSeparation,h.letterSpacing=null!==(f=n.letterSpacing)&&void 0!==f?f:h.letterSpacing,h.pivot=null!==(l=n.pivot)&&void 0!==l?l:h.pivot,h.lineSeparation%2!=0)throw new Error("TextRenderer.lineSeparation must be multiple of 2");return h}return i(n,t),n.prototype.start=function(){if(!1===this.gameObject.ui)throw new Error("TextRenderer only can be used on UI GameObjects");this.renderData.layer=this.gameObject.layer,this.renderData.ui=this.gameObject.ui,this.renderData.fontFamily=this.fontFamily,this.renderData.fontUrl=this.fontUrl,this.renderData.lineSeparation=this.lineSeparation,this.renderData.letterSpacing=this.letterSpacing,this.renderData.pivot=this.pivot},n.prototype.update=function(){if(!1===this.gameObject.ui)throw new Error("TextRenderer only can be used on UI GameObjects");this.renderData.text=this.text,this.renderData.fontSize=this.size,this.renderData.color=this.color,this.renderData.position.set(this.gameObject.transform.position.x,this.gameObject.transform.position.y),this.renderManager.addToRenderStack(this.renderData)},n}(o.RenderComponent);e.TextRenderer=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TextRenderData=void 0;var o=n(29),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=o.RenderDataType.Text,e.color=null,e.text=null,e.fontFamily=null,e.fontUrl=null,e.fontSize=null,e.lineSeparation=null,e.letterSpacing=null,e.bold=!1,e.italic=!1,e.pivot=null,e}return i(e,t),e}(o.RenderData);e.TextRenderData=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TiledTilemapRenderer=e.TYPE_TILED_RENDERER=void 0;var o=n(87);e.TYPE_TILED_RENDERER="TiledRenderer";var a=function(t){function n(n){var r,i,o=t.call(this)||this;return o.type=e.TYPE_TILED_RENDERER,o.tileset=n.tileset,o.tiledTilemap=n.tilemapData,o.tileScale=null!==(r=n.tileScale)&&void 0!==r?r:1,o.smooth=null!==(i=n.smooth)&&void 0!==i&&i,o}return i(n,t),n.prototype.processTilemap=function(){var t=this;this.tiledTilemap.layers.forEach((function(e){return!0===t.tiledTilemap.infinite?e.chunks.forEach((function(n){return t.processChunk(n,e.opacity)})):t.processChunk(e,e.opacity)})),this.tilemapProcessed=!0},n.prototype.processChunk=function(t,e){void 0===e&&(e=1);for(var n=0,r=0;r<t.height;r++)for(var i=0;i<t.width;i++){var o=this.tileset.getTile(t.data[n]-1);null!==o&&this.processTile(o,i+t.x,r+t.y,e),n++}},n}(o.TilemapRenderer);e.TiledTilemapRenderer=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TileData=void 0;var r=n(1),i=function(){function t(t,e,n){this._position=new r.Vector2,this._position.set(t.x,t.y),this._width=e,this._height=n}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t}();e.TileData=i},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CsvTilemapRenderer=e.TYPE_TILEMAP_RENDERER=void 0;var o=n(87),a=1,u=2,s=3;e.TYPE_TILEMAP_RENDERER="TilemapRenderer";var c=function(t){function n(n){var r,i,o,a=t.call(this)||this;return a.alpha=1,a.type=e.TYPE_TILEMAP_RENDERER,a.tileset=n.tileset,a.tilemapData=n.tilemapData,a.tileScale=null!==(r=n.tileScale)&&void 0!==r?r:1,a.smooth=null!==(i=n.smooth)&&void 0!==i&&i,a.alpha=null!==(o=n.alpha)&&void 0!==o?o:1,a}return i(n,t),n.prototype.processTilemap=function(){var t=this;this.tilemapData.trim().split("\n").forEach((function(e,n){e.split(",").forEach((function(e,r){var i=parseInt(e.trim());if(!1===isNaN(i)){var o=i>999?i%1e3:i,c=Math.round(i/1e3),f=t.tileset.getTile(o),l={h:[a,s].includes(c),v:[u,s].includes(c)};null!==f&&t.processTile(f,r,n,t.alpha,l)}}))})),this.tilemapProcessed=!0},n}(o.TilemapRenderer);e.CsvTilemapRenderer=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Animator=e.TYPE_ANIMATOR=void 0;var o=n(8),a=n(2);e.TYPE_ANIMATOR="Animator";var u=function(t){function n(n){var r=t.call(this)||this;return r.timeManager=a.container.getSingleton("TimeManager"),r.spriteRenderer=null,r.animations=new Map,r.currentAnimation=null,r.defaultSprite=null,r.type=e.TYPE_ANIMATOR,r.spriteRenderer=n.spriteRenderer,r}return i(n,t),n.prototype.start=function(){this.defaultSprite=this.spriteRenderer.sprite},n.prototype.update=function(){null!==this.currentAnimation?(this.currentAnimation.playFrame(this.timeManager.deltaTime),!0===this.currentAnimation.restarted&&!1===this.currentAnimation.loop?this.stopAnimation():this.spriteRenderer.sprite=this.currentAnimation.sprite):this.spriteRenderer.sprite=this.defaultSprite},n.prototype.addAnimation=function(t,e){return this.animations.set(t,new s(e)),this},n.prototype.playAnimation=function(t){if(!1!==this.active){if(!1===this.animations.has(t))throw new Error("Animation with name "+t+" does not exist.");this.currentAnimation=this.animations.get(t)}},n.prototype.stopAnimation=function(){!1!==this.active&&null!==this.currentAnimation&&(this.currentAnimation=null)},n}(o.Component);e.Animator=u;var s=function(){function t(t){this.currentFrame=0,this.frameTime=0,this._sprite=null,this._restarted=!1,this.animation=t}return Object.defineProperty(t.prototype,"sprite",{get:function(){return this._sprite},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"restarted",{get:function(){return this._restarted},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this.animation.loop},enumerable:!1,configurable:!0}),t.prototype.playFrame=function(t){this._restarted=!1,this.frameTime>=1/(24*this.animation.speed)&&(this.frameTime=0,this.currentFrame=this.currentFrame+1===this.animation.sprites.length?0:this.currentFrame+1,this._restarted=0===this.currentFrame),this._sprite=this.animation.sprites[this.currentFrame],this.frameTime+=t},t}()},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.AudioPlayer=e.TYPE_AUDIO_PLAYER=void 0;var o=n(8),a=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","pointerup","touchend","keydown","keyup"];e.TYPE_AUDIO_PLAYER="AudioPlayer";var u=function(t){function n(n){var r,i,o;void 0===n&&(n={audio:null,volume:1,loop:!1});var u=t.call(this)||this;return u.volume=1,u.loop=!1,u.audio=null,u.audioClone=null,u._playing=!1,u._paused=!1,u.audioEventHandler=function(t){"ended"===t.type&&(u._playing=!1,u.audio.removeEventListener("ended",u.audioEventHandler))},u.userinputEventHandler=function(){a.forEach((function(t){window.removeEventListener(t,u.userinputEventHandler)})),u.audio.play()},u.allowMultiple=!1,u.type=e.TYPE_AUDIO_PLAYER,u.audio=null!==(r=n.audio)&&void 0!==r?r:u.audio,u.volume=null!==(i=n.volume)&&void 0!==i?i:u.volume,u.loop=null!==(o=n.loop)&&void 0!==o?o:u.loop,u}return i(n,t),n.prototype.playAudio=function(t,e){void 0===e&&(e=null),this.audioClone=t.cloneNode(),this.audioClone.volume=null!=e?e:this.volume,this.audioClone.play()},n.prototype.play=function(){var t=this;null!==this.audio&&(this._playing&&!1===this._paused||(this._paused?this.audio.play():(this.audio.volume=this.volume,this.audio.loop=this.loop,this.audio.addEventListener("ended",this.audioEventHandler),this._playing=!0,this.audio.play().then((function(){})).catch((function(){return a.forEach((function(e){return window.addEventListener(e,t.userinputEventHandler)}))})))))},n.prototype.stop=function(){this._playing&&(this.audio.pause(),this.audio.currentTime=0,this.audio.removeEventListener("ended",this.audioEventHandler),this._playing=!1,this._paused=!1)},n.prototype.pause=function(){this._playing&&!1===this._paused&&(this.audio.pause(),this._paused)},n}(o.Component);e.AudioPlayer=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RigidBody=e.TYPE_RIGIDBODY=e.RigidBodyType=void 0;var o,a=n(8),u=n(2),s=n(1),c=n(49);!function(t){t[t.Static=0]="Static",t[t.Dynamic=1]="Dynamic"}(o=e.RigidBodyType||(e.RigidBodyType={})),e.TYPE_RIGIDBODY="RigidBody";var f=function(t){function n(n){var r,i=t.call(this)||this;return i.iterationManager=u.container.getSingleton("PhysicsIterationManager"),i.gravityScale=9.8,i._colliderComponents=[],i._layersToCollide=[],i._velocity=new s.Vector2,i._gravity=new s.Vector2,i.deltaGravity=new s.Vector2,i.deltaVelocity=new s.Vector2,i.collisions=[],i.penetrationPerDirection={x:new Map,y:new Map},i.nextObjectPosition=new s.Vector2,i.type=e.TYPE_RIGIDBODY,i.allowMultiple=!1,i._rigidBodyType=n.rigidBodyType,i._layersToCollide=n.layersToCollide,i._gravity.set(0,null!==(r=n.gravity)&&void 0!==r?r:i._gravity.y),i}return i(n,t),Object.defineProperty(n.prototype,"rigidBodyType",{get:function(){return this._rigidBodyType},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"velocity",{get:function(){return this._velocity},set:function(t){this._velocity.set(t.x,t.y)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"gravity",{get:function(){return this._gravity.y},set:function(t){this._gravity.set(this._gravity.x,t)},enumerable:!1,configurable:!0}),n.prototype.start=function(){var t=this;if(this.gameObject.getComponents().forEach((function(e){return e instanceof c.ColliderComponent&&e.physics?t._colliderComponents.push(e):null})),0===this._colliderComponents.length)throw new Error("RigidBody needs at least one Collider")},n.prototype.update=function(){this._rigidBodyType!==o.Static&&(this.applyGravity(),this.applyVelocity())},n.prototype.applyGravity=function(){this._gravity.y>0&&(this._velocity=s.Vector2.add(this._velocity,this._velocity,s.Vector2.scale(this.deltaGravity,this._gravity,-this.gravityScale*this.iterationManager.physicsDeltaTime)))},n.prototype.applyVelocity=function(){s.Vector2.scale(this.deltaVelocity,this._velocity,this.iterationManager.physicsFramerate*this.iterationManager.physicsDeltaTime),0===this.deltaVelocity.x&&0===this.deltaVelocity.y||this.move()},n.prototype.move=function(){var t=this;this.penetrationPerDirection.x.clear(),this.penetrationPerDirection.y.clear(),this.gameObject.transform.position=s.Vector2.add(this.nextObjectPosition,this.gameObject.transform.position,this.deltaVelocity),this.updateCollisions(),this.collisions.forEach((function(n){!0===n.remoteCollider.physics&&null!==n.remoteCollider.gameObject.getComponentByType(e.TYPE_RIGIDBODY)&&(0!==n.collisionData.direction.x&&t.setPenetrationPerDirectionPerAxis("x",n),0!==n.collisionData.direction.y&&t.setPenetrationPerDirectionPerAxis("y",n))})),this.penetrationResolution("x"),this.penetrationResolution("y")},n.prototype.setPenetrationPerDirectionPerAxis=function(t,e){var n;this.penetrationPerDirection[t].set(e.collisionData.direction[t],Math.max(null!==(n=this.penetrationPerDirection[t].get(e.collisionData.direction[t]))&&void 0!==n?n:0,e.collisionData.penetration))},n.prototype.penetrationResolution=function(t){var e=this;this.penetrationPerDirection[t].forEach((function(n,r){e.gameObject.transform.position[t]+=r*n,0!==e._velocity[t]&&Math.sign(e._velocity[t])!==Math.sign(r)&&(e._velocity[t]=0)}))},n.prototype.updateCollisions=function(){var t=this;this.collisions=[],this._colliderComponents.forEach((function(e){return t._layersToCollide.forEach((function(n){return e.getCollisionsWithLayer(n).forEach((function(e){t.collisions.push(e)}))}))}))},n}(a.PhysicsComponent);e.RigidBody=f},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(5),i=n(92),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},function(t,e,n){var r=n(28),i=n(55),o=n(164),a=function(t){return function(e,n,a){var u,s=r(e),c=i(s.length),f=o(a,c);if(t&&n!=n){for(;c>f;)if((u=s[f++])!=u)return!0}else for(;c>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var r=n(36),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e,n){var r=n(4),i=/#|\.prototype\./,o=function(t,e){var n=u[a(t)];return n==c||n!=s&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},u=o.data={},s=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},function(t,e,n){var r=n(35);t.exports=r("document","documentElement")},function(t,e,n){var r=n(28),i=n(54).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){var r=n(61);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(10),i=n(37),o=n(24),a=r("unscopables"),u=Array.prototype;null==u[a]&&o.f(u,a,{configurable:!0,value:i(null)}),t.exports=function(t){u[a][t]=!0}},function(t,e,n){"use strict";var r=n(104).IteratorPrototype,i=n(37),o=n(34),a=n(60),u=n(62),s=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),u[c]=s,t}},function(t,e,n){var r=n(12);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){"use strict";var r=n(64),i=n(173);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(t,e,n){var r=n(64),i=n(40),o=n(10)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){"use strict";var r=n(61),i=n(12),o=[].slice,a={},u=function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("C,a","return new C("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=o.call(arguments,1),a=function(){var r=n.concat(o.call(arguments));return this instanceof a?u(e,r.length,r):e.apply(t,r)};return i(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e,n){"use strict";var r=n(26);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(36),i=n(41),o=function(t){return function(e,n){var o,a,u=String(i(e)),s=r(n),c=u.length;return s<0||s>=c?t?"":void 0:(o=u.charCodeAt(s))<55296||o>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?t?u.charAt(s):o:t?u.slice(s,s+2):a-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){var r=n(35);t.exports=r("navigator","userAgent")||""},function(t,e,n){"use strict";var r=n(3),i=n(47).filter,o=n(66),a=n(67),u=o("filter"),s=a("filter");r({target:"Array",proto:!0,forced:!u||!s},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(3),i=n(112);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(t,e,n){"use strict";var r=n(4);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){var r=n(3),i=n(6);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:n(99)})},function(t,e,n){var r=n(3),i=n(4),o=n(28),a=n(33).f,u=n(6),s=i((function(){a(1)}));r({target:"Object",stat:!0,forced:!u||s,sham:!u},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},function(t,e,n){var r=n(3),i=n(6),o=n(94),a=n(28),u=n(33),s=n(111);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){for(var e,n,r=a(t),i=u.f,c=o(r),f={},l=0;c.length>l;)void 0!==(n=i(r,e=c[l++]))&&s(f,e,n);return f}})},function(t,e,n){var r=n(3),i=n(31),o=n(59);r({target:"Object",stat:!0,forced:n(4)((function(){o(1)}))},{keys:function(t){return o(i(t))}})},function(t,e,n){var r=n(5),i=n(107),o=n(112),a=n(25);for(var u in i){var s=r[u],c=s&&s.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(t){c.forEach=o}}},function(t,e,n){"use strict";var r=n(3),i=n(36),o=n(188),a=n(189),u=n(4),s=1..toFixed,c=Math.floor,f=function(t,e,n){return 0===e?n:e%2==1?f(t,e-1,n*t):f(t*t,e/2,n)};r({target:"Number",proto:!0,forced:s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!u((function(){s.call({})}))},{toFixed:function(t){var e,n,r,u,s=o(this),l=i(t),h=[0,0,0,0,0,0],p="",d="0",y=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*h[n],h[n]=r%1e7,r=c(r/1e7)},g=function(t){for(var e=6,n=0;--e>=0;)n+=h[e],h[e]=c(n/t),n=n%t*1e7},m=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==h[t]){var n=String(h[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e};if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(p="-",s=-s),s>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(s*f(2,69,1))-69)<0?s*f(2,-e,1):s/f(2,e,1),n*=4503599627370496,(e=52-e)>0){for(y(0,n),r=l;r>=7;)y(1e7,0),r-=7;for(y(f(10,r,1),0),r=e-1;r>=23;)g(1<<23),r-=23;g(1<<r),y(1,1),g(2),d=m()}else y(0,n),y(1<<-e,0),d=m()+a.call("0",l);return d=l>0?p+((u=d.length)<=l?"0."+a.call("0",l-u)+d:d.slice(0,u-l)+"."+d.slice(u-l)):p+d}})},function(t,e,n){var r=n(40);t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},function(t,e,n){"use strict";var r=n(36),i=n(41);t.exports="".repeat||function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){"use strict";n.r(e);var r=n(0),i=(n(9),n(13),n(14),n(11),n(15),n(16),n(27),n(17),n(18),n(19),n(20),n(21),n(22),n(23),n(114));function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=u(n);function n(t){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(o=e.call(this)).tilemapRenderer=void 0,o.collider=void 0,o.layer="Foreground",o.tilemapRenderer=o.addComponent((function(){return new r.TiledTilemapRenderer({tileset:new r.Tileset({image:t,tileWidth:16,tileHeight:16,gridWidth:12,gridHeight:16}),tilemapData:i})})),o.collider=o.addComponent((function(){return new r.TilemapCollider({tilemapRenderer:o.tilemapRenderer,debug:!0})})),o.addComponent((function(){return new r.RigidBody({rigidBodyType:r.RigidBodyType.Static,layersToCollide:["Foreground","Bot"],gravity:0})})),o.transform.scale.set(3,3),o}return n}(r.GameObject);n(65),n(108),n(110);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m(t);if(e){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function g(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(a,t);var e,n,i,o=y(a);function a(){var t;h(this,a);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(t=o.call.apply(o,[this].concat(n))).feetCollider=void 0,t.rigidBody=void 0,t.inputController=void 0,t.gravity=5,t.walkSpeed=5,t.jumpSpeed=14,t.grounded=!1,t.velocity=new r.Vector2(0,0),t.jumping=!1,t}return e=a,(n=[{key:"start",value:function(){this.feetCollider=this.getComponentByName("FeetCollider"),this.rigidBody=this.getComponentByType(r.TYPE_RIGIDBODY),this.inputController=this.findGameObjectByName("InputController"),this.rigidBody.gravity=this.gravity}},{key:"update",value:function(){this.grounded=this.feetCollider.collidesWithLayer("Foreground"),this.walk(),this.jump()}},{key:"walk",value:function(){this.velocity.set(this.inputController.axis.x*this.walkSpeed,this.rigidBody.velocity.y),this.rigidBody.velocity=this.velocity}},{key:"jump",value:function(){!0===this.grounded&&!0===this.inputController.jump&&!1===this.jumping&&(this.jumping=!0,this.velocity.set(this.rigidBody.velocity.x,this.jumpSpeed),this.rigidBody.velocity=this.velocity),this.jumping&&(this.jumping=this.inputController.jump)}}])&&p(e.prototype,n),i&&p(e,i),a}(r.Component);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O(t);if(e){var i=O(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function w(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(a,t);var e,n,i,o=x(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this)).spriteRenderer=void 0,t.animator=void 0,t.bodyCollider=void 0,t.feetCollider=void 0,t.rigidBody=void 0,t.grounded=!1,t.layer="Player",t.spriteRenderer=t.addComponent((function(){return new r.SpriteRenderer({sprite:new r.Sprite({image:r.AssetManager.getImage("image/player/player-spritesheet.png"),slice:new r.Rectangle(0,64,16,16),smooth:!1})})})),t.animator=t.addComponent((function(){return new r.Animator({spriteRenderer:t.spriteRenderer})})).addAnimation("PlayerIdle",new r.Animation({sprites:[0,16,32,48].map((function(t){return new r.Sprite({image:r.AssetManager.getImage("image/player/player-spritesheet.png"),smooth:!1,slice:new r.Rectangle(t,64,16,16)})})),speed:.4,loop:!0})).addAnimation("PlayerRun",new r.Animation({sprites:[0,16,32,48,64,80].map((function(t){return new r.Sprite({image:r.AssetManager.getImage("image/player/player-spritesheet.png"),smooth:!1,slice:new r.Rectangle(t,16,16,16)})})),speed:.4,loop:!0})),t.bodyCollider=t.addComponent((function(){return new r.BoxCollider({width:8,height:16,debug:!0})}),"BodyCollider"),t.feetCollider=t.addComponent((function(){return new r.BoxCollider({width:6,height:6,offsetY:-5,physics:!0,debug:!0})}),"FeetCollider"),t.rigidBody=t.addComponent((function(){return new r.RigidBody({rigidBodyType:r.RigidBodyType.Dynamic,layersToCollide:["Foreground","Enemy"]})})),t.addComponent((function(){return new v}),"Movements"),t}return e=a,(n=[{key:"start",value:function(){this.transform.scale.set(3,3),this.transform.position.set(0,-48),this.animator.playAnimation("PlayerIdle")}},{key:"update",value:function(){this.spriteRenderer.setActive(!1===this.getCurrentScene().paused),this.grounded=this.feetCollider.collidesWithLayer("Foreground"),this.transform.scale.x=0!==this.rigidBody.velocity.x?Math.sign(this.rigidBody.velocity.x)*Math.abs(this.transform.scale.x):this.transform.scale.x,this.updateAnimations()}},{key:"updateAnimations",value:function(){0!==this.rigidBody.velocity.x&&this.grounded?this.animator.playAnimation("PlayerRun"):this.animator.playAnimation("PlayerIdle")}}])&&_(e.prototype,n),i&&_(e,i),a}(r.GameObject);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var i=C(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}function E(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(a,t);var e,n,i,o=S(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this)).keyboard=void 0,t.gamepad=null,t._axis=new r.Vector2(0,0),t._jump=!1,t.keyboard=r.InputManager.keyboard,t.gamepad=r.InputManager.gamepad.getGamepad(0),t}return e=a,(n=[{key:"update",value:function(){this.getCurrentScene().paused||(this.updateKeyboard(),this.gamepad&&this.updateGamepad())}},{key:"updateKeyboard",value:function(){this._axis.x=this.keyboard.isPressed("ArrowRight")?1:this.keyboard.isPressed("ArrowLeft")?-1:0,this._axis.y=this.keyboard.isPressed("ArrowUp")?1:this.keyboard.isPressed("ArrowDown")?-1:0,this._jump=this.keyboard.isPressed("Space")}},{key:"updateGamepad",value:function(){this.axis.set(this.gamepad.dpadRight?1:this.gamepad.dpadLeft?-1:this.axis.x,this.gamepad.dpadUp?1:this.gamepad.dpadDown?-1:this.axis.y),this.axis.set(this.gamepad.leftStickHorizontal>.1||this.gamepad.leftStickHorizontal<-.1?Math.sign(this.gamepad.leftStickHorizontal):this.axis.x,this.gamepad.leftStickVertical>.1||this.gamepad.leftStickVertical<-.1?Math.sign(this.gamepad.leftStickVertical):this.axis.x),this._jump=this.gamepad.bottomFace||this._jump}},{key:"axis",get:function(){return this._axis}},{key:"jump",get:function(){return this._jump}}])&&R(e.prototype,n),i&&R(e,i),a}(r.GameObject);function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=B(t);if(e){var i=B(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return G(this,n)}}function G(t,e){return!e||"object"!==D(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(a,t);var e,n,i,o=L(a);function a(){var t;V(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n))).player=void 0,t.camera=void 0,t.minX=void 0,t.maxX=void 0,t.minY=void 0,t.maxY=void 0,t}return e=a,(n=[{key:"start",value:function(){this.player=this.findGameObjectByName("Player"),this.camera=this.gameObject;var t=this.findGameObjectByName("Foreground"),e=t.getComponentByType(r.TYPE_TILED_RENDERER);this.minX=t.transform.position.x-e.realWidth/2,this.maxX=t.transform.position.x+e.realWidth/2,this.minY=t.transform.position.y-e.realHeight/2,this.maxY=t.transform.position.y+e.realHeight/2}},{key:"update",value:function(){this.gameObject.transform.position.x=Math.min(Math.max(this.player.transform.position.x,this.minX+this.camera.viewportRect.width/2),this.maxX-this.camera.viewportRect.width/2)}}])&&I(e.prototype,n),i&&I(e,i),a}(r.PhysicsComponent);n(179),n(180),n(182),n(183),n(184),n(185),n(186);function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){q(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var H=function(){var t={image:r.AssetManager.getImage("image/enemy/goblin_spritesheet.png"),smooth:!1};return new r.Animation({sprites:[0,16,32,48,64,80].map((function(e){return new r.Sprite(U(U({},t),{},{slice:new r.Rectangle(e,0,16,16)}))})),speed:.4,loop:!0})};function W(t){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Z(t);if(e){var i=Z(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return K(this,n)}}function K(t,e){return!e||"object"!==W(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}(a,t);var e,n,i,o=X(a);function a(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.6;return z(this,a),(e=o.call(this)).spriteRenderer=void 0,e.animator=void 0,e.bodyCollider=void 0,e.edgeCollider=void 0,e.wallCollider=void 0,e.rigidBody=void 0,e.walkSpeed=1.6,e.jumpSpeed=14,e.jumping=!1,e.cacheVelocity=new r.Vector2,e.layer="Enemy",e.spriteRenderer=e.addComponent((function(){return new r.SpriteRenderer({sprite:new r.Sprite({image:r.AssetManager.getImage("image/enemy/goblin_spritesheet.png"),slice:new r.Rectangle(0,0,16,16),smooth:!1})})})),e.animator=e.addComponent((function(){return new r.Animator({spriteRenderer:e.spriteRenderer})})).addAnimation("Walking",H()),e.bodyCollider=e.addComponent((function(){return new r.BoxCollider({width:10,height:16,physics:!0,debug:!0})}),"BodyCollider"),e.edgeCollider=e.addComponent((function(){return new r.BoxCollider({width:4,height:4,offsetX:8,offsetY:-6,physics:!1,debug:!0})}),"EdgeCollider"),e.wallCollider=e.addComponent((function(){return new r.BoxCollider({width:4,height:4,offsetX:8,offsetY:5,physics:!1,debug:!0})}),"WallCollider"),e.rigidBody=e.addComponent((function(){return new r.RigidBody({rigidBodyType:r.RigidBodyType.Dynamic,layersToCollide:["Foreground","Player"],gravity:5})})),e.transform.position=t,e.walkSpeed=n,e}return e=a,(n=[{key:"start",value:function(){this.transform.scale.set(3,3),this.animator.playAnimation("Walking")}},{key:"update",value:function(){this.move()}},{key:"move",value:function(){if(!1!==this.bodyCollider.collidesWithLayer("Foreground")){var t=0;!1!==this.edgeCollider.collidesWithLayer("Foreground")&&!0!==this.wallCollider.collidesWithLayer("Foreground")||this.transform.scale.set(-this.transform.scale.x,this.transform.scale.y),this.wallCollider.collidesWithLayer("Player")&&!1===this.jumping&&(this.jumping=!0,t=this.jumpSpeed),!1===this.wallCollider.collidesWithLayer("Player")&&(this.jumping=!1),this.rigidBody.velocity.set(Math.sign(this.transform.scale.x)*this.walkSpeed,t)}}}])&&Y(e.prototype,n),i&&Y(e,i),a}(r.GameObject);n(187);function J(t){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function et(t,e){return(et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=it(t);if(e){var i=it(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rt(this,n)}}function rt(t,e){return!e||"object"!==J(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&et(t,e)}(a,t);var e,n,i,o=nt(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this)).textRenderer=void 0,t.delay=.1,t.layer="UI",t.ui=!0,t.textRenderer=t.addComponent((function(){return new r.TextRenderer({text:"",color:"#A7D6ED",size:20,fontFamily:"PressStart2P-Regular",fontUrl:"font/PressStart2P-Regular.ttf",pivot:"center"})})),t}return e=a,(n=[{key:"start",value:function(){this.transform.position.set(r.DomManager.gameWidth/2-120,20-r.DomManager.gameHeight/2)}},{key:"update",value:function(){if(this.delay+=r.TimeManager.unscaledDeltaTime,this.delay>=.1){this.delay=0;var t=(1/r.TimeManager.unscaledDeltaTime).toFixed(2);this.textRenderer.text="FPS: ".concat(t)}}}])&&tt(e.prototype,n),i&&tt(e,i),a}(r.GameObject);function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ft(t);if(e){var i=ft(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(t,e){return!e||"object"!==at(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(n,t);var e=st(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=e.call(this)).layer="Foreground",t.addComponent((function(){return new r.SpriteRenderer({sprite:new r.Sprite({image:r.AssetManager.getImage("image/misc/wooden_plate.png"),smooth:!1}),tiled:new r.Vector2(3,1),offset:new r.Vector2(0,0)})})),t.transform.scale.set(3,3),t.transform.position.set(72,-48),t.transform.rotation=0,t}return n}(r.GameObject);function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pt(t,e){return(pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gt(t);if(e){var i=gt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return yt(this,n)}}function yt(t,e){return!e||"object"!==ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pt(t,e)}(n,t);var e=dt(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=e.call(this)).layer="Parallax",t.addComponent((function(){return new r.SpriteRenderer({sprite:new r.Sprite({image:r.AssetManager.getImage("image/scene/background.png"),smooth:!1}),tiled:new r.Vector2(2,1)})})),t.transform.scale.set(6,6),t.transform.position.set(0,0),t}return n}(r.GameObject);function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t,e){return(_t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wt(t);if(e){var i=wt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xt(this,n)}}function xt(t,e){return!e||"object"!==vt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_t(t,e)}(a,t);var e,n,i,o=Mt(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this)).textRenderer=void 0,t.layer="UI",t.ui=!0,t.textRenderer=t.addComponent((function(){return new r.TextRenderer({text:"PAUSE",color:"#FFFFFF",size:20,fontFamily:"PressStart2P-Regular",fontUrl:"font/PressStart2P-Regular.ttf",pivot:"center"})})),t}return e=a,(n=[{key:"start",value:function(){this.transform.position.set(0,0)}}])&&bt(e.prototype,n),i&&bt(e,i),a}(r.GameObject);function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rt(t,e){return(Rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Et(t);if(e){var i=Et(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return St(this,n)}}function St(t,e){return!e||"object"!==jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Et(t){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rt(t,e)}(a,t);var e,n,i,o=Tt(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this)).fxCamera=void 0,t.pauseKey=!1,t.pausing=!1,t.pauseText=void 0,t.paused=!1,r.AssetManager.createImage("image/tileset/tileset.png"),r.AssetManager.createImage("image/player/player-spritesheet.png"),r.AssetManager.createImage("image/enemy/goblin_spritesheet.png"),r.AssetManager.createImage("image/misc/wooden_plate.png"),r.AssetManager.createImage("image/scene/background.png"),t}return e=a,(n=[{key:"start",value:function(){this.addGameObject((function(){return new A}),"InputController"),this.addGameObject((function(){return new f(r.AssetManager.getImage("image/tileset/tileset.png"))}),"Foreground"),this.addGameObject((function(){return new lt}),"WoodenPlate"),this.addGameObject((function(){return new j}),"Player"),this.addGameObject((function(){return new mt}),"Parallax"),this.addGameObject((function(){return new $(new r.Vector2(-180,-48),2)}),"Enemy00"),this.addGameObject((function(){return new $(new r.Vector2(300,-48),2.4)}),"Enemy01"),this.addGameObject((function(){return new $(new r.Vector2(400,-48),1.6)}),"Enemy02"),this.addGameObject((function(){return new $(new r.Vector2(-400,-48),3)}),"Enemy03"),this.addGameObject((function(){return new $(new r.Vector2(-500,-48),2)}),"Enemy04"),this.addGameObject((function(){return new $(new r.Vector2(-600,-48),2.4)}),"Enemy05"),this.addGameObject((function(){return new $(new r.Vector2(600,-48),1.6)}),"Enemy06"),this.addGameObject((function(){return new $(new r.Vector2(800,-48),3)}),"Enemy07"),this.addGameObject((function(){return new $(new r.Vector2(364,-48),2.6)}),"Enemy08"),this.addGameObject((function(){return new $(new r.Vector2(100,-48),2.2)}),"Enemy09"),this.pauseText=this.addGameObject((function(){return new Ot}),"Pause"),this.pauseText.setActive(!1),this.addGameObject((function(){return new ot}),"FpsMetter"),this.gameCamera.layers=["Foreground","Enemy","Player","UI"],this.gameCamera.zoom=1,this.gameCamera.addComponent((function(){return new k})),this.fxCamera=this.gameCamera.addChild((function(){return new r.GameCamera}),"FxCamera"),this.fxCamera.layers=["Parallax"],this.fxCamera.zoom=.6,this.fxCamera.depth=-1}},{key:"update",value:function(){this.pause()}},{key:"cameraFX",value:function(){this.gameCamera.zoom<1&&(this.gameCamera.zoom+=.01),this.fxCamera.zoom<.6&&(this.fxCamera.zoom+=.01)}},{key:"pause",value:function(){this.pauseKey=r.InputManager.keyboard.isPressed("KeyP"),this.pauseKey&&!1===this.pausing&&(this.pausing=!0,r.TimeManager.setTimeScale(0===r.TimeManager.getTimeScale()?1:0),this.paused=0===r.TimeManager.getTimeScale(),this.pauseText.setActive(this.paused)),this.pausing&&(this.pausing=this.pauseKey)}}])&&Pt(e.prototype,n),i&&Pt(e,i),a}(r.Scene),At={containerNode:document.querySelector("body"),gameWidth:1280,gameHeight:720,debugEnabled:!1,context2d:"fallback",bgColor:"#967557",pyysicsFramerate:60,physicsIterations:8},Dt=new r.Game(At);Dt.addScene("Stage01",(function(){return new Ct})),Dt.run()}]);