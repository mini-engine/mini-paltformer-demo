!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=181)}([function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.TimeManager=e.DomManager=e.AssetManager=e.InputManager=e.SceneManager=e.Game=void 0,o(n(1),e),o(n(32),e),o(n(68),e);var i=n(2);Object.defineProperty(e,"Game",{enumerable:!0,get:function(){return i.Game}}),o(n(134),e),o(n(38),e),o(n(8),e),o(n(136),e),o(n(137),e),o(n(138),e),o(n(140),e),o(n(142),e),o(n(143),e),o(n(144),e),o(n(146),e),o(n(148),e),o(n(149),e),o(n(150),e),o(n(80),e),o(n(151),e),o(n(70),e),o(n(79),e);var a=n(77);Object.defineProperty(e,"SceneManager",{enumerable:!0,get:function(){return a.SceneManagerFacade}});var u=n(76);Object.defineProperty(e,"InputManager",{enumerable:!0,get:function(){return u.InputManagerFacade}});var c=n(74);Object.defineProperty(e,"AssetManager",{enumerable:!0,get:function(){return c.AssetManagerFacade}});var s=n(75);Object.defineProperty(e,"DomManager",{enumerable:!0,get:function(){return s.DomManagerFacade}});var f=n(78);Object.defineProperty(e,"TimeManager",{enumerable:!0,get:function(){return f.TimeManagerFacade}}),o(n(72),e),o(n(73),e),o(n(71),e)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector2=void 0;var r=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"magnitude",{get:function(){return Math.sqrt(Math.pow(this._x,2)+Math.pow(this._y,2))},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e){this._x=t,this._y=e},t.prototype.equals=function(t){return this._x===t.x&&this._y===t.y},t.prototype.clone=function(){return new t(this._x,this._y)},t.add=function(t,e,n){return t.set(e.x+n.x,e.y+n.y),t},t.subtract=function(t,e,n){return t.set(e.x-n.x,e.y-n.y),t},t.unit=function(t,e){return 0===e.magnitude?t.set(0,0):t.set(e.x/e.magnitude,e.y/e.magnitude),t},t.normal=function(t,e){return t.set(-e.y,e.x),this.unit(t,t)},t.scale=function(t,e,n){return t.set(e.x*n,e.y*n),t},t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.cross=function(t,e){return t.x*e.y-t.y*e.x},t.round=function(t,e){return t.set(Math.round(e.x),Math.round(e.y)),t},t}();e.Vector2=r},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Game=e.container=e.EVENT_UPDATE_RENDER=e.EVENT_UPDATE_PHYSICS=e.EVENT_UPDATE=e.EVENT_START=void 0;var o=n(112),i=n(133),a=n(74),u=n(75),c=n(76),s=n(77),f=n(78);e.EVENT_START="mini-engine-start",e.EVENT_UPDATE="mini-engine-update",e.EVENT_UPDATE_PHYSICS="mini-engine-update-physics",e.EVENT_UPDATE_RENDER="mini-engine-update-render",e.container=new i.Container;var l={containerNode:null,gameWidth:320,gameHeight:180,debugEnabled:!1,bgColor:"#000000",context2d:"fallback"},h=function(){function t(t){if(this._running=!1,this.frameRequestId=null,this._config=r(r({},l),t),null===this.config.containerNode)throw new Error("Config parameter 'containerNode' cannot be empty.");this.setupManagers(),this.initializeFacades()}return t.prototype.setupManagers=function(){o.loadDependencies(e.container,this),this.renderManager=e.container.getSingleton("RenderManager"),this.sceneManager=e.container.getSingleton("SceneManager"),this.collisionManager=e.container.getSingleton("CollisionManager"),this.timeManager=e.container.getSingleton("TimeManager")},t.prototype.initializeFacades=function(){a.AssetManagerFacade.initialize(),u.DomManagerFacade.initialize(),c.InputManagerFacade.initialize(),s.SceneManagerFacade.initialize(),f.TimeManagerFacade.initialize()},Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"running",{get:function(){return this._running},enumerable:!1,configurable:!0}),t.prototype.addScene=function(t,e,n){void 0===n&&(n=!1),this.sceneManager.addScene(t,e,n)},t.prototype.run=function(){this.sceneManager.loadOpeningScene(),this.timeManager.start(),this.requestAnimationFrame()},t.prototype.stop=function(){var t=this;this.stopLoop(),setTimeout((function(){t.sceneManager.unloadCurrentScene(),t.renderManager.clearCanvas(t._config.bgColor)}),100)},t.prototype.gameLoop=function(t){try{this._running=!0,this.timeManager.update(t),this.collisionManager.prepare(),this.dispatchFrameEvent(e.EVENT_START),this.dispatchFrameEvent(e.EVENT_UPDATE),this.dispatchFrameEvent(e.EVENT_UPDATE_PHYSICS),this.dispatchFrameEvent(e.EVENT_UPDATE_RENDER),this.renderManager.clearCanvas(this._config.bgColor),this.renderManager.render(),this.requestAnimationFrame()}catch(t){console.error("Mini Engine Error: "+t),this.stopLoop()}},t.prototype.stopLoop=function(){window.cancelAnimationFrame(this.frameRequestId),this._running=!1,this.frameRequestId=null},t.prototype.resumeLoop=function(){0==this._running&&null===this.frameRequestId&&this.requestAnimationFrame()},t.prototype.requestAnimationFrame=function(){var t=this;this.frameRequestId=window.requestAnimationFrame((function(e){return t.gameLoop(e)}))},t.prototype.dispatchFrameEvent=function(t){window.dispatchEvent(new CustomEvent(t))},t}();e.Game=h},function(t,e,n){var r=n(5),o=n(33).f,i=n(25),a=n(30),u=n(50),c=n(90),s=n(156);t.exports=function(t,e){var n,f,l,h,p,d=t.target,y=t.global,g=t.stat;if(n=y?r:g?r[d]||u(d,{}):(r[d]||{}).prototype)for(f in e){if(h=e[f],l=t.noTargetGet?(p=o(n,f))&&p.value:n[f],!s(y?f:d+(g?".":"#")+f,t.forced)&&void 0!==l){if(typeof h==typeof l)continue;c(h,l)}(t.sham||l&&l.sham)&&i(h,"sham",!0),a(n,f,h,t)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n(152))},function(t,e,n){var r=n(4);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RenderComponent=e.PhysicsComponent=e.Component=void 0;var i=n(110),a=n(2),u=function(){function t(){var t=this;this.sceneManager=a.container.getSingleton("SceneManager"),this.gameObjectManager=a.container.getSingleton("GameObjectManager"),this.uuid=i.v4(),this.allowMultiple=!0,this.type=null,this.name=null,this.gameObject=null,this._active=!0,this.started=!1,this.gameLoopEventHandler=function(e){!1!==t._active&&(!1===t.started&&e.type===a.EVENT_START?(t.start(),t.started=!0):!0===t.started&&e.type===t.updateEvent&&t.update())},window.addEventListener(a.EVENT_START,this.gameLoopEventHandler),window.addEventListener(this.updateEvent,this.gameLoopEventHandler)}return Object.defineProperty(t.prototype,"updateEvent",{get:function(){return a.EVENT_UPDATE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),t.prototype.setActive=function(t){this._active=t},t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.getCurrentScene=function(){return this.sceneManager.getCurrentScene()},t.prototype.getComponentByName=function(t){return this.gameObject.getComponentByName(t)},t.prototype.getComponentByType=function(t){return this.gameObject.getComponentByType(t)},t.prototype.getComponentsByType=function(t){return this.gameObject.getComponentsByType(t)},t.prototype.findGameObjectByName=function(t){return this.gameObjectManager.findGameObjectByName(t)},t.prototype.findGameObjectsByTag=function(t){return this.gameObjectManager.findGameObjectsByTag(t)},t.prototype.findGameObjectByTag=function(t){return this.gameObjectManager.findGameObjectByTag(t)},t.prototype.destroyGameObjectByName=function(t){this.destroyGameObject(this.findGameObjectByName(t))},t.prototype.destroyGameObject=function(t){this.gameObjectManager.destroyGameObject(t)},t.prototype.destroy=function(){var t=this;window.removeEventListener(a.EVENT_START,this.gameLoopEventHandler),window.removeEventListener(this.updateEvent,this.gameLoopEventHandler),Object.keys(this).forEach((function(e){return delete t[e]}))},t}();e.Component=u;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"updateEvent",{get:function(){return a.EVENT_UPDATE_PHYSICS},enumerable:!1,configurable:!0}),e}(u);e.PhysicsComponent=c;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"updateEvent",{get:function(){return a.EVENT_UPDATE_RENDER},enumerable:!1,configurable:!0}),e}(u);e.RenderComponent=s},function(t,e,n){var r=n(5),o=n(52),i=n(7),a=n(53),u=n(57),c=n(95),s=o("wks"),f=r.Symbol,l=c?f:f&&f.withoutSetter||a;t.exports=function(t){return i(s,t)||(u&&i(f,t)?s[t]=f[t]:s[t]=l("Symbol."+t)),s[t]}},function(t,e,n){"use strict";var r=n(3),o=n(5),i=n(35),a=n(44),u=n(6),c=n(57),s=n(95),f=n(4),l=n(7),h=n(58),p=n(11),d=n(26),y=n(31),g=n(27),m=n(41),v=n(34),b=n(37),_=n(59),M=n(54),w=n(158),x=n(94),O=n(33),j=n(13),P=n(85),R=n(25),E=n(30),T=n(52),S=n(43),C=n(45),A=n(53),D=n(9),V=n(97),I=n(98),L=n(60),G=n(42),F=n(46).forEach,B=S("hidden"),N=D("toPrimitive"),k=G.set,q=G.getterFor("Symbol"),U=Object.prototype,H=o.Symbol,Y=i("JSON","stringify"),W=O.f,z=j.f,Q=w.f,X=P.f,K=T("symbols"),Z=T("op-symbols"),$=T("string-to-symbol-registry"),J=T("symbol-to-string-registry"),tt=T("wks"),et=o.QObject,nt=!et||!et.prototype||!et.prototype.findChild,rt=u&&f((function(){return 7!=b(z({},"a",{get:function(){return z(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=W(U,e);r&&delete U[e],z(t,e,n),r&&t!==U&&z(U,e,r)}:z,ot=function(t,e){var n=K[t]=b(H.prototype);return k(n,{type:"Symbol",tag:t,description:e}),u||(n.description=e),n},it=s?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof H},at=function(t,e,n){t===U&&at(Z,e,n),d(t);var r=m(e,!0);return d(n),l(K,r)?(n.enumerable?(l(t,B)&&t[B][r]&&(t[B][r]=!1),n=b(n,{enumerable:v(0,!1)})):(l(t,B)||z(t,B,v(1,{})),t[B][r]=!0),rt(t,r,n)):z(t,r,n)},ut=function(t,e){d(t);var n=g(e),r=_(n).concat(lt(n));return F(r,(function(e){u&&!ct.call(n,e)||at(t,e,n[e])})),t},ct=function(t){var e=m(t,!0),n=X.call(this,e);return!(this===U&&l(K,e)&&!l(Z,e))&&(!(n||!l(this,e)||!l(K,e)||l(this,B)&&this[B][e])||n)},st=function(t,e){var n=g(t),r=m(e,!0);if(n!==U||!l(K,r)||l(Z,r)){var o=W(n,r);return!o||!l(K,r)||l(n,B)&&n[B][r]||(o.enumerable=!0),o}},ft=function(t){var e=Q(g(t)),n=[];return F(e,(function(t){l(K,t)||l(C,t)||n.push(t)})),n},lt=function(t){var e=t===U,n=Q(e?Z:g(t)),r=[];return F(n,(function(t){!l(K,t)||e&&!l(U,t)||r.push(K[t])})),r};(c||(E((H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=A(t),n=function(t){this===U&&n.call(Z,t),l(this,B)&&l(this[B],e)&&(this[B][e]=!1),rt(this,e,v(1,t))};return u&&nt&&rt(U,e,{configurable:!0,set:n}),ot(e,t)}).prototype,"toString",(function(){return q(this).tag})),E(H,"withoutSetter",(function(t){return ot(A(t),t)})),P.f=ct,j.f=at,O.f=st,M.f=w.f=ft,x.f=lt,V.f=function(t){return ot(D(t),t)},u&&(z(H.prototype,"description",{configurable:!0,get:function(){return q(this).description}}),a||E(U,"propertyIsEnumerable",ct,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:H}),F(_(tt),(function(t){I(t)})),r({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=String(t);if(l($,e))return $[e];var n=H(e);return $[e]=n,J[n]=e,n},keyFor:function(t){if(!it(t))throw TypeError(t+" is not a symbol");if(l(J,t))return J[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!u},{create:function(t,e){return void 0===e?b(t):ut(b(t),e)},defineProperty:at,defineProperties:ut,getOwnPropertyDescriptor:st}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ft,getOwnPropertySymbols:lt}),r({target:"Object",stat:!0,forced:f((function(){x.f(1)}))},{getOwnPropertySymbols:function(t){return x.f(y(t))}}),Y)&&r({target:"JSON",stat:!0,forced:!c||f((function(){var t=H();return"[null]"!=Y([t])||"{}"!=Y({a:t})||"{}"!=Y(Object(t))}))},{stringify:function(t,e,n){for(var r,o=[t],i=1;arguments.length>i;)o.push(arguments[i++]);if(r=e,(p(e)||void 0!==t)&&!it(t))return h(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!it(e))return e}),o[1]=e,Y.apply(null,o)}});H.prototype[N]||R(H.prototype,N,H.prototype.valueOf),L(H,"Symbol"),C[B]=!0},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";var r=n(27),o=n(160),i=n(62),a=n(42),u=n(100),c=a.set,s=a.getterFor("Array Iterator");t.exports=u(Array,"Array",(function(t,e){c(this,{type:"Array Iterator",target:r(t),index:0,kind:e})}),(function(){var t=s(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(t,e,n){var r=n(6),o=n(87),i=n(26),a=n(41),u=Object.defineProperty;e.f=r?u:function(t,e,n){if(i(t),e=a(e,!0),i(n),o)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";var r=n(3),o=n(6),i=n(5),a=n(7),u=n(11),c=n(13).f,s=n(90),f=i.Symbol;if(o&&"function"==typeof f&&(!("description"in f.prototype)||void 0!==f().description)){var l={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new f(t):void 0===t?f():f(t);return""===t&&(l[e]=!0),e};s(h,f);var p=h.prototype=f.prototype;p.constructor=h;var d=p.toString,y="Symbol(test)"==String(f("test")),g=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var t=u(this)?this.valueOf():this,e=d.call(t);if(a(l,t))return"";var n=y?e.slice(7,-1):e.replace(g,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:h})}},function(t,e,n){n(98)("iterator")},function(t,e,n){var r=n(30),o=Date.prototype,i=o.toString,a=o.getTime;new Date(NaN)+""!="Invalid Date"&&r(o,"toString",(function(){var t=a.call(this);return t==t?i.call(this):"Invalid Date"}))},function(t,e,n){n(3)({target:"Object",stat:!0,sham:!n(6)},{create:n(37)})},function(t,e,n){var r=n(3),o=n(4),i=n(31),a=n(63),u=n(102);r({target:"Object",stat:!0,forced:o((function(){a(1)})),sham:!u},{getPrototypeOf:function(t){return a(i(t))}})},function(t,e,n){n(3)({target:"Object",stat:!0},{setPrototypeOf:n(103)})},function(t,e,n){var r=n(64),o=n(30),i=n(163);r||o(Object.prototype,"toString",i,{unsafe:!0})},function(t,e,n){var r=n(3),o=n(35),i=n(61),a=n(26),u=n(11),c=n(37),s=n(165),f=n(4),l=o("Reflect","construct"),h=f((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),p=!f((function(){l((function(){}))})),d=h||p;r({target:"Reflect",stat:!0,forced:d,sham:d},{construct:function(t,e){i(t),a(e);var n=arguments.length<3?t:i(arguments[2]);if(p&&!h)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(s.apply(t,r))}var o=n.prototype,f=c(u(o)?o:Object.prototype),d=Function.apply.call(t,f,e);return u(d)?d:f}})},function(t,e,n){"use strict";var r=n(30),o=n(26),i=n(4),a=n(166),u=RegExp.prototype,c=u.toString,s=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),f="toString"!=c.name;(s||f)&&r(RegExp.prototype,"toString",(function(){var t=o(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in u)?a.call(t):n)}),{unsafe:!0})},function(t,e,n){"use strict";var r=n(167).charAt,o=n(42),i=n(100),a=o.set,u=o.getterFor("String Iterator");i(String,"String",(function(t){a(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,o=e.index;return o>=n.length?{value:void 0,done:!0}:(t=r(n,o),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){var r=n(5),o=n(104),i=n(12),a=n(25),u=n(9),c=u("iterator"),s=u("toStringTag"),f=i.values;for(var l in o){var h=r[l],p=h&&h.prototype;if(p){if(p[c]!==f)try{a(p,c,f)}catch(t){p[c]=f}if(p[s]||a(p,s,l),o[l])for(var d in i)if(p[d]!==i[d])try{a(p,d,i[d])}catch(t){p[d]=i[d]}}}},function(t,e,n){var r=n(6),o=n(13),i=n(34);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(11);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(86),o=n(40);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(3),o=n(6);r({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:n(13).f})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RenderData=e.RenderDataType=void 0;var r=n(1);!function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Geometric=2]="Geometric",t[t.Collider=3]="Collider"}(e.RenderDataType||(e.RenderDataType={}));var o=function(){function t(){this.ui=!1,this.debug=!1,this.layer=null,this._position=new r.Vector2(0,0),this._positionInViewport=new r.Vector2(0,0)}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position.set(t.x,t.y)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"positionInViewport",{get:function(){return this._positionInViewport},set:function(t){this._positionInViewport.set(t.x,t.y)},enumerable:!1,configurable:!0}),t}();e.RenderData=o},function(t,e,n){var r=n(5),o=n(25),i=n(7),a=n(50),u=n(89),c=n(42),s=c.get,f=c.enforce,l=String(String).split("String");(t.exports=function(t,e,n,u){var c,s=!!u&&!!u.unsafe,h=!!u&&!!u.enumerable,p=!!u&&!!u.noTargetGet;"function"==typeof n&&("string"!=typeof e||i(n,"name")||o(n,"name",e),(c=f(n)).source||(c.source=l.join("string"==typeof e?e:""))),t!==r?(s?!p&&t[e]&&(h=!0):delete t[e],h?t[e]=n:o(t,e,n)):h?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&s(this).source||u(this)}))},function(t,e,n){var r=n(40);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var r=n(1),o=function(){function t(t,e,n,o){this._position=new r.Vector2,this._center=new r.Vector2,this._width=0,this._height=0,this.set(t,e,n,o)}return Object.defineProperty(t.prototype,"x",{get:function(){return this._position.x},set:function(t){this._position.set(t,this._position.y)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._position.y},set:function(t){this._position.set(this._position.x,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x1",{get:function(){return this._position.x+this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y1",{get:function(){return this._position.y+this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position.set(t.x,t.y)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return this._center.set(this.x+this.width/2,this.y+this.height/2),this._center},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e,n,r){this._position.set(t,e),this._width=n,this._height=r},t.prototype.updateFromRect=function(t){this.set(t.x,t.y,t.width,t.height)},t.prototype.overlappingRectangle=function(t){return this.x1>=t.x&&this.x<=t.x1&&this.y1>=t.y&&this.y<=t.y1},t}();e.Rectangle=o},function(t,e,n){var r=n(6),o=n(85),i=n(34),a=n(27),u=n(41),c=n(7),s=n(87),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=a(t),e=u(e,!0),s)try{return f(t,e)}catch(t){}if(c(t,e))return i(!o.f.call(t,e),t[e])}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(92),o=n(5),i=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t])||i(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r,o=n(26),i=n(96),a=n(56),u=n(45),c=n(157),s=n(88),f=n(43),l=f("IE_PROTO"),h=function(){},p=function(t){return"<script>"+t+"<\/script>"},d=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;d=r?function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=s("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete d.prototype[a[n]];return d()};u[l]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=o(t),n=new h,h.prototype=null,n[l]=t):n=d(),void 0===e?n:i(n,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameObject=e.LAYER_DEFAULT=void 0;var r=n(110),o=n(70),i=n(2);e.LAYER_DEFAULT="Default";var a=function(){function t(){var t=this;this._uuid=r.v4(),this.name=null,this.tag=null,this.layer=e.LAYER_DEFAULT,this.ui=!1,this._active=!0,this.started=!1,this._parent=null,this.sceneManager=i.container.getSingleton("SceneManager"),this.gameObjectManager=i.container.getSingleton("GameObjectManager"),this.components=[],this.inactiveComponents=[],this.inactiveChildren=[],this.gameLoopEventHandler=function(e){!1!==t._active&&(!1===t.started&&e.type===i.EVENT_START?(t.start(),t.started=!0):!0===t.started&&e.type===i.EVENT_UPDATE&&t.update())},this.addComponent((function(){return new o.Transform})),window.addEventListener(i.EVENT_START,this.gameLoopEventHandler),window.addEventListener(i.EVENT_UPDATE,this.gameLoopEventHandler)}return Object.defineProperty(t.prototype,"uuid",{get:function(){return this._uuid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return this.getComponentByType(o.TYPE_TRANSFORM)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){this._parent=t,this.transform.forceUpdate()},enumerable:!1,configurable:!0}),t.prototype.getCurrentScene=function(){return this.sceneManager.getCurrentScene()},t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.findGameObjectByName=function(t){return this.gameObjectManager.findGameObjectByName(t)},t.prototype.findGameObjectsByTag=function(t){return this.gameObjectManager.findGameObjectsByTag(t)},t.prototype.findGameObjectByTag=function(t){return this.gameObjectManager.findGameObjectByTag(t)},t.prototype.addComponent=function(t,e){void 0===e&&(e=null);var n=t();return this.checkMultipleComponent(n),n.name=e,n.gameObject=this,this.components.push(n),n},t.prototype.checkMultipleComponent=function(t){if(!1===t.allowMultiple&&this.hasComponentOfType(t.type))throw new Error("GameObject only allows one component of type "+t.type)},t.prototype.getComponents=function(){return this.components},t.prototype.getComponentByName=function(t){return this.components.reduce((function(e,n){return n.name===t?n:e}),null)},t.prototype.getComponentByType=function(t){return this.components.reduce((function(e,n){return n.type===t?n:e}),null)},t.prototype.getComponentsByType=function(t){return this.components.filter((function(e){return e.type===t}))},t.prototype.hasComponentOfName=function(t){return null!==this.getComponentByName(t)},t.prototype.hasComponentOfType=function(t){return null!==this.getComponentByType(t)},t.prototype.removeComponentByName=function(t){var e=this;this.components.every((function(n,r){if(n.name===t)return n.destroy(),delete e.components[r],!1}))},t.prototype.removeComponentByType=function(t){var e=this;this.components.every((function(n,r){if(n.type===t)return n.destroy(),delete e.components[r],!1}))},t.prototype.removeComponents=function(){var t=this;this.components.every((function(e,n){return e.destroy(),delete t.components[n]})),this.components=[]},t.prototype.addChild=function(t,e){return this.gameObjectManager.addGameObject(t,e,this)},t.prototype.getChildren=function(){return this.gameObjectManager.findGameObjectsByParent(this)},t.prototype.getChild=function(t){return this.gameObjectManager.findGameObjectByParentAndName(this,t)},t.prototype.destroyChildren=function(){var t=this;this.gameObjectManager.findGameObjectsByParent(this).forEach((function(e){return t.gameObjectManager.destroyGameObject(e)}))},t.prototype.setActive=function(t){var e=this;!1===t&&this.updateInactiveCache(),this.components.filter((function(t){return-1===e.inactiveComponents.indexOf(t.uuid)})).forEach((function(e){return e.setActive(t)})),this.getChildren().filter((function(t){return-1===e.inactiveChildren.indexOf(t.uuid)})).forEach((function(e){return e.setActive(t)})),this.transform.forceUpdate(),this._active=t},t.prototype.updateInactiveCache=function(){var t=this;this.inactiveComponents=[],this.inactiveChildren=[],this.components.filter((function(t){return!1===t.active})).forEach((function(e){return t.inactiveComponents.push(e.uuid)})),this.getChildren().filter((function(t){return!1===t.active})).forEach((function(e){return t.inactiveChildren.push(e.uuid)}))},t.prototype.destroyGameObjectByName=function(t){this.destroyGameObject(this.findGameObjectByName(t))},t.prototype.destroyGameObject=function(t){this.gameObjectManager.destroyGameObject(t)},t.prototype.destroy=function(){var t=this;window.removeEventListener(i.EVENT_START,this.gameLoopEventHandler),window.removeEventListener(i.EVENT_UPDATE,this.gameLoopEventHandler),this.removeComponents(),Object.keys(this).forEach((function(e){return delete t[e]}))},t}();e.GameObject=a},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(11);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r,o,i,a=n(153),u=n(5),c=n(11),s=n(25),f=n(7),l=n(51),h=n(43),p=n(45),d=u.WeakMap;if(a){var y=l.state||(l.state=new d),g=y.get,m=y.has,v=y.set;r=function(t,e){return e.facade=t,v.call(y,t,e),e},o=function(t){return g.call(y,t)||{}},i=function(t){return m.call(y,t)}}else{var b=h("state");p[b]=!0,r=function(t,e){return e.facade=t,s(t,b,e),e},o=function(t){return f(t,b)?t[b]:{}},i=function(t){return f(t,b)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var r=n(52),o=n(53),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},function(t,e){t.exports=!1},function(t,e){t.exports={}},function(t,e,n){var r=n(159),o=n(86),i=n(31),a=n(55),u=n(99),c=[].push,s=function(t){var e=1==t,n=2==t,s=3==t,f=4==t,l=6==t,h=5==t||l;return function(p,d,y,g){for(var m,v,b=i(p),_=o(b),M=r(d,y,3),w=a(_.length),x=0,O=g||u,j=e?O(p,w):n?O(p,0):void 0;w>x;x++)if((h||x in _)&&(v=M(m=_[x],x,b),t))if(e)j[x]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return x;case 2:c.call(j,m)}else if(f)return!1;return l?-1:s||f?f:j}};t.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.ShapeType=void 0;var r=n(1);!function(t){t[t.Rectangle=0]="Rectangle"}(e.ShapeType||(e.ShapeType={}));var o=function(){function t(){this._vertex=[],this._position=new r.Vector2,this._direction=new r.Vector2,this._height=0,this._width=0,this._angle=0}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position.set(t.x,t.y)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertex",{get:function(){return this._vertex},enumerable:!1,configurable:!0}),t}();e.Shape=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLRenderer=e.WEBGL_CONTEXT_NAME=void 0;var r=n(29),o=n(125),i=n(126);e.WEBGL_CONTEXT_NAME="webgl";var a=function(){function t(t,n,r,a){this.canvas=t,this.gl=this.canvas.getContext(e.WEBGL_CONTEXT_NAME),this.textureManager=r,this.program=n.create(this.gl,i.vertexShader,o.fragmentShader),this.imageRenderer=a,this.imageRenderer.setProgram(this.program)}return t.prototype.clearCanvas=function(t){var e=this.hexToRgb(t);this.gl.clearColor(e.r,e.g,e.b,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT)},t.prototype.hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16)/256,g:parseInt(e[2],16)/256,b:parseInt(e[3],16)/256}:null},t.prototype.render=function(t,e){e.type===r.RenderDataType.Image?this.renderImage(t,e):e.type===r.RenderDataType.Text&&this.renderText(t,e)},t.prototype.renderImage=function(t,e){this.imageRenderer.renderImage(!0===e.ui?t.originalViewportRect:t.viewportRect,this.textureManager.getOrCreateTextureFromImage(e.image,e.smooth),e.image,e.positionInViewport,e.width,e.height,e.slice,e.rotation,e.flipHorizontal,e.flipVertical,e.alpha)},t.prototype.renderText=function(t,e){},t}();e.WebGLRenderer=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.ColliderComponent=void 0;var a=n(8),u=n(2),c=function(t){function e(){var e=t.call(this)||this;return e.collisionManager=u.container.getSingleton("CollisionManager"),e.colliders=[],e._physics=!0,e.collisionsCache=[],e}return o(e,t),Object.defineProperty(e.prototype,"physics",{get:function(){return this._physics},enumerable:!1,configurable:!0}),e.prototype.addCollider=function(t){this.colliders.push(t),this.collisionManager.addCollider(t)},e.prototype.collidesWithLayer=function(t){return null!==this.getCollisionWithLayer(t)},e.prototype.getCollisionWithLayer=function(t){this.updatePosition();for(var e=0,n=this.colliders;e<n.length;e++)for(var r=n[e],o=0,i=this.collisionManager.getCollisionsForCollider(r);o<i.length;o++){var a=i[o];if(a.remoteCollider.gameObject.layer===t)return a}return null},e.prototype.getCollisionsWithLayer=function(t){this.updatePosition(),this.collisionsCache=[];for(var e=0,n=this.colliders;e<n.length;e++)for(var r=n[e],o=0,a=this.collisionManager.getCollisionsForCollider(r);o<a.length;o++){var u=a[o];u.remoteCollider.gameObject.layer===t&&this.collisionsCache.push(u)}return i(this.collisionsCache)},e.prototype.setActive=function(e){var n=this;!0===e&&!1===this.active?this.colliders.forEach((function(t){return n.collisionManager.addCollider(t)})):!1===e&&!0===this.active&&this.colliders.forEach((function(t){return n.collisionManager.removeCollider(t)})),t.prototype.setActive.call(this,e)},e.prototype.destroy=function(){var e=this;this.colliders.forEach((function(t){return e.collisionManager.removeCollider(t)})),t.prototype.destroy.call(this)},e}(a.Component);e.ColliderComponent=c},function(t,e,n){var r=n(5),o=n(25);t.exports=function(t,e){try{o(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(5),o=n(50),i=r["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},function(t,e,n){var r=n(44),o=n(51);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.7.0",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var r=n(93),o=n(56).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(36),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var r=n(4);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,n){var r=n(39);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(93),o=n(56);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(13).f,o=n(7),i=n(9)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e){t.exports={}},function(t,e,n){var r=n(7),o=n(31),i=n(43),a=n(102),u=i("IE_PROTO"),c=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=o(t),r(t,u)?t[u]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},function(t,e,n){var r={};r[n(9)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){n(3)({target:"Math",stat:!0},{sign:n(168)})},function(t,e,n){var r=n(4),o=n(9),i=n(106),a=o("species");t.exports=function(t){return i>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){var r=n(6),o=n(4),i=n(7),a=Object.defineProperty,u={},c=function(t){throw t};t.exports=function(t,e){if(i(u,t))return u[t];e||(e={});var n=[][t],s=!!i(e,"ACCESSORS")&&e.ACCESSORS,f=i(e,0)?e[0]:c,l=i(e,1)?e[1]:void 0;return u[t]=!!n&&!o((function(){if(s&&!r)return!0;var t={length:-1};s?a(t,1,{enumerable:!0,get:c}):t[1]=1,n.call(t,f,l)}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix2=void 0;var r=n(1),o=function(){function t(t){void 0===t&&(t=null),this._data=[[0,0],[0,0]],this._data=null!=t?t:this._data}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!1,configurable:!0}),t.prototype.multiplyVector2=function(t){return new r.Vector2(this._data[0][0]*t.x+this._data[0][1]*t.y,this._data[1][0]*t.x+this._data[1][1]*t.y)},t.prototype.rotate=function(t){this._data[0][0]=Math.cos(t),this._data[0][1]=-Math.sin(t),this._data[1][0]=Math.sin(t),this._data[1][1]=Math.cos(t)},t}();e.Matrix2=o},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GeometricRenderData=e.GEOMETRIC_POLYGON=e.GEOMETRIC_RECTANGLE=void 0;var i=n(29);e.GEOMETRIC_RECTANGLE="Rectangle",e.GEOMETRIC_POLYGON="Polygon";var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=i.RenderDataType.Geometric,e.color=null,e.geometric=null,e.geometricType=null,e.geometricUsePosition=!1,e}return o(e,t),e}(i.RenderData);e.GeometricRenderData=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Transform=e.TYPE_TRANSFORM=void 0;var i=n(8),a=n(1);e.TYPE_TRANSFORM="Transform";var u=function(t){function n(){var n=t.call(this)||this;return n._position=new a.Vector2(0,0),n._innerPosition=new a.Vector2(0,0),n._scale=new a.Vector2(1,1),n._rotation=0,n.parentTransform=null,n.allowMultiple=!1,n.type=e.TYPE_TRANSFORM,n}return o(n,t),Object.defineProperty(n.prototype,"position",{get:function(){return this._position},set:function(t){this._position.set(t.x,t.y)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"innerPosition",{get:function(){return this._innerPosition},set:function(t){this._innerPosition.set(t.x,t.y)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale.set(t.x,t.y)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t},enumerable:!1,configurable:!0}),n.prototype.update=function(){null===this.parentTransform&&null!==this.gameObject.parent&&(this.parentTransform=this.gameObject.parent.transform),null!==this.parentTransform&&null===this.gameObject.parent&&(this.parentTransform=null),null!==this.parentTransform?this.translateFromParent():this._innerPosition.set(this._position.x,this._position.y)},n.prototype.translateFromParent=function(){var t=this.parentTransform._rotation*Math.PI/180,e=Math.atan2(this._innerPosition.x,this._innerPosition.y),n=Math.hypot(this._innerPosition.x,this._innerPosition.y);this._position.set(this.parentTransform._position.x+n*Math.sin(e-t),this.parentTransform._position.y+n*Math.cos(e-t)),this._rotation=this.parentTransform._rotation},n.prototype.forceUpdate=function(){this.update()},n}(i.Component);e.Transform=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GamepadController=void 0;var r=n(2),o=function(){function t(){var t=this;this.gamepads=[],this.eventHandler=function(e){"gamepadconnected"===e.type?t.gamepadConnected(e.gamepad):"gamepaddisconnected"===e.type&&t.gamepadDisconected(e.gamepad)},window.addEventListener("gamepadconnected",this.eventHandler),window.addEventListener("gamepaddisconnected",this.eventHandler),window.addEventListener(r.EVENT_UPDATE,(function(){return t.update()}));for(var e=0;e<navigator.getGamepads().length;e++)this.gamepads[e]=new i}return t.prototype.getGamepad=function(t){var e;return null!==(e=this.gamepads[t])&&void 0!==e?e:null},t.prototype.gamepadConnected=function(t){this.gamepads[t.index].updateFromGamepad(t)},t.prototype.gamepadDisconected=function(t){this.gamepads[t.index].updateFromGamepad(t)},t.prototype.update=function(){for(var t=0,e=navigator.getGamepads();t<e.length;t++){var n=e[t];null!==n&&this.gamepads[n.index].updateFromGamepad(n)}},t}();e.GamepadController=o;var i=function(){function t(){this._connected=!1,this._id=null,this.buttons=new Map,this.axes=new Map}return t.prototype.updateFromGamepad=function(t){var e=this;this._id=t.id,this._connected=t.connected,t.buttons.forEach((function(t,n){return e.buttons.set(n,t.pressed)})),t.axes.forEach((function(t,n){return e.axes.set(n,t)}))},t.prototype.getButtonPressed=function(t){return this.buttons.get(t)},t.prototype.getAxis=function(t){return this.axes.get(t)},Object.defineProperty(t.prototype,"connected",{get:function(){return this._connected},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dpadUp",{get:function(){var t;return null!==(t=this.buttons.get(12))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dpadDown",{get:function(){var t;return null!==(t=this.buttons.get(13))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dpadLeft",{get:function(){var t;return null!==(t=this.buttons.get(14))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dpadRight",{get:function(){var t;return null!==(t=this.buttons.get(15))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomFace",{get:function(){var t;return null!==(t=this.buttons.get(0))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightFace",{get:function(){var t;return null!==(t=this.buttons.get(1))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftFace",{get:function(){var t;return null!==(t=this.buttons.get(2))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topFace",{get:function(){var t;return null!==(t=this.buttons.get(3))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftShoulder",{get:function(){var t;return null!==(t=this.buttons.get(4))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightShoulder",{get:function(){var t;return null!==(t=this.buttons.get(5))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftTrigger",{get:function(){var t;return null!==(t=this.buttons.get(6))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightTrigger",{get:function(){var t;return null!==(t=this.buttons.get(7))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){var t;return null!==(t=this.buttons.get(8))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"back",{get:function(){var t;return null!==(t=this.buttons.get(9))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftStickButton",{get:function(){var t;return null!==(t=this.buttons.get(10))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightStickButton",{get:function(){var t;return null!==(t=this.buttons.get(11))&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftStickHorizontal",{get:function(){var t;return null!==(t=this.axes.get(0))&&void 0!==t?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftStickVertical",{get:function(){var t;return null!==(t=this.axes.get(1))&&void 0!==t?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightStickHorizontal",{get:function(){var t;return null!==(t=this.axes.get(2))&&void 0!==t?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightStickVertical",{get:function(){var t;return null!==(t=this.axes.get(3))&&void 0!==t?t:0},enumerable:!1,configurable:!0}),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardController=void 0;var r=function(){function t(){var t=this;this.keyPresses=new Map,this.eventHandler=function(e){"keydown"===e.type&&t.keyPresses.set(e.code,!0),"keyup"===e.type&&t.keyPresses.set(e.code,!1)},window.addEventListener("keydown",this.eventHandler),window.addEventListener("keyup",this.eventHandler)}return t.prototype.isPressed=function(t){var e;return null!==(e=this.keyPresses.get(t))&&void 0!==e&&e},t}();e.KeyboardController=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MouseController=void 0;var r=n(2),o=n(1),i=function(){function t(t){this._leftButtonPressed=!1,this._scrollButtonPressed=!1,this._rightButtonPressed=!1,this._positionInViewport=new o.Vector2(0,0),this._hasMoved=!1,this.lastPositionInViewport=new o.Vector2(0,0),this.canvas=t,this.setup()}return Object.defineProperty(t.prototype,"leftButtonPressed",{get:function(){return this._leftButtonPressed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollButtonPressed",{get:function(){return this._scrollButtonPressed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightButtonPressed",{get:function(){return this._rightButtonPressed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"positionInViewport",{get:function(){return this._positionInViewport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasMoved",{get:function(){return this._hasMoved},enumerable:!1,configurable:!0}),t.prototype.setup=function(){var t=this;this.canvas.addEventListener("mousemove",(function(e){return t.updatePosition(e)})),this.canvas.addEventListener("mousedown",(function(e){return t.updateButtonDown(e)})),this.canvas.addEventListener("mouseup",(function(e){return t.updateButtonUp(e)})),window.addEventListener(r.EVENT_UPDATE,(function(){return t.update()}))},t.prototype.updateButtonDown=function(t){t.preventDefault(),t.stopPropagation(),this._leftButtonPressed=0===t.button,this._scrollButtonPressed=1===t.button,this._rightButtonPressed=2===t.button},t.prototype.updateButtonUp=function(t){t.preventDefault(),t.stopPropagation(),this._leftButtonPressed=0!==t.button&&this._leftButtonPressed,this._scrollButtonPressed=1!==t.button&&this._scrollButtonPressed,this._rightButtonPressed=2!==t.button&&this._rightButtonPressed},t.prototype.updatePosition=function(t){t.preventDefault(),t.stopPropagation(),this._positionInViewport.set(t.offsetX/(this.canvas.clientWidth/this.canvas.width)-this.canvas.width/2,-t.offsetY/(this.canvas.clientHeight/this.canvas.height)+this.canvas.height/2)},t.prototype.update=function(){this._positionInViewport.x!==this.lastPositionInViewport.x||this._positionInViewport.y!==this.lastPositionInViewport.y?(this._hasMoved=!0,this.lastPositionInViewport.set(this._positionInViewport.x,this._positionInViewport.y)):this._hasMoved=!1},t}();e.MouseController=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssetManagerFacade=void 0;var r=n(2),o=function(){function t(){}return t.initialize=function(){this.assetManager=r.container.getSingleton("AssetManager")},t.getAssetsLoaded=function(){return this.assetManager.getAssetsLoaded()},t.createImage=function(t){return this.assetManager.createImage(t)},t.createAudio=function(t){return this.assetManager.createAudio(t)},t.createVideo=function(t){return this.assetManager.createVideo(t)},t.getImage=function(t){return this.assetManager.getImage(t)},t.getVideo=function(t){return this.assetManager.getVideo(t)},t.getAudio=function(t){return this.assetManager.getAudio(t)},t.assetManager=null,t}();e.AssetManagerFacade=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DomManagerFacade=void 0;var r=n(2),o=function(){function t(){}return t.initialize=function(){this.domManager=r.container.getSingleton("DomManager")},Object.defineProperty(t,"gameWidth",{get:function(){return this.domManager.canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(t,"gameHeight",{get:function(){return this.domManager.canvas.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"canvas",{get:function(){return this.domManager.canvas},enumerable:!1,configurable:!0}),t.domManager=null,t}();e.DomManagerFacade=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InputManagerFacade=void 0;var r=n(2),o=function(){function t(){}return t.initialize=function(){this.inputManager=r.container.getSingleton("InputManager")},Object.defineProperty(t,"mouse",{get:function(){return this.inputManager.mouse},enumerable:!1,configurable:!0}),Object.defineProperty(t,"keyboard",{get:function(){return this.inputManager.keyboard},enumerable:!1,configurable:!0}),Object.defineProperty(t,"gamepad",{get:function(){return this.inputManager.gamepad},enumerable:!1,configurable:!0}),t.inputManager=null,t}();e.InputManagerFacade=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SceneManagerFacade=void 0;var r=n(2),o=function(){function t(){}return t.initialize=function(){this.sceneManager=r.container.getSingleton("SceneManager")},t.loadScene=function(t){this.sceneManager.loadScene(t)},t.getCurrentSceneName=function(){return this.sceneManager.currentSceneName},t.loadOpeningScene=function(){this.sceneManager.loadOpeningScene()},t.sceneManager=null,t}();e.SceneManagerFacade=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeManagerFacade=void 0;var r=n(2),o=function(){function t(){}return t.initialize=function(){this.timeManager=r.container.getSingleton("TimeManager")},Object.defineProperty(t,"deltaTime",{get:function(){return this.timeManager.deltaTime},enumerable:!1,configurable:!0}),t.timeManager=null,t}();e.TimeManagerFacade=o},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GameCamera=void 0;var i=n(38),a=n(80),u=function(t){function e(){var e=t.call(this)||this;return e.transform.position.set(0,0),e.camera=e.addComponent((function(){return new a.Camera})),e}return o(e,t),Object.defineProperty(e.prototype,"layers",{get:function(){return this.camera.layers},set:function(t){this.camera.layers=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this.camera.depth},set:function(t){this.camera.depth=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zoom",{get:function(){return this.camera.zoom},set:function(t){this.camera.zoom=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"originalViewporRect",{get:function(){return this.camera.originalViewportRect},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldSpaceRect",{get:function(){return this.camera.worldSpaceRect},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportRect",{get:function(){return this.camera.viewportRect},enumerable:!1,configurable:!0}),e.prototype.addLayer=function(t){this.camera.layers.push(t)},e}(i.GameObject);e.GameCamera=u},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=e.TYPE_CAMERA=void 0;var a=n(8),u=n(135),c=n(2),s=n(38),f=n(32),l=[s.LAYER_DEFAULT];e.TYPE_CAMERA="Camera";var h=function(t){function n(){var n=t.call(this)||this;return n.renderManager=c.container.getSingleton("RenderManager"),n.domManager=c.container.getSingleton("DomManager"),n._layers=l,n._depth=0,n._zoom=1,n._originalViewportRect=new f.Rectangle(0,0,0,0),n._viewportRect=new f.Rectangle(0,0,0,0),n._worldSpaceRect=new f.Rectangle(0,0,0,0),n.cameraData=new u.CameraData,n.allowMultiple=!1,n.type=e.TYPE_CAMERA,n.canvas=n.domManager.canvas,n}return o(n,t),Object.defineProperty(n.prototype,"layers",{get:function(){return this._layers},set:function(t){this._layers=i(l,t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"zoom",{get:function(){return this._zoom},set:function(t){if(this.zoom<=0)throw new Error("zoom must be greather than 0");this._zoom=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"originalViewportRect",{get:function(){return this._originalViewportRect},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"worldSpaceRect",{get:function(){return this._worldSpaceRect},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"viewportRect",{get:function(){return this._viewportRect},enumerable:!1,configurable:!0}),n.prototype.addLayer=function(t){this._layers.push(t)},n.prototype.update=function(){this.updateOriginalViewportRect(),this.updateViewportRect(),this.updateWorldSpaceRect(),this.updateCameraData()},n.prototype.updateOriginalViewportRect=function(){this._originalViewportRect.x=-this.canvas.width/2,this._originalViewportRect.y=-this.canvas.height/2,this._originalViewportRect.width=this.canvas.width,this._originalViewportRect.height=this.canvas.height},n.prototype.updateViewportRect=function(){var t=1/this.zoom;this._viewportRect.x=this._originalViewportRect.x*t,this._viewportRect.y=this._originalViewportRect.y*t,this._viewportRect.width=this._originalViewportRect.width*t,this._viewportRect.height=this._originalViewportRect.height*t},n.prototype.updateWorldSpaceRect=function(){this._worldSpaceRect.x=this.gameObject.transform.position.x-this._viewportRect.width/2,this._worldSpaceRect.y=this.gameObject.transform.position.y-this._viewportRect.height/2,this._worldSpaceRect.width=this._viewportRect.width,this._worldSpaceRect.height=this._viewportRect.height},n.prototype.updateCameraData=function(){this.cameraData.depth=this._depth,this.cameraData.layers=this._layers,this.cameraData.originalViewportRect=this._originalViewportRect,this.cameraData.viewportRect=this._viewportRect,this.cameraData.worldSpaceRect=this._worldSpaceRect,this.cameraData.zoom=this._zoom,this.renderManager.addCameraData(this.cameraData)},n}(a.RenderComponent);e.Camera=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RectangleCollider=void 0;var r=n(1),o=n(141),i=function(){function t(t,e,n,i,a){this._position=new r.Vector2(0,0),this._width=0,this._height=0,this._position.set(t.x,t.y),this._quadVertex=[new r.Vector2(0,0),new r.Vector2(0,0),new r.Vector2(0,0),new r.Vector2(0,0)],this._width=e,this._height=n,this.gameObject=a,this.physics=i,this.shape=new o.Rectangle(this.position.x-this.width/2,this._position.y-this._height/2,this.position.x+this.width/2,this._position.y+this._height/2),this.updateQuadVertex()}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position.set(t.x,t.y),this.updateQuadVertex(),this.updateShape()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.updateQuadVertex()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.updateQuadVertex()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeftQuadVertex",{get:function(){return this._quadVertex[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomRightQuadvertex",{get:function(){return this._quadVertex[3]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topLeftQuadVertex",{get:function(){return this._quadVertex[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topRightQuadVertex",{get:function(){return this._quadVertex[2]},enumerable:!1,configurable:!0}),t.prototype.updateShape=function(){this.shape.position=this._position,this.shape.update()},t.prototype.updateQuadVertex=function(){this._quadVertex[0].set(this._position.x-this._width/2,this._position.y-this._height/2),this._quadVertex[1].set(this._position.x-this._width/2,this._position.y+this._height/2),this._quadVertex[2].set(this._position.x+this._width/2,this._position.y+this._height/2),this._quadVertex[3].set(this._position.x+this._width/2,this._position.y-this._height/2)},t}();e.RectangleCollider=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ColliderRenderData=void 0;var i=n(29),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=i.RenderDataType.Collider,e.color=null,e.shape=null,e}return o(e,t),e}(i.RenderData);e.ColliderRenderData=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ImageRenderData=void 0;var i=n(29),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=i.RenderDataType.Image,e.image=null,e.width=0,e.height=0,e.slice=null,e.flipHorizontal=!1,e.flipVertical=!1,e.rotation=null,e.smooth=!0,e.alpha=1,e}return o(e,t),e}(i.RenderData);e.ImageRenderData=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TilemapRenderer=void 0;var i=n(8),a=n(83),u=n(2),c=n(1),s=n(147),f=function(t){function e(){var e=t.call(this)||this;return e.tileset=null,e.tileScale=1,e.smooth=!0,e.tileWidth=0,e.tileHeight=0,e.orientation=new c.Vector2(1,1),e.renderManager=u.container.getSingleton("RenderManager"),e.tilemapProcessed=!1,e.tilesRenderData=[],e._width=0,e._height=0,e.tiles=[],e._realWidth=0,e._realHeight=0,e.allowMultiple=!1,e}return o(e,t),e.prototype.start=function(){this.tileWidth=this.tileset.tileWidth*this.tileScale*Math.abs(this.gameObject.transform.scale.x),this.tileHeight=this.tileset.tileHeight*this.tileScale*Math.abs(this.gameObject.transform.scale.y),this.orientation.set(Math.sign(this.gameObject.transform.scale.x),Math.sign(this.gameObject.transform.scale.y)),this.processTilemap(),this.updateTilesPosition()},e.prototype.update=function(){var t=this;this.tilesRenderData.forEach((function(e){return t.renderManager.addToRenderStack(e)}))},e.prototype.processTile=function(t,e,n,r,o){void 0===r&&(r=1),void 0===o&&(o={h:!1,v:!1});var i=this.createRenderData(t,e,n,r,o);this.updateSizeInfo(e+1,n+1),this.tilesRenderData.push(i)},e.prototype.createRenderData=function(t,e,n,r,o){void 0===r&&(r=1),void 0===o&&(o={h:!1,v:!1});var i=new a.ImageRenderData;return i.position.set(this.gameObject.transform.position.x+e*this.tileWidth*this.orientation.x+this.tileWidth*this.orientation.x/2,this.gameObject.transform.position.y-n*this.tileHeight*this.orientation.y-this.tileHeight*this.orientation.y/2),i.ui=!1,i.image=this.tileset.image,i.layer=this.gameObject.layer,i.width=this.tileWidth,i.height=this.tileHeight,i.slice=t,i.smooth=this.smooth,i.alpha=r,i.flipHorizontal=o.h!==this.orientation.x<0,i.flipVertical=o.v!==this.orientation.y<0,i},e.prototype.updateSizeInfo=function(t,e){this._width<t&&(this._width=t,this._realWidth+=this.tileWidth),this._height<e&&(this._height=e,this._realHeight+=this.tileHeight)},e.prototype.updateTilesPosition=function(){var t=this;this.tilesRenderData.forEach((function(e){e.position.set(e.position.x-Math.round(t._realWidth/2)*t.orientation.x,e.position.y+Math.round(t._realHeight/2)*t.orientation.y),t.addTileData(e)}))},e.prototype.addTileData=function(t){this.tiles.push(new s.TileData(t.position,t.width,t.height))},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realWidth",{get:function(){return this._realWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return this._realHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilesData",{get:function(){return this.tiles},enumerable:!1,configurable:!0}),e}(i.RenderComponent);e.TilemapRenderer=f},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(4),o=n(39),i="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(6),o=n(4),i=n(88);t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(5),o=n(11),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var r=n(51),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return o.call(t)}),t.exports=r.inspectSource},function(t,e,n){var r=n(7),o=n(91),i=n(33),a=n(13);t.exports=function(t,e){for(var n=o(e),u=a.f,c=i.f,s=0;s<n.length;s++){var f=n[s];r(t,f)||u(t,f,c(e,f))}}},function(t,e,n){var r=n(35),o=n(54),i=n(94),a=n(26);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(5);t.exports=r},function(t,e,n){var r=n(7),o=n(27),i=n(154).indexOf,a=n(45);t.exports=function(t,e){var n,u=o(t),c=0,s=[];for(n in u)!r(a,n)&&r(u,n)&&s.push(n);for(;e.length>c;)r(u,n=e[c++])&&(~i(s,n)||s.push(n));return s}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(57);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var r=n(6),o=n(13),i=n(26),a=n(59);t.exports=r?Object.defineProperties:function(t,e){i(t);for(var n,r=a(e),u=r.length,c=0;u>c;)o.f(t,n=r[c++],e[n]);return t}},function(t,e,n){var r=n(9);e.f=r},function(t,e,n){var r=n(92),o=n(7),i=n(97),a=n(13).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},function(t,e,n){var r=n(11),o=n(58),i=n(9)("species");t.exports=function(t,e){var n;return o(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){"use strict";var r=n(3),o=n(161),i=n(63),a=n(103),u=n(60),c=n(25),s=n(30),f=n(9),l=n(44),h=n(62),p=n(101),d=p.IteratorPrototype,y=p.BUGGY_SAFARI_ITERATORS,g=f("iterator"),m=function(){return this};t.exports=function(t,e,n,f,p,v,b){o(n,e,f);var _,M,w,x=function(t){if(t===p&&E)return E;if(!y&&t in P)return P[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},O=e+" Iterator",j=!1,P=t.prototype,R=P[g]||P["@@iterator"]||p&&P[p],E=!y&&R||x(p),T="Array"==e&&P.entries||R;if(T&&(_=i(T.call(new t)),d!==Object.prototype&&_.next&&(l||i(_)===d||(a?a(_,d):"function"!=typeof _[g]&&c(_,g,m)),u(_,O,!0,!0),l&&(h[O]=m))),"values"==p&&R&&"values"!==R.name&&(j=!0,E=function(){return R.call(this)}),l&&!b||P[g]===E||c(P,g,E),h[e]=E,p)if(M={values:x("values"),keys:v?E:x("keys"),entries:x("entries")},b)for(w in M)(y||j||!(w in P))&&s(P,w,M[w]);else r({target:e,proto:!0,forced:y||j},M);return M}},function(t,e,n){"use strict";var r,o,i,a=n(63),u=n(25),c=n(7),s=n(9),f=n(44),l=s("iterator"),h=!1;[].keys&&("next"in(i=[].keys())?(o=a(a(i)))!==Object.prototype&&(r=o):h=!0),null==r&&(r={}),f||c(r,l)||u(r,l,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},function(t,e,n){var r=n(4);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){var r=n(26),o=n(162);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return r(n),o(i),e?t.call(n,i):n.__proto__=i,n}}():void 0)},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){"use strict";var r=n(3),o=n(46).map,i=n(66),a=n(67),u=i("map"),c=a("map");r({target:"Array",proto:!0,forced:!u||!c},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r,o,i=n(5),a=n(169),u=i.process,c=u&&u.versions,s=c&&c.v8;s?o=(r=s.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=r[1]),t.exports=o&&+o},function(t,e,n){"use strict";var r=n(3),o=n(4),i=n(58),a=n(11),u=n(31),c=n(55),s=n(108),f=n(99),l=n(66),h=n(9),p=n(106),d=h("isConcatSpreadable"),y=p>=51||!o((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),g=l("concat"),m=function(t){if(!a(t))return!1;var e=t[d];return void 0!==e?!!e:i(t)};r({target:"Array",proto:!0,forced:!y||!g},{concat:function(t){var e,n,r,o,i,a=u(this),l=f(a,0),h=0;for(e=-1,r=arguments.length;e<r;e++)if(m(i=-1===e?a:arguments[e])){if(h+(o=c(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,h++)n in i&&s(l,h,i[n])}else{if(h>=9007199254740991)throw TypeError("Maximum allowed index exceeded");s(l,h++,i)}return l.length=h,l}})},function(t,e,n){"use strict";var r=n(41),o=n(13),i=n(34);t.exports=function(t,e,n){var a=r(e);a in t?o.f(t,a,i(0,n)):t[a]=n}},function(t,e,n){"use strict";var r=n(46).forEach,o=n(172),i=n(67),a=o("forEach"),u=i("forEach");t.exports=a&&u?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,n){"use strict";var r;n.r(e),n.d(e,"v1",(function(){return y})),n.d(e,"v3",(function(){return j})),n.d(e,"v4",(function(){return P})),n.d(e,"v5",(function(){return T})),n.d(e,"NIL",(function(){return S})),n.d(e,"version",(function(){return C})),n.d(e,"validate",(function(){return u})),n.d(e,"stringify",(function(){return h})),n.d(e,"parse",(function(){return g}));var o=new Uint8Array(16);function i(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=function(t){return"string"==typeof t&&a.test(t)},c=[],s=0;s<256;++s)c.push((s+256).toString(16).substr(1));var f,l,h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!u(n))throw TypeError("Stringified UUID is invalid");return n},p=0,d=0;var y=function(t,e,n){var r=e&&n||0,o=e||new Array(16),a=(t=t||{}).node||f,u=void 0!==t.clockseq?t.clockseq:l;if(null==a||null==u){var c=t.random||(t.rng||i)();null==a&&(a=f=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==u&&(u=l=16383&(c[6]<<8|c[7]))}var s=void 0!==t.msecs?t.msecs:Date.now(),y=void 0!==t.nsecs?t.nsecs:d+1,g=s-p+(y-d)/1e4;if(g<0&&void 0===t.clockseq&&(u=u+1&16383),(g<0||s>p)&&void 0===t.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=s,d=y,l=u;var m=(1e4*(268435455&(s+=122192928e5))+y)%4294967296;o[r++]=m>>>24&255,o[r++]=m>>>16&255,o[r++]=m>>>8&255,o[r++]=255&m;var v=s/4294967296*1e4&268435455;o[r++]=v>>>8&255,o[r++]=255&v,o[r++]=v>>>24&15|16,o[r++]=v>>>16&255,o[r++]=u>>>8|128,o[r++]=255&u;for(var b=0;b<6;++b)o[r+b]=a[b];return e||h(o)};var g=function(t){if(!u(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n};var m=function(t,e,n){function r(t,r,o,i){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof r&&(r=g(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+t.length);if(a.set(r),a.set(t,r.length),(a=n(a))[6]=15&a[6]|e,a[8]=63&a[8]|128,o){i=i||0;for(var u=0;u<16;++u)o[i+u]=a[u];return o}return h(a)}try{r.name=t}catch(t){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r};function v(t){return 14+(t+64>>>9<<4)+1}function b(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function _(t,e,n,r,o,i){return b((a=b(b(e,t),b(r,i)))<<(u=o)|a>>>32-u,n);var a,u}function M(t,e,n,r,o,i,a){return _(e&n|~e&r,t,e,o,i,a)}function w(t,e,n,r,o,i,a){return _(e&r|n&~r,t,e,o,i,a)}function x(t,e,n,r,o,i,a){return _(e^n^r,t,e,o,i,a)}function O(t,e,n,r,o,i,a){return _(n^(e|~r),t,e,o,i,a)}var j=m("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){for(var e=[],n=32*t.length,r=0;r<n;r+=8){var o=t[r>>5]>>>r%32&255,i=parseInt("0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o),16);e.push(i)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[v(e)-1]=e;for(var n=1732584193,r=-271733879,o=-1732584194,i=271733878,a=0;a<t.length;a+=16){var u=n,c=r,s=o,f=i;n=M(n,r,o,i,t[a],7,-680876936),i=M(i,n,r,o,t[a+1],12,-389564586),o=M(o,i,n,r,t[a+2],17,606105819),r=M(r,o,i,n,t[a+3],22,-1044525330),n=M(n,r,o,i,t[a+4],7,-176418897),i=M(i,n,r,o,t[a+5],12,1200080426),o=M(o,i,n,r,t[a+6],17,-1473231341),r=M(r,o,i,n,t[a+7],22,-45705983),n=M(n,r,o,i,t[a+8],7,1770035416),i=M(i,n,r,o,t[a+9],12,-1958414417),o=M(o,i,n,r,t[a+10],17,-42063),r=M(r,o,i,n,t[a+11],22,-1990404162),n=M(n,r,o,i,t[a+12],7,1804603682),i=M(i,n,r,o,t[a+13],12,-40341101),o=M(o,i,n,r,t[a+14],17,-1502002290),r=M(r,o,i,n,t[a+15],22,1236535329),n=w(n,r,o,i,t[a+1],5,-165796510),i=w(i,n,r,o,t[a+6],9,-1069501632),o=w(o,i,n,r,t[a+11],14,643717713),r=w(r,o,i,n,t[a],20,-373897302),n=w(n,r,o,i,t[a+5],5,-701558691),i=w(i,n,r,o,t[a+10],9,38016083),o=w(o,i,n,r,t[a+15],14,-660478335),r=w(r,o,i,n,t[a+4],20,-405537848),n=w(n,r,o,i,t[a+9],5,568446438),i=w(i,n,r,o,t[a+14],9,-1019803690),o=w(o,i,n,r,t[a+3],14,-187363961),r=w(r,o,i,n,t[a+8],20,1163531501),n=w(n,r,o,i,t[a+13],5,-1444681467),i=w(i,n,r,o,t[a+2],9,-51403784),o=w(o,i,n,r,t[a+7],14,1735328473),r=w(r,o,i,n,t[a+12],20,-1926607734),n=x(n,r,o,i,t[a+5],4,-378558),i=x(i,n,r,o,t[a+8],11,-2022574463),o=x(o,i,n,r,t[a+11],16,1839030562),r=x(r,o,i,n,t[a+14],23,-35309556),n=x(n,r,o,i,t[a+1],4,-1530992060),i=x(i,n,r,o,t[a+4],11,1272893353),o=x(o,i,n,r,t[a+7],16,-155497632),r=x(r,o,i,n,t[a+10],23,-1094730640),n=x(n,r,o,i,t[a+13],4,681279174),i=x(i,n,r,o,t[a],11,-358537222),o=x(o,i,n,r,t[a+3],16,-722521979),r=x(r,o,i,n,t[a+6],23,76029189),n=x(n,r,o,i,t[a+9],4,-640364487),i=x(i,n,r,o,t[a+12],11,-421815835),o=x(o,i,n,r,t[a+15],16,530742520),r=x(r,o,i,n,t[a+2],23,-995338651),n=O(n,r,o,i,t[a],6,-198630844),i=O(i,n,r,o,t[a+7],10,1126891415),o=O(o,i,n,r,t[a+14],15,-1416354905),r=O(r,o,i,n,t[a+5],21,-57434055),n=O(n,r,o,i,t[a+12],6,1700485571),i=O(i,n,r,o,t[a+3],10,-1894986606),o=O(o,i,n,r,t[a+10],15,-1051523),r=O(r,o,i,n,t[a+1],21,-2054922799),n=O(n,r,o,i,t[a+8],6,1873313359),i=O(i,n,r,o,t[a+15],10,-30611744),o=O(o,i,n,r,t[a+6],15,-1560198380),r=O(r,o,i,n,t[a+13],21,1309151649),n=O(n,r,o,i,t[a+4],6,-145523070),i=O(i,n,r,o,t[a+11],10,-1120210379),o=O(o,i,n,r,t[a+2],15,718787259),r=O(r,o,i,n,t[a+9],21,-343485551),n=b(n,u),r=b(r,c),o=b(o,s),i=b(i,f)}return[n,r,o,i]}(function(t){if(0===t.length)return[];for(var e=8*t.length,n=new Uint32Array(v(e)),r=0;r<e;r+=8)n[r>>5]|=(255&t[r/8])<<r%32;return n}(t),8*t.length))}));var P=function(t,e,n){var r=(t=t||{}).random||(t.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=r[o];return e}return h(r)};function R(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function E(t,e){return t<<e|t>>>32-e}var T=m("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var r=unescape(encodeURIComponent(t));t=[];for(var o=0;o<r.length;++o)t.push(r.charCodeAt(o))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,a=Math.ceil(i/16),u=new Array(a),c=0;c<a;++c){for(var s=new Uint32Array(16),f=0;f<16;++f)s[f]=t[64*c+4*f]<<24|t[64*c+4*f+1]<<16|t[64*c+4*f+2]<<8|t[64*c+4*f+3];u[c]=s}u[a-1][14]=8*(t.length-1)/Math.pow(2,32),u[a-1][14]=Math.floor(u[a-1][14]),u[a-1][15]=8*(t.length-1)&4294967295;for(var l=0;l<a;++l){for(var h=new Uint32Array(80),p=0;p<16;++p)h[p]=u[l][p];for(var d=16;d<80;++d)h[d]=E(h[d-3]^h[d-8]^h[d-14]^h[d-16],1);for(var y=n[0],g=n[1],m=n[2],v=n[3],b=n[4],_=0;_<80;++_){var M=Math.floor(_/20),w=E(y,5)+R(M,g,m,v)+b+e[M]+h[_]>>>0;b=v,v=m,m=E(g,30)>>>0,g=y,y=w}n[0]=n[0]+y>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+m>>>0,n[3]=n[3]+v>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),S="00000000-0000-0000-0000-000000000000";var C=function(t){if(!u(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},function(t){t.exports=JSON.parse('{"compressionlevel":-1,"editorsettings":{"export":{"format":"json","target":"Tilemap01.json"}},"height":105,"infinite":true,"layers":[{"chunks":[{"data":[8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,20,20,20,10,11,12,20,20,10,11,12,20,20,10,11,12,20,20,20,22,20,24,20,20,22,20,24,20,20,22,20,24,20,20,20,34,35,36,20,20,34,35,36,20,20,34,35,36,20,10,32,32,32,32,32,32,32,32,32,32,32,32,32,32,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,21,0,0,0,0,0,0,0,0,0,0,0,0,0,1,20,21,0,0,0,0,0,0,0,0,0,0,1,2,2,30,2,2,2,2,2,2,2,2,2,2,2,2,30,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],"height":16,"width":16,"x":0,"y":0},{"data":[8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,20,20,10,11,12,20,20,10,11,12,20,20,10,11,12,20,20,20,22,20,24,20,20,22,20,24,20,20,22,20,24,20,20,20,34,35,36,20,20,34,35,36,20,20,34,35,36,20,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,44,2,2,44,2,44,2,2,3,0,0,0,0,0,0,14,14,14,14,14,14,14,14,14,15,0,43,45,0,0,0,14,14,14,14,14,14,14,14,14,15,0,0,0,0,43,45,14,14,14,14,14,14,14,14,14,15,0,0,0,0,0,0,14,14,14,14,14,14,14,14,14,28,2,2,2,2,2,2],"height":16,"width":16,"x":16,"y":0},{"data":[8,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,20,10,11,12,20,20,0,0,0,0,0,0,0,0,0,0,20,22,20,24,20,20,0,0,0,0,0,0,0,0,0,0,20,34,35,36,20,20,0,0,0,0,0,0,0,0,0,0,32,32,32,32,12,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,20,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,3,0,0,0,0,0,0,0,0,0,0],"height":16,"width":16,"x":32,"y":0},{"data":[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":16,"width":16,"x":0,"y":16},{"data":[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":16,"width":16,"x":16,"y":16},{"data":[14,14,14,14,14,15,0,0,0,0,0,0,0,0,0,0,14,14,14,14,14,15,0,0,0,0,0,0,0,0,0,0,14,14,14,14,14,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"height":16,"width":16,"x":32,"y":16}],"height":32,"id":1,"name":"Tile Layer 1","opacity":1,"startx":0,"starty":0,"type":"tilelayer","visible":true,"width":48,"x":0,"y":0}],"nextlayerid":2,"nextobjectid":1,"orientation":"orthogonal","renderorder":"right-down","tiledversion":"1.4.2","tileheight":16,"tilesets":[{"firstgid":1,"source":"../../../../Tiled Projects/Mini Platformer/Tileset01.tsx"}],"tilewidth":16,"type":"map","version":1.4,"width":116}')},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadDependencies=void 0;var r=n(113),o=n(114),i=n(119),a=n(120),u=n(71),c=n(121),s=n(72),f=n(73),l=n(122),h=n(123),p=n(124),d=n(127),y=n(128),g=n(129),m=n(48),v=n(130),b=n(131),_=n(132);e.loadDependencies=function(t,e){t.add("DomManager",(function(){return new i.DomManager(e.config.containerNode,e.config.gameWidth,e.config.gameHeight)}));var n=t.getSingleton("DomManager");M(t,e,n),x(t,n),t.add("SceneManager",(function(){return new v.SceneManager(e,t.getSingleton("RenderManager"))})),t.add("CollisionManager",(function(){return new o.CollisionManager(t.getSingleton("RenderManager"))})),t.add("GameObjectManager",(function(){return new a.GameObjectManager})),t.add("AssetManager",(function(){return new r.AssetManager})),t.add("TimeManager",(function(){return new b.TimeManager}))};var M=function(t,e,n){var r=O();"default"===e.config.context2d||"fallback"===e.config.context2d&&!1===r?t.add("Renderer",(function(){return new l.Context2DRenderer(n.canvas)})):!0===r?w(t,n):console.error("WebGL is not supported, use context2d instead."),t.add("RenderManager",(function(){return new h.RenderManager(t.getSingleton("Renderer"))}))},w=function(t,e){t.add("ShaderLoader",(function(){return new y.ShaderLoader})),t.add("ProgramFactory",(function(){return new d.ProgramFactory(t.getSingleton("ShaderLoader"))})),t.add("TextureFactory",(function(){return new g.TextureFactory(e.canvas)})),t.add("TextureManager",(function(){return new _.TextureManager(t.getSingleton("TextureFactory"))})),t.add("WebGLImageRenderer",(function(){return new p.WebGLImageRenderer(e.canvas)})),t.add("Renderer",(function(){return new m.WebGLRenderer(e.canvas,t.getSingleton("ProgramFactory"),t.getSingleton("TextureManager"),t.getSingleton("WebGLImageRenderer"))}))},x=function(t,e){t.add("Mouse",(function(){return new f.MouseController(e.canvas)})),t.add("Keyboard",(function(){return new s.KeyboardController})),t.add("Gamepad",(function(){return new u.GamepadController})),t.add("InputManager",(function(){return new c.InputManager(t.getSingleton("Mouse"),t.getSingleton("Keyboard"),t.getSingleton("Gamepad"))}))},O=function(){return null!==document.createElement("canvas").getContext(m.WEBGL_CONTEXT_NAME)}},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.AssetManager=e.AssetType=void 0,function(t){t.Image="Image",t.Audio="Audio",t.Video="Video"}(r=e.AssetType||(e.AssetType={}));var o=function(){this.type=null,this.url=null,this.loaded=!1,this.element=null},i=function(){function t(){this.assets=[]}return t.prototype.getAssetsLoaded=function(){return this.assets.reduce((function(t,e){return t&&e.loaded}),!0)},t.prototype.createImage=function(t){var e=this.createAsset(t,r.Image);return e.element=new Image,e.element.src=t,e.element.naturalWidth?e.loaded=!0:e.element.addEventListener("load",(function(){return e.loaded=!0})),e.element},t.prototype.createAudio=function(t){var e=this.createAsset(t,r.Audio);return e.element=new Audio,e.element.src=t,e.element.duration?e.loaded=!0:e.element.addEventListener("canplaythrough",(function(){return e.loaded=!0})),e.element},t.prototype.createVideo=function(t){var e=this.createAsset(t,r.Video);return e.element=document.createElement("video"),e.element.src=t,e.element.duration?e.loaded=!0:e.element.addEventListener("canplaythrough",(function(){return e.loaded=!0})),e.element},t.prototype.getImage=function(t){return this.getAsset(t,r.Image)},t.prototype.getVideo=function(t){return this.getAsset(t,r.Video)},t.prototype.getAudio=function(t){return this.getAsset(t,r.Audio)},t.prototype.getAsset=function(t,e){return void 0===e&&(e=null),this.assets.reduce((function(n,r){return r.url!==t||null!==e&&e!==r.type?n:r}),null).element},t.prototype.createAsset=function(t,e){var n=new o;return n.type=e,n.url=t,this.assets.push(n),n},t}();e.AssetManager=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CollisionManager=void 0;var r=n(69),o=n(38),i=n(32),a=n(1),u=n(115),c=n(116),s=function(){function t(t){this.debug=!1,this.colliders=[],this.satResolver=new c.SatResolver,this.renderManager=t,this.quad=new u.QuadTree(0,new i.Rectangle(-2500,-2500,5e3,5e3))}return t.prototype.prepare=function(){!0===this.debug&&this.debugQuads(this.quad),this.refreshQuad()},t.prototype.addCollider=function(t){this.colliders.push(t)},t.prototype.removeCollider=function(t){var e=this.colliders.indexOf(t);-1!==e&&(delete this.colliders[e],this.colliders.splice(e,1))},t.prototype.getCollisionsForCollider=function(t){var e=this.broadPhase(t);return this.narrowPhase(t,e)},t.prototype.broadPhase=function(t){return this.quad.retrieve(t)},t.prototype.narrowPhase=function(t,e){for(var n=[],r=0,o=e;r<o.length;r++){var i=o[r],a=this.satResolver.getSatData(t.shape,i.shape);null!==a&&n.push({localCollider:t,remoteCollider:i,collisionData:a})}return n},t.prototype.refreshQuad=function(){this.quad.clear();for(var t=0,e=this.colliders;t<e.length;t++){var n=e[t];this.quad.insert(n)}},t.prototype.debugQuads=function(t){var e=new r.GeometricRenderData;e.debug=!0,e.position=new a.Vector2(t.bounds.x,t.bounds.y),e.layer=o.LAYER_DEFAULT,e.geometric=t.bounds,e.geometricType=r.GEOMETRIC_RECTANGLE,e.color="#0000FF",this.renderManager.addToRenderStack(e);for(var n=0,i=t.quadrants;n<i.length;n++){var u=i[n];this.debugQuads(u)}},t}();e.CollisionManager=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuadTree=void 0;var r=n(1),o=n(32),i=function(){function t(t,e){this.maxColliders=20,this.maxLevels=5,this.sw=0,this.se=1,this.nw=2,this.ne=3,this.colliders=[],this.quadrants=[],this.level=t,this.bounds=e}return t.prototype.insert=function(t){this.hasQuadChildren()?this.insertColliderIntoChildrenQuads(t):(this.colliders.push(t),this.isQuadFull()&&this.level<this.maxLevels&&this.splitQuad())},t.prototype.retrieve=function(t){var e=[];if(this.hasQuadChildren())for(var n=0,r=this.getChildrenQuadrantForCollider(t);n<r.length;n++){var o=r[n];e.push.apply(e,o.retrieve(t))}e.push.apply(e,this.colliders);var i=e.indexOf(t);return-1!==i&&e.splice(i,1),e},t.prototype.clear=function(){for(var t=0,e=this.quadrants;t<e.length;t++){e[t].clear()}this.colliders=[],this.quadrants=[]},t.prototype.splitQuad=function(){var e=this.getQuadrantMidPoint(),n=e.x,r=e.y,i=this.level+1,a=this.bounds.width/2,u=this.bounds.height/2;this.quadrants=[new t(i,new o.Rectangle(n-a,r-u,a,u)),new t(i,new o.Rectangle(n,r-u,a,u)),new t(i,new o.Rectangle(n-a,r,a,u)),new t(i,new o.Rectangle(n,r,a,u))];for(var c=0,s=this.colliders;c<s.length;c++){var f=s[c];this.insertColliderIntoChildrenQuads(f)}this.colliders=[]},t.prototype.getChildrenQuadrantForCollider=function(t){if(0===this.quadrants.length)throw new Error("Current quadrant does not have quadrant children.");var e=this.getQuadrantMidPoint(),n=e.x,r=e.y,o=[];if(t.bottomLeftQuadVertex.x<=n&&t.bottomLeftQuadVertex.y<=r&&o.push(this.quadrants[this.sw]),t.bottomRightQuadvertex.x>=n&&t.bottomRightQuadvertex.y<=r&&o.push(this.quadrants[this.se]),t.topLeftQuadVertex.x<=n&&t.topLeftQuadVertex.y>=r&&o.push(this.quadrants[this.nw]),t.topRightQuadVertex.x>=n&&t.topRightQuadVertex.y>=r&&o.push(this.quadrants[this.ne]),0===o.length)throw new Error("Children does not fit in any children quadrant");return o},t.prototype.insertColliderIntoChildrenQuads=function(t){for(var e=0,n=this.getChildrenQuadrantForCollider(t);e<n.length;e++){n[e].insert(t)}},t.prototype.getQuadrantMidPoint=function(){return new r.Vector2(this.bounds.width/2+this.bounds.x,this.bounds.height/2+this.bounds.y)},t.prototype.hasQuadChildren=function(){return this.quadrants.length>0},t.prototype.isQuadFull=function(){return this.colliders.length>this.maxColliders},t}();e.QuadTree=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SatResolver=void 0;var r=n(1),o=n(47),i=n(117),a=n(118),u=function(){function t(){}return t.prototype.getSatData=function(t,e){this.currentOverlap=null,this.vertexShape=null;for(var n=null,o=null,a=this.findAxes(t,e),u=this.getShapeAxes(t),c=0;c<a.length;c++){var s=this.projShapeOntoAxis(a[c],t),f=this.projShapeOntoAxis(a[c],e);if(this.currentOverlap=Math.min(s.max,f.max)-Math.max(s.min,f.min),this.currentOverlap<0)return null;if(s.max>f.max&&s.min<f.min||s.max<f.max&&s.min>f.min){var l=Math.abs(s.min-f.min),h=Math.abs(s.max-f.max);l<h?this.currentOverlap+=l:(this.currentOverlap+=h,r.Vector2.scale(a[c],a[c],-1))}(this.currentOverlap<n||null===n)&&(n=this.currentOverlap,o=a[c],c<u?(this.vertexShape=e,s.max>f.max&&r.Vector2.scale(o,a[c],-1)):(this.vertexShape=t,s.max<f.max&&r.Vector2.scale(o,a[c],-1)))}var p=this.projShapeOntoAxis(o,this.vertexShape).collisionVertex;return this.vertexShape===e&&r.Vector2.scale(o,o,-1),new i.SatData(n,o,p)},t.prototype.findAxes=function(t,e){var n=[];return t.type===o.ShapeType.Rectangle&&(n.push(r.Vector2.normal(new r.Vector2,t.direction)),n.push(t.direction)),e.type===o.ShapeType.Rectangle&&(n.push(r.Vector2.normal(new r.Vector2,t.direction)),n.push(e.direction)),n},t.prototype.getShapeAxes=function(t){if(t.type===o.ShapeType.Rectangle)return 2},t.prototype.projShapeOntoAxis=function(t,e){for(var n=r.Vector2.dot(t,e.vertex[0]),o=n,i=e.vertex[0],u=0;u<e.vertex.length;u++){var c=r.Vector2.dot(t,e.vertex[u]);c<n&&(n=c,i=e.vertex[u]),c>o&&(o=c)}return new a.ShapeAxisProjection(n,o,i)},t}();e.SatResolver=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SatData=void 0;var r=n(1),o=function(){function t(t,e,n){this._direction=new r.Vector2,this._contactVertex=new r.Vector2,this._penetration=t,this._direction.set(e.x,e.y),this._contactVertex.set(n.x,n.y)}return Object.defineProperty(t.prototype,"penetration",{get:function(){return this._penetration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contactVertex",{get:function(){return this._contactVertex},enumerable:!1,configurable:!0}),t}();e.SatData=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeAxisProjection=void 0;var r=n(1),o=function(){function t(t,e,n){this._collisionVertex=new r.Vector2,this._min=t,this._max=e,this._collisionVertex.set(n.x,n.y)}return Object.defineProperty(t.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collisionVertex",{get:function(){return this._collisionVertex},enumerable:!1,configurable:!0}),t}();e.ShapeAxisProjection=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DomManager=void 0;var r=function(){function t(t,e,n){this._canvas=null,this.containerNode=t,this.gameWidth=e,this.gameHeight=n,this.setupCanvas()}return Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),t.prototype.setupCanvas=function(){this._canvas=document.createElement("canvas"),this._canvas.id="miniEngineGameCanvas",this._canvas.width=Math.floor(this.gameWidth),this._canvas.height=Math.floor(this.gameHeight),this._canvas.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.containerNode.appendChild(this._canvas)},t}();e.DomManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameObjectManager=void 0;var r=function(){function t(){this.gameObjects=[]}return t.prototype.addGameObject=function(t,e,n){if(void 0===n&&(n=null),this.findGameObjectByName(e))throw new Error("There is already a GameObject with the name "+e);var r=t();return r.name=e,r.parent=n,this.gameObjects.push(r),r},t.prototype.getGameObjects=function(){return this.gameObjects},t.prototype.findGameObjectByUuid=function(t){return this.gameObjects.reduce((function(e,n){return n.uuid===t?n:e}),null)},t.prototype.findGameObjectByName=function(t){return this.gameObjects.reduce((function(e,n){return n.name===t?n:e}),null)},t.prototype.findGameObjectsByParent=function(t){return this.gameObjects.filter((function(e){return e.parent===t}))},t.prototype.findGameObjectByParentAndName=function(t,e){return this.gameObjects.reduce((function(n,r){return r.name===e&&r.parent===t?r:n}),null)},t.prototype.findGameObjectsByTag=function(t){return this.gameObjects.filter((function(e){return e.tag===t}))},t.prototype.findGameObjectByTag=function(t){var e;return null!==(e=this.findGameObjectsByTag(t)[0])&&void 0!==e?e:null},t.prototype.destroyAllGameObjects=function(){var t=this;this.gameObjects.forEach((function(e){return t._destroyGameObject(e,!1)})),this.gameObjects=[]},t.prototype.destroyGameObject=function(t){this._destroyGameObject(t,!0)},t.prototype._destroyGameObject=function(t,e){var n=this.gameObjects.indexOf(t);-1!==n&&(e&&this.destroyChildren(t),t.destroy(),delete this.gameObjects[n])},t.prototype.destroyChildren=function(t){var e=this;this.findGameObjectsByParent(t).forEach((function(t){e.destroyChildren(t),e.destroyGameObject(t)}))},t}();e.GameObjectManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InputManager=void 0;var r=function(t,e,n){this.mouse=t,this.keyboard=e,this.gamepad=n};e.InputManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context2DRenderer=void 0;var r=n(1),o=n(47),i=n(69),a=n(29),u=function(){function t(t){this.canvas=null,this.canvasContext=null,this.imagePosition=new r.Vector2(0,0),this.canvas=t,this.canvasContext=t.getContext("2d")}return t.prototype.clearCanvas=function(t){void 0===t&&(t=null),this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height),null!==t&&(this.canvasContext.fillStyle=t,this.canvasContext.fillRect(0,0,this.canvas.width,this.canvas.height))},t.prototype.render=function(t,e){e.type===a.RenderDataType.Image&&this.renderImage(e,t.zoom),e.type===a.RenderDataType.Text&&this.renderText(e),e.type===a.RenderDataType.Geometric&&this.renderGeometric(e),e.type===a.RenderDataType.Collider&&this.renderCollider(e,t.zoom)},t.prototype.renderImage=function(t,e){this.updateRenderPosition(t),this.imagePosition.set(0,0),this.canvasContext.save(),!0!==t.ui&&this.canvasContext.setTransform(e,0,0,e,this.canvas.width*(1-e)/2,this.canvas.height*(1-e)/2),t.rotation?(this.canvasContext.translate(t.positionInViewport.x+t.width/2,t.positionInViewport.y+t.height/2),this.imagePosition.set(-t.width/2,-t.height/2),this.canvasContext.rotate(-t.rotation*Math.PI/180)):(this.canvasContext.translate(t.positionInViewport.x,t.positionInViewport.y),this.imagePosition.set(t.flipHorizontal?-t.width:this.imagePosition.x,t.flipVertical?-t.height:this.imagePosition.y)),this.canvasContext.imageSmoothingEnabled=t.smooth,this.canvasContext.scale(t.flipHorizontal?-1:1,t.flipVertical?-1:1),void 0!==t.slice&&null!==t.slice?this.canvasContext.drawImage(t.image,t.slice.x,t.slice.y,t.slice.width,t.slice.height,this.imagePosition.x,this.imagePosition.y,t.width,t.height):this.canvasContext.drawImage(t.image,this.imagePosition.x,this.imagePosition.y,t.width,t.height),this.canvasContext.restore()},t.prototype.renderText=function(t){var e=this;this.updateRenderPosition(t),this.canvasContext.save();var n=[t.bold?"bold":"",t.italic?"italic":"",t.textSize+"px",t.font];this.canvasContext.font=n.join(" "),this.canvasContext.fillStyle=t.color,this.canvasContext.textBaseline="middle",Array.isArray(t.text)?t.text.forEach((function(n,r){e.canvasContext.fillText(n,t.positionInViewport.x,t.positionInViewport.y+(t.lineSeparation+t.textSize)*r)})):this.canvasContext.fillText(t.text,t.positionInViewport.x,t.positionInViewport.y),this.canvasContext.restore()},t.prototype.renderGeometric=function(t){switch(this.canvasContext.save(),this.updateRenderPosition(t),t.geometricType){case i.GEOMETRIC_RECTANGLE:this.canvasContext.strokeStyle=t.color,this.canvasContext.strokeRect(t.positionInViewport.x,t.positionInViewport.y,t.geometric.width,t.geometric.height);break;case i.GEOMETRIC_POLYGON:}this.canvasContext.restore()},t.prototype.renderCollider=function(t,e){var n=this;this.canvasContext.save(),!0!==t.ui&&this.canvasContext.setTransform(e,0,0,e,this.canvas.width*(1-e)/2,this.canvas.height*(1-e)/2),this.updateRenderPosition(t),this.canvasContext.beginPath(),this.canvasContext.strokeStyle=t.color;var r=t.shape.clone();switch(r.position=t.positionInViewport,r.update(),r.type){case o.ShapeType.Rectangle:this.canvasContext.moveTo(r.vertex[0].x,r.vertex[0].y),[1,2,3,0].forEach((function(t){n.canvasContext.lineTo(r.vertex[t].x,r.vertex[t].y)}))}this.canvasContext.strokeStyle=t.color,this.canvasContext.stroke(),this.canvasContext.closePath(),this.canvasContext.restore()},t.prototype.updateRenderPosition=function(t){t.type===a.RenderDataType.Image&&this.centerImage(t),t.positionInViewport.set(Number((t.positionInViewport.x+this.canvas.width/2).toFixed(0)),Number((this.canvas.height/2-t.positionInViewport.y).toFixed(0)))},t.prototype.centerImage=function(t){t.positionInViewport.set(t.positionInViewport.x-Math.floor(t.width/2),t.positionInViewport.y+Math.floor(t.height/2))},t}();e.Context2DRenderer=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RenderManager=void 0;var r=n(32),o=function(){function t(t){this.gameRenderer=null,this.renderStack=[],this.cameras=[],this.cacheRect=new r.Rectangle(0,0,0,0),this.gameRenderer=t}return t.prototype.clearCanvas=function(t){void 0===t&&(t=null),this.gameRenderer.clearCanvas(t)},t.prototype.addToRenderStack=function(t){this.renderStack.push(t)},t.prototype.addCameraData=function(t){this.cameras.push(t)},t.prototype.render=function(){var t=this;this.cameras.sort((function(t,e){return t.depth-e.depth})).forEach((function(e){return t.renderByCamera(e)})),this.clear()},t.prototype.clear=function(){this.renderStack=[],this.cameras=[]},t.prototype.renderByCamera=function(t){var e=this;this.renderStack.forEach((function(n){!1!==t.layers.includes(n.layer)&&(e.setPositionInViewport(t,n),!0===n.ui?e.gameRenderer.render(t,n):!0===n.debug||!1!==e.isInsideViewportRect(t,n)&&e.gameRenderer.render(t,n))}))},t.prototype.setPositionInViewport=function(t,e){!0!==e.ui?e.positionInViewport.set(Number((e.position.x-t.worldSpaceRect.x-t.worldSpaceRect.width/2).toFixed(0)),Number((e.position.y-t.worldSpaceRect.y-t.worldSpaceRect.height/2).toFixed(0))):e.positionInViewport=e.position},t.prototype.isInsideViewportRect=function(t,e){return this.cacheRect.set(e.positionInViewport.x-e.width/2,e.positionInViewport.y-e.height/2,e.width,e.height),t.viewportRect.overlappingRectangle(this.cacheRect)},t}();e.RenderManager=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLImageRenderer=void 0;var r=n(182),o=n(48),i=function(){function t(t){this.lastTexture=null,this.gl=t.getContext(o.WEBGL_CONTEXT_NAME),this.projectionMatrix=r.mat4.create(),this.modelMatrix=r.mat4.create(),this.textureMatrix=r.mat4.create()}return t.prototype.setProgram=function(t){this.program=t,this.positionBuffer=this.gl.createBuffer(),this.textureBuffer=this.gl.createBuffer(),this.positionCoordsAttr=this.gl.getAttribLocation(this.program,"positionCoords"),this.texCoordsAttr=this.gl.getAttribLocation(this.program,"textureCoords"),this.modelMatrixUniform=this.gl.getUniformLocation(this.program,"modelMatrix"),this.projectionMatrixUniform=this.gl.getUniformLocation(this.program,"projectionMatrix"),this.textureMatrixUniform=this.gl.getUniformLocation(this.program,"textureMatrix"),this.textureUniform=this.gl.getUniformLocation(this.program,"texImage"),this.alphaUniform=this.gl.getUniformLocation(this.program,"alpha"),this.gl.useProgram(this.program),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,.5,.5]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,1,1,1,0,0,1,0]),this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(this.positionCoordsAttr),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionBuffer),this.gl.vertexAttribPointer(this.positionCoordsAttr,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.texCoordsAttr),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureBuffer),this.gl.vertexAttribPointer(this.texCoordsAttr,2,this.gl.FLOAT,!1,0,0)},t.prototype.renderImage=function(t,e,n,o,i,a,u,c,s,f,l){void 0===u&&(u=null),void 0===c&&(c=0),void 0===s&&(s=!1),void 0===f&&(f=!1),void 0===l&&(l=1),this.modelMatrix=r.mat4.identity(this.modelMatrix),r.mat4.translate(this.modelMatrix,this.modelMatrix,[o.x,o.y,0]),r.mat4.scale(this.modelMatrix,this.modelMatrix,[i*(s?-1:1),a*(f?-1:1),1]),r.mat4.rotateZ(this.modelMatrix,this.modelMatrix,c*(Math.PI/180)),this.textureMatrix=r.mat4.identity(this.textureMatrix),null!==u&&(r.mat4.translate(this.textureMatrix,this.textureMatrix,[u.x/n.naturalWidth,u.y/n.naturalHeight,0]),r.mat4.scale(this.textureMatrix,this.textureMatrix,[(u.width-.5)/n.naturalWidth,(u.height-.5)/n.naturalHeight,1])),this.projectionMatrix=r.mat4.identity(this.projectionMatrix),r.mat4.ortho(this.projectionMatrix,t.x,t.x1,t.y,t.y1,-1,1),this.gl.uniformMatrix4fv(this.projectionMatrixUniform,!1,this.projectionMatrix),this.gl.uniformMatrix4fv(this.modelMatrixUniform,!1,this.modelMatrix),this.gl.uniformMatrix4fv(this.textureMatrixUniform,!1,this.textureMatrix),l<1?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this.lastTexture!==e&&(this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(this.textureUniform,0)),this.gl.uniform1f(this.alphaUniform,l),this.gl.drawArrays(this.gl.TRIANGLES,0,6)},t}();e.WebGLImageRenderer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fragmentShader=void 0,e.fragmentShader="precision mediump float;\n\nvarying vec2 texCoords;\n\nuniform sampler2D texImage;\nuniform float alpha;\n\nvoid main()\n{\n    vec4 texColor = texture2D(texImage, texCoords);\n    if(texColor.a < 0.0001)\n        discard;\n    gl_FragColor = vec4(texColor.rgb, alpha);\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.vertexShader=void 0,e.vertexShader="precision mediump float;\n\nattribute vec2 positionCoords;\nattribute vec2 textureCoords;\n\nvarying vec2 texCoords;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 textureMatrix;\n\nvoid main()\n{\n    gl_Position = projectionMatrix * modelMatrix * vec4(positionCoords, 0, 1);\n    texCoords = (textureMatrix * vec4(textureCoords, 0, 1)).xy;\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramFactory=void 0;var r=function(){function t(t){this.shaderLoader=t}return t.prototype.create=function(t,e,n){var r=t.createProgram(),o=this.shaderLoader.load(t,t.VERTEX_SHADER,e),i=this.shaderLoader.load(t,t.FRAGMENT_SHADER,n);return this.link(t,r,o,i),r},t.prototype.link=function(t,e,n,r){t.attachShader(e,n),t.attachShader(e,r),t.linkProgram(e);var o=t.LINK_STATUS;if(!t.getProgramParameter(e,o)){var i=t.getProgramInfoLog(e);throw t.deleteProgram(e),new Error("Unable to initialize the Program: "+i)}},t}();e.ProgramFactory=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShaderLoader=void 0;var r=function(){function t(){}return t.prototype.load=function(t,e,n){var r=t.createShader(e);t.shaderSource(r,n),t.compileShader(r);var o=t.COMPILE_STATUS;if(!t.getShaderParameter(r,o)){var i=t.getShaderInfoLog(r);throw t.deleteShader(r),new Error("Unable to initialize the shader program: "+i)}return r},t}();e.ShaderLoader=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextureFactory=void 0;var r=n(48),o=function(){function t(t){this.gl=t.getContext(r.WEBGL_CONTEXT_NAME)}return t.prototype.createFromImage=function(t,e,n){var r=this;return void 0===e&&(e=!0),void 0===n&&(n=null),n=null!=n?n:this.gl.createTexture(),t.naturalWidth?this.create(t,n,e):t.addEventListener("load",(function(){return r.create(t,n,e)})),n},t.prototype.createFromCanvas=function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=null),n=null!=n?n:this.gl.createTexture(),this.create(t,n,e),n},t.prototype.create=function(t,e,n){void 0===n&&(n=!0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),!1===n?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST)):(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR))},t}();e.TextureFactory=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SceneManager=void 0;var r=function(){function t(t,e){this.game=null,this.scenes=new Map,this.currentScene=null,this.openingSceneName=null,this.game=t,this.renderManager=e}return t.prototype.getCurrentScene=function(){return this.currentScene},t.prototype.addScene=function(t,e,n){if(void 0===n&&(n=!1),this.scenes.has(t))throw new Error("There is already a scene with the name '"+t+"'");this.scenes.set(t,e),!0!==n&&null!==this.openingSceneName||(this.openingSceneName=t)},t.prototype.loadOpeningScene=function(){if(null===this.openingSceneName)throw new Error("There is no opening scene");this.loadScene(this.openingSceneName)},t.prototype.loadScene=function(t){if(null===this.game)throw new Error("Game not initialized.");if(!1===this.scenes.has(t))throw new Error("Scene with name "+t+" does not exists");var e=this.game.running;e&&this.game.stopLoop(),this.unloadCurrentScene(),this.currentScene=this.scenes.get(t)(),this.currentScene.name=t,this.currentScene.game=this.game,e&&this.game.resumeLoop()},t.prototype.unloadCurrentScene=function(){null!==this.currentScene&&(this.currentScene.destroy(),this.currentScene=null,this.currentSceneName=null,this.renderManager.clear())},t}();e.SceneManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeManager=void 0;var r=function(){function t(){this.max=.1,this.then=0,this._deltaTime=0}return t.prototype.start=function(){this.then=Date.now()},t.prototype.update=function(t){var e=.001*t;this._deltaTime=Math.min(Math.max(0,e-this.then),this.max),this.then=e},Object.defineProperty(t.prototype,"deltaTime",{get:function(){return this._deltaTime},enumerable:!1,configurable:!0}),t}();e.TimeManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;var r=function(){function t(t){this.textures=new Map,this.textureFactory=t}return t.prototype.getTexture=function(t){var e;return null!==(e=this.textures.get(Symbol.for(t)))&&void 0!==e?e:null},t.prototype.getOrCreateTextureFromImage=function(t,e){var n;return void 0===e&&(e=!0),null!==(n=this.textures.get(Symbol.for(t.src)))&&void 0!==n?n:this.createTextureFromImage(t,e)},t.prototype.createTextureFromImage=function(t,e){void 0===e&&(e=!0);var n=this.textureFactory.createFromImage(t,e);return this.textures.set(Symbol.for(t.src),n),n},t.prototype.createTextureFromCanvas=function(t,e,n){void 0===n&&(n=!0);var r=this.textureFactory.createFromCanvas(e,n);return this.textures.set(Symbol.for(t),r),r},t}();e.TextureManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var r=function(){function t(){this.instances=new Map,this.constructors=new Map}return t.prototype.add=function(t,e){if(this.constructors.has(t))throw new Error("There is already an object constructor with the name "+t);this.constructors.set(t,e)},t.prototype.getSingleton=function(t){if(!1===this.constructors.has(t))throw new Error("Invalid object constructor name: "+t);return!1===this.instances.has(t)&&this.instances.set(t,this.constructors.get(t)()),this.instances.get(t)},t.prototype.getTranscient=function(t){if(!1===this.constructors.has(t))throw new Error("Invalid object constructor name: "+t);return this.constructors.get(t)()},t}();e.Container=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Scene=e.GAME_CAMERA_ID=void 0;var r=n(79),o=n(2);e.GAME_CAMERA_ID="GameCamera";var i=function(){function t(){var t=this;this.game=null,this.name=null,this.gameObjectManager=o.container.getSingleton("GameObjectManager"),this.started=!1,this.gameLoopEventHandler=function(e){!1===t.started&&e.type===o.EVENT_START?(t.start(),t.started=!0):!0===t.started&&e.type===o.EVENT_UPDATE&&t.update()},window.addEventListener(o.EVENT_START,this.gameLoopEventHandler),window.addEventListener(o.EVENT_UPDATE,this.gameLoopEventHandler),this.addGameObject((function(){return new r.GameCamera}),e.GAME_CAMERA_ID),this.gameLoopEventHandler.bind(this)}return t.prototype.start=function(){},t.prototype.update=function(){},Object.defineProperty(t.prototype,"gameCamera",{get:function(){return this.findGameObjectByName(e.GAME_CAMERA_ID)},enumerable:!1,configurable:!0}),t.prototype.addGameObject=function(t,e){return this.gameObjectManager.addGameObject(t,e)},t.prototype.getRootGameObjects=function(){return this.gameObjectManager.getGameObjects().filter((function(t){return null===t.parent}))},t.prototype.findGameObjectByName=function(t){return this.gameObjectManager.findGameObjectByName(t)},t.prototype.findGameObjectsByTag=function(t){return this.gameObjectManager.findGameObjectsByTag(t)},t.prototype.findGameObjectByTag=function(t){return this.gameObjectManager.findGameObjectByTag(t)},t.prototype.destroyAllGameObjects=function(){this.gameObjectManager.destroyAllGameObjects()},t.prototype.destroyGameObjectByName=function(t){this.destroyGameObject(this.findGameObjectByName(t))},t.prototype.destroyGameObject=function(t){this.gameObjectManager.destroyGameObject(t)},t.prototype.destroy=function(){var t=this;window.removeEventListener(o.EVENT_START,this.gameLoopEventHandler),window.removeEventListener(o.EVENT_UPDATE,this.gameLoopEventHandler),this.gameObjectManager.destroyAllGameObjects(),Object.keys(this).forEach((function(e){return delete t[e]}))},t}();e.Scene=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CameraData=void 0;var r=function(){this.depth=0,this.layers=[],this.originalViewportRect=null,this.viewportRect=null,this.worldSpaceRect=null,this.zoom=0};e.CameraData=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;var r=n(1),o=function(){function t(t){var e,n,o,i=this;this._image=null,this._slice=null,this._scale=new r.Vector2(1,1),this._smooth=!0,this._width=null,this._height=null,this._loaded=!1,this._image=t.image,this._slice=null!==(e=t.slice)&&void 0!==e?e:this._slice,null!==this._slice&&(this._width=this._slice.width,this._height=this._slice.height),this._scale=null!==(n=t.scale)&&void 0!==n?n:this._scale,this._smooth=null!==(o=t.smooth)&&void 0!==o?o:this._smooth,this._image.naturalWidth?this.onLoad():this._image.addEventListener("load",(function(){return i.onLoad()}))}return Object.defineProperty(t.prototype,"loaded",{get:function(){return this._loaded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this._image},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slice",{get:function(){return this._slice},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"smooth",{get:function(){return this._smooth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var t,e;this._width=(null!==(t=this._width)&&void 0!==t?t:this._image.naturalWidth)*this._scale.x,this._height=(null!==(e=this._height)&&void 0!==e?e:this._image.naturalHeight)*this._scale.y,this._loaded=!0},t}();e.Sprite=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;var r=function(t){var e,n;this.sprites=[],this.speed=1,this.loop=!1,this.sprites=t.sprites,this.speed=null!==(e=t.speed)&&void 0!==e?e:this.speed,this.loop=null!==(n=t.loop)&&void 0!==n?n:this.loop};e.Animation=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tileset=void 0;var r=n(1),o=n(139),i=function(){function t(t){var e,n;this.image=null,this.offset=new r.Vector2(0,0),this.tileOffset=new r.Vector2(0,0),this._tiles=[],this.image=t.image,this.tileWidth=t.tileWidth,this.tileHeight=t.tileHeight,this.gridWidth=t.gridWidth,this.gridHeight=t.gridHeight,this.offset=null!==(e=t.offset)&&void 0!==e?e:this.offset,this.tileOffset=null!==(n=t.tileOffset)&&void 0!==n?n:this.tileOffset,this.generateTiles()}return t.prototype.generateTiles=function(){for(var t=0,e=0;e<this.gridHeight;e++)for(var n=0;n<this.gridWidth;n++)this._tiles[t]=new o.Tile(n*this.tileWidth+this.offset.x+this.tileOffset.x,e*this.tileHeight-this.offset.y-this.tileOffset.y,this.tileWidth,this.tileHeight),t++},t.prototype.getTile=function(t){return this._tiles[t]?this._tiles[t]:null},Object.defineProperty(t.prototype,"tiles",{get:function(){return this._tiles},enumerable:!1,configurable:!0}),t}();e.Tileset=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tile=void 0;var r=function(t,e,n,r){this.x=t,this.y=e,this.width=n,this.height=r};e.Tile=r},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.BoxCollider=e.TYPE_BOX_COLLIDER=void 0;var i=n(2),a=n(81),u=n(49),c=n(82),s=n(1),f=n(8);e.TYPE_BOX_COLLIDER="BoxCollider";var l=function(t){function n(n){var r,o,i,a,u=t.call(this)||this;return u.debug=!1,u.offsetX=0,u.offsetY=0,u.realWidth=0,u.realHeight=0,u.realOffset=new s.Vector2,u.realPosition=new s.Vector2,u.type=e.TYPE_BOX_COLLIDER,u.width=n.width,u.height=n.height,u.offsetX=null!==(r=n.offsetX)&&void 0!==r?r:u.offsetX,u.offsetY=null!==(o=n.offsetY)&&void 0!==o?o:u.offsetY,u._physics=null!==(i=n.physics)&&void 0!==i?i:u.physics,u.debug=null!==(a=n.debug)&&void 0!==a?a:u.debug,u}return o(n,t),n.prototype.start=function(){var t=this;this.updateRealSize(),this.addCollider(new a.RectangleCollider(this.gameObject.transform.position,this.realWidth,this.realHeight,this._physics,this.gameObject)),this.debug&&this.gameObject.addComponent((function(){return new h(t.colliders[0])}))},n.prototype.update=function(){this.updatePosition()},n.prototype.updatePosition=function(){this.updateRealSize(),this.colliders[0].width=this.realWidth,this.colliders[0].height=this.realHeight,this.colliders[0].position=s.Vector2.add(this.realPosition,this.gameObject.transform.position,this.realOffset)},n.prototype.updateRealSize=function(){this.realWidth=this.width*Math.abs(this.gameObject.transform.scale.x),this.realHeight=this.height*Math.abs(this.gameObject.transform.scale.y),this.realOffset.x=this.offsetX*this.gameObject.transform.scale.x,this.realOffset.y=this.offsetY*this.gameObject.transform.scale.y},n}(u.ColliderComponent);e.BoxCollider=l;var h=function(t){function e(e){var n=t.call(this)||this;return n.renderManager=i.container.getSingleton("RenderManager"),n.type="BoxColliderRenderer",n.renderData=new c.ColliderRenderData,n.renderData.debug=!0,n.renderData.color="#00FF00",n.collider=e,n}return o(e,t),e.prototype.update=function(){this.renderData.layer=this.gameObject.layer,this.renderData.position=this.collider.position,this.renderData.shape=this.collider.shape,this.renderManager.addToRenderStack(this.renderData)},e}(f.RenderComponent)},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var i=n(68),a=n(1),u=n(47),c=function(t){function e(e,n,r,o){var c=t.call(this)||this;return c._rotationMatrix=new i.Matrix2,c.vertexHelper=[new a.Vector2(-1,-1),new a.Vector2(-1,1),new a.Vector2(1,1),new a.Vector2(1,-1)],c.cacheVector=new a.Vector2,c._type=u.ShapeType.Rectangle,c._vertex[0]=new a.Vector2(e,n),c._vertex[1]=new a.Vector2(e,o),c._vertex[2]=new a.Vector2(r,o),c._vertex[3]=new a.Vector2(r,n),a.Vector2.unit(c._direction,a.Vector2.subtract(new a.Vector2,c._vertex[1],c._vertex[0])),c._refDirection=c._direction.clone(),c._height=a.Vector2.subtract(new a.Vector2,c._vertex[1],c._vertex[0]).magnitude,c._width=a.Vector2.subtract(new a.Vector2,c._vertex[2],c._vertex[1]).magnitude,a.Vector2.add(c._position,c._vertex[0],a.Vector2.scale(new a.Vector2,c._direction,c._height/2)),a.Vector2.add(c._position,c._position,a.Vector2.scale(new a.Vector2,a.Vector2.normal(new a.Vector2,c._direction),c._width/2)),c._angle=0,c}return o(e,t),e.prototype.update=function(){var t=this;this._rotationMatrix.rotate(this.angle),this._direction=this._rotationMatrix.multiplyVector2(this._refDirection),this.vertexHelper.forEach((function(e,n){a.Vector2.add(t._vertex[n],t._position,a.Vector2.scale(t.cacheVector,a.Vector2.normal(t.cacheVector,t._direction),e.x*t._width/2)),a.Vector2.add(t._vertex[n],t._vertex[n],a.Vector2.scale(t.cacheVector,t._direction,e.y*t._height/2))}))},e.prototype.clone=function(){return new e(this._vertex[0].x,this._vertex[0].y,this._vertex[2].x,this._vertex[2].y)},e}(u.Shape);e.Rectangle=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TilemapCollider=e.TYPE_TILEMAP_COLLIDER=void 0;var i=n(81),a=n(2),u=n(49),c=n(82),s=n(8),f=n(1);e.TYPE_TILEMAP_COLLIDER="TilemapCollider";var l=function(t){function n(n){var r,o=t.call(this)||this;return o.tilemapRenderer=null,o.debug=!1,o.needsCollider=function(t){o.cacheVertex[0].set(t.position.x,t.position.y+t.height),o.cacheVertex[1].set(t.position.x+t.width,t.position.y),o.cacheVertex[2].set(t.position.x,t.position.y-t.height),o.cacheVertex[3].set(t.position.x-t.width,t.position.y);for(var e=function(t){if(void 0===o.tilemapRenderer.tilesData.find((function(e){return e.position.equals(o.cacheVertex[t])})))return{value:!0}},n=0;n<o.cacheVertex.length;n++){var r=e(n);if("object"==typeof r)return r.value}return!1},o.type=e.TYPE_TILEMAP_COLLIDER,o.tilemapRenderer=n.tilemapRenderer,o.debug=null!==(r=n.debug)&&void 0!==r?r:o.debug,o._physics=!0,o.cacheVertex=[new f.Vector2,new f.Vector2,new f.Vector2,new f.Vector2],o}return o(n,t),n.prototype.start=function(){var t=this;this.tilemapRenderer.tilesData.filter(this.needsCollider).forEach((function(e){t.addCollider(new i.RectangleCollider(e.position,e.width,e.height,t._physics,t.gameObject))})),this.debug&&this.gameObject.addComponent((function(){return new h(t.colliders)}))},n.prototype.updatePosition=function(){},n}(u.ColliderComponent);e.TilemapCollider=l;var h=function(t){function e(e){var n=t.call(this)||this;return n.renderManager=a.container.getSingleton("RenderManager"),n.renderData=[],n.colliders=[],n.type="TilemapColliderRenderer",n.colliders=e,n.colliders.forEach((function(t,e){n.renderData[e]=new c.ColliderRenderData,n.renderData[e].debug=!0,n.renderData[e].color="#00FF00"})),n}return o(e,t),e.prototype.update=function(){var t=this;this.colliders.forEach((function(e,n){t.renderData[n].layer=t.gameObject.layer,t.renderData[n].position=e.position,t.renderData[n].shape=e.shape,t.renderManager.addToRenderStack(t.renderData[n])}))},e}(s.RenderComponent)},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteRenderer=e.TYPE_SPRITE_RENDERER=void 0;var i=n(8),a=n(83),u=n(2),c=n(1);e.TYPE_SPRITE_RENDERER="SpriteRenderer";var s=function(t){function n(n){var r,o,i,a,s,f,l,h=t.call(this)||this;return h.renderManager=u.container.getSingleton("RenderManager"),h.sprite=null,h.offset=new c.Vector2,h.flipHorizontal=!1,h.flipVertical=!1,h.rotation=0,h.smooth=!0,h.opacity=1,h._tiled=new c.Vector2(1,1),h.renderData=[],h.goPosition=null,h.cachePosition=new c.Vector2,h.cacheRenderPosition=new c.Vector2,h.type=e.TYPE_SPRITE_RENDERER,h.sprite=n.sprite,h.offset=null!==(r=n.offset)&&void 0!==r?r:h.offset,h.smooth=null!==(o=n.smooth)&&void 0!==o?o:h.smooth,h.rotation=null!==(i=n.rotation)&&void 0!==i?i:h.rotation,h.flipHorizontal=null!==(a=n.flipHorizontal)&&void 0!==a?a:h.flipHorizontal,h.flipVertical=null!==(s=n.flipVertical)&&void 0!==s?s:h.flipVertical,h.opacity=null!==(f=n.opacity)&&void 0!==f?f:h.opacity,h.tiled=null!==(l=n.tiled)&&void 0!==l?l:h._tiled,h}return o(n,t),Object.defineProperty(n.prototype,"tiled",{get:function(){return this._tiled},set:function(t){if(t.x%1!=0||t.y%1!=0)throw new Error("SpriteRenderer.tiled: Vector2 components must be integer");this._tiled.set(t.x,t.y)},enumerable:!1,configurable:!0}),n.prototype.start=function(){this.goPosition=this.gameObject.transform.position},n.prototype.update=function(){if(!0===this.sprite.loaded){this.updateRenderDataArray();for(var t=0,e=0;e<this._tiled.x;e++)for(var n=0;n<this._tiled.y;n++)this.updateRenderData(t,e,n),t++}},n.prototype.updateRenderDataArray=function(){if(this.renderData.length!==this._tiled.x*this._tiled.y){this.renderData=[];for(var t=0;t<=this._tiled.x*this._tiled.y;t++)this.renderData[t]=new a.ImageRenderData}},n.prototype.updateRenderData=function(t,e,n){this.renderData[t].ui=this.gameObject.ui,this.renderData[t].layer=this.gameObject.layer,this.renderData[t].image=this.sprite.image,this.renderData[t].width=this.sprite.width*Math.abs(this.gameObject.transform.scale.x),this.renderData[t].height=this.sprite.height*Math.abs(this.gameObject.transform.scale.y),this.renderData[t].slice=this.sprite.slice,this.renderData[t].flipHorizontal=this.flipHorizontal!==this.gameObject.transform.scale.x<0,this.renderData[t].flipVertical=this.flipVertical!==this.gameObject.transform.scale.y<0,this.renderData[t].rotation=this.gameObject.transform.rotation+this.rotation,this.renderData[t].smooth=this.sprite.smooth,this.renderData[t].alpha=this.opacity,this.calculateRenderPosition(t,e,n),this.renderManager.addToRenderStack(this.renderData[t])},n.prototype.calculateRenderPosition=function(t,e,n){c.Vector2.add(this.cachePosition,this.gameObject.transform.position,this.offset),this.cacheRenderPosition.set(this.renderData[t].width/2*(this.tiled.x-1),this.renderData[t].height/2*(this.tiled.y-1)),c.Vector2.subtract(this.cachePosition,this.cachePosition,this.cacheRenderPosition),this.cacheRenderPosition.set(e*this.renderData[t].width,n*this.renderData[t].height),c.Vector2.add(this.cachePosition,this.cachePosition,this.cacheRenderPosition),this.renderData[t].position=this.cachePosition,0!==this.gameObject.transform.rotation&&this.translateRenderPosition(t)},n.prototype.translateRenderPosition=function(t){var e=this.gameObject.transform.rotation*Math.PI/180,n=Math.atan2(this.renderData[t].position.x-this.goPosition.x,this.renderData[t].position.y-this.goPosition.y),r=Math.hypot(this.renderData[t].position.x-this.goPosition.x,this.renderData[t].position.y-this.goPosition.y);this.renderData[t].position.set(this.goPosition.x+r*Math.sin(n-e),this.goPosition.y+r*Math.cos(n-e))},n}(i.RenderComponent);e.SpriteRenderer=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TextRenderer=e.TYPE_TEXT_RENDERER=void 0;var i=n(8),a=n(145),u=n(2);e.TYPE_TEXT_RENDERER="TextRenderer";var c=function(t){function n(n){var r,o,i,c,s,f,l=t.call(this)||this;return l.width=0,l.height=0,l.text=null,l.font="Sans",l.size=12,l.color="#000000",l.bold=!1,l.italic=!1,l.lineSeparation=5,l.renderManager=u.container.getSingleton("RenderManager"),l.renderData=new a.TextRenderData,l.type=e.TYPE_TEXT_RENDERER,l.width=n.width,l.height=n.height,l.text=n.text,l.font=null!==(r=n.font)&&void 0!==r?r:l.font,l.size=null!==(o=n.size)&&void 0!==o?o:l.size,l.color=null!==(i=n.color)&&void 0!==i?i:l.color,l.bold=null!==(c=n.bold)&&void 0!==c?c:l.bold,l.italic=null!==(s=n.italic)&&void 0!==s?s:l.italic,l.lineSeparation=null!==(f=n.lineSeparation)&&void 0!==f?f:l.lineSeparation,l}return o(n,t),n.prototype.start=function(){this.update()},n.prototype.update=function(){if(!1===this.gameObject.ui)throw new Error("TextRenderer only can be used on UI GameObjects");this.renderData.layer=this.gameObject.layer,this.renderData.ui=this.gameObject.ui,this.renderData.width=this.width,this.renderData.height=this.height,this.renderData.text=this.text,this.renderData.textSize=this.size,this.renderData.color=this.color,this.renderData.font=this.font,this.renderData.position.set(this.gameObject.transform.position.x,this.gameObject.transform.position.y),this.renderData.lineSeparation=this.lineSeparation,this.renderData.bold=this.bold,this.renderData.italic=this.italic,this.renderManager.addToRenderStack(this.renderData)},n}(i.RenderComponent);e.TextRenderer=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TextRenderData=void 0;var i=n(29),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=i.RenderDataType.Text,e.width=null,e.height=null,e.color=null,e.text=null,e.font=null,e.textSize=null,e.lineSeparation=null,e.bold=!1,e.italic=!1,e}return o(e,t),e}(i.RenderData);e.TextRenderData=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TiledTilemapRenderer=e.TYPE_TILED_RENDERER=void 0;var i=n(84);e.TYPE_TILED_RENDERER="TiledRenderer";var a=function(t){function n(n){var r,o,i=t.call(this)||this;return i.type=e.TYPE_TILED_RENDERER,i.tileset=n.tileset,i.tiledTilemap=n.tilemapData,i.tileScale=null!==(r=n.tileScale)&&void 0!==r?r:1,i.smooth=null!==(o=n.smooth)&&void 0!==o&&o,i}return o(n,t),n.prototype.processTilemap=function(){var t=this;this.tiledTilemap.layers.forEach((function(e){return!0===t.tiledTilemap.infinite?e.chunks.forEach((function(n){return t.processChunk(n,e.opacity)})):t.processChunk(e,e.opacity)})),this.tilemapProcessed=!0},n.prototype.processChunk=function(t,e){void 0===e&&(e=1);for(var n=0,r=0;r<t.height;r++)for(var o=0;o<t.width;o++){var i=this.tileset.getTile(t.data[n]-1);null!==i&&this.processTile(i,o+t.x,r+t.y,e),n++}},n}(i.TilemapRenderer);e.TiledTilemapRenderer=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TileData=void 0;var r=n(1),o=function(){function t(t,e,n){this._position=new r.Vector2,this._position.set(t.x,t.y),this._width=e,this._height=n}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t}();e.TileData=o},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CsvTilemapRenderer=e.TYPE_TILEMAP_RENDERER=void 0;var i=n(84),a=1,u=2,c=3;e.TYPE_TILEMAP_RENDERER="TilemapRenderer";var s=function(t){function n(n){var r,o,i,a=t.call(this)||this;return a.alpha=1,a.type=e.TYPE_TILEMAP_RENDERER,a.tileset=n.tileset,a.tilemapData=n.tilemapData,a.tileScale=null!==(r=n.tileScale)&&void 0!==r?r:1,a.smooth=null!==(o=n.smooth)&&void 0!==o&&o,a.alpha=null!==(i=n.alpha)&&void 0!==i?i:1,a}return o(n,t),n.prototype.processTilemap=function(){var t=this;this.tilemapData.trim().split("\n").forEach((function(e,n){e.split(",").forEach((function(e,r){var o=parseInt(e.trim());if(!1===isNaN(o)){var i=o>999?o%1e3:o,s=Math.round(o/1e3),f=t.tileset.getTile(i),l={h:[a,c].includes(s),v:[u,c].includes(s)};null!==f&&t.processTile(f,r,n,t.alpha,l)}}))})),this.tilemapProcessed=!0},n}(i.TilemapRenderer);e.CsvTilemapRenderer=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Animator=e.TYPE_ANIMATOR=void 0;var i=n(8),a=n(2);e.TYPE_ANIMATOR="Animator";var u=function(t){function n(n){var r=t.call(this)||this;return r.timeManager=a.container.getSingleton("TimeManager"),r.spriteRenderer=null,r.animations=new Map,r.currentAnimation=null,r.defaultSprite=null,r.type=e.TYPE_ANIMATOR,r.spriteRenderer=n.spriteRenderer,r}return o(n,t),n.prototype.start=function(){this.defaultSprite=this.spriteRenderer.sprite},n.prototype.update=function(){null!==this.currentAnimation?(this.currentAnimation.playFrame(this.timeManager.deltaTime),!0===this.currentAnimation.restarted&&!1===this.currentAnimation.loop?this.stopAnimation():this.spriteRenderer.sprite=this.currentAnimation.sprite):this.spriteRenderer.sprite=this.defaultSprite},n.prototype.addAnimation=function(t,e){return this.animations.set(t,new c(e)),this},n.prototype.playAnimation=function(t){if(!1!==this.active){if(!1===this.animations.has(t))throw new Error("Animation with name "+t+" does not exist.");this.currentAnimation=this.animations.get(t)}},n.prototype.stopAnimation=function(){!1!==this.active&&null!==this.currentAnimation&&(this.currentAnimation=null)},n}(i.Component);e.Animator=u;var c=function(){function t(t){this.currentFrame=0,this.frameTime=0,this._sprite=null,this._restarted=!1,this.animation=t}return Object.defineProperty(t.prototype,"sprite",{get:function(){return this._sprite},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"restarted",{get:function(){return this._restarted},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this.animation.loop},enumerable:!1,configurable:!0}),t.prototype.playFrame=function(t){this._restarted=!1,this.frameTime>=1/(24*this.animation.speed)&&(this.frameTime=0,this.currentFrame=this.currentFrame+1===this.animation.sprites.length?0:this.currentFrame+1,this._restarted=0===this.currentFrame),this._sprite=this.animation.sprites[this.currentFrame],this.frameTime+=t},t}()},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.AudioPlayer=e.TYPE_AUDIO_PLAYER=void 0;var i=n(8),a=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","pointerup","touchend","keydown","keyup"];e.TYPE_AUDIO_PLAYER="AudioPlayer";var u=function(t){function n(n){var r,o,i;void 0===n&&(n={audio:null,volume:1,loop:!1});var u=t.call(this)||this;return u.volume=1,u.loop=!1,u.audio=null,u.audioClone=null,u._playing=!1,u._paused=!1,u.audioEventHandler=function(t){"ended"===t.type&&(u._playing=!1,u.audio.removeEventListener("ended",u.audioEventHandler))},u.userinputEventHandler=function(){a.forEach((function(t){window.removeEventListener(t,u.userinputEventHandler)})),u.audio.play()},u.allowMultiple=!1,u.type=e.TYPE_AUDIO_PLAYER,u.audio=null!==(r=n.audio)&&void 0!==r?r:u.audio,u.volume=null!==(o=n.volume)&&void 0!==o?o:u.volume,u.loop=null!==(i=n.loop)&&void 0!==i?i:u.loop,u}return o(n,t),n.prototype.playAudio=function(t,e){void 0===e&&(e=null),this.audioClone=t.cloneNode(),this.audioClone.volume=null!=e?e:this.volume,this.audioClone.play()},n.prototype.play=function(){var t=this;null!==this.audio&&(this._playing&&!1===this._paused||(this._paused?this.audio.play():(this.audio.volume=this.volume,this.audio.loop=this.loop,this.audio.addEventListener("ended",this.audioEventHandler),this._playing=!0,this.audio.play().then((function(){})).catch((function(){return a.forEach((function(e){return window.addEventListener(e,t.userinputEventHandler)}))})))))},n.prototype.stop=function(){this._playing&&(this.audio.pause(),this.audio.currentTime=0,this.audio.removeEventListener("ended",this.audioEventHandler),this._playing=!1,this._paused=!1)},n.prototype.pause=function(){this._playing&&!1===this._paused&&(this.audio.pause(),this._paused)},n}(i.Component);e.AudioPlayer=u},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RigidBody=e.TYPE_RIGIDBODY=e.RigidBodyType=void 0;var i,a=n(8),u=n(2),c=n(1),s=n(49);!function(t){t[t.Static=0]="Static",t[t.Dynamic=1]="Dynamic"}(i=e.RigidBodyType||(e.RigidBodyType={})),e.TYPE_RIGIDBODY="RigidBody";var f=function(t){function n(n){var r,o=t.call(this)||this;return o.timeManager=u.container.getSingleton("TimeManager"),o.gravityScale=9.8,o.physicsFramerate=60,o.physicsIterations=12,o.physicsDeltaTime=0,o.deltaTimeAccumulator=0,o._colliderComponents=[],o._layersToCollide=[],o._velocity=new c.Vector2,o._gravity=new c.Vector2,o.deltaGravity=new c.Vector2,o.deltaVelocity=new c.Vector2,o.collisions=[],o.penetrationPerDirection={x:new Map,y:new Map},o.nextObjectPosition=new c.Vector2,o.type=e.TYPE_RIGIDBODY,o.allowMultiple=!1,o._rigidBodyType=n.rigidBodyType,o._layersToCollide=n.layersToCollide,o._gravity.set(0,null!==(r=n.gravity)&&void 0!==r?r:o._gravity.y),o.physicsDeltaTime=parseFloat((1/o.physicsFramerate/o.physicsIterations).toFixed(6)),o}return o(n,t),Object.defineProperty(n.prototype,"rigidBodyType",{get:function(){return this._rigidBodyType},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"velocity",{get:function(){return this._velocity},set:function(t){this._velocity.set(t.x,t.y)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"gravity",{get:function(){return this._gravity.y},set:function(t){this._gravity.set(this._gravity.x,t)},enumerable:!1,configurable:!0}),n.prototype.start=function(){var t=this;if(this.gameObject.getComponents().forEach((function(e){return e instanceof s.ColliderComponent&&e.physics?t._colliderComponents.push(e):null})),0===this._colliderComponents.length)throw new Error("RigidBody needs at least one Collider")},n.prototype.update=function(){if(this._rigidBodyType!==i.Static)for(this.deltaTimeAccumulator+=this.timeManager.deltaTime;this.deltaTimeAccumulator>=this.physicsDeltaTime;)this.applyGravity(),this.applyVelocity(),this.deltaTimeAccumulator-=this.physicsDeltaTime},n.prototype.applyGravity=function(){this._gravity.y>0&&(this._velocity=c.Vector2.add(this._velocity,this._velocity,c.Vector2.scale(this.deltaGravity,this._gravity,-this.gravityScale*this.physicsDeltaTime)))},n.prototype.applyVelocity=function(){c.Vector2.scale(this.deltaVelocity,this._velocity,this.physicsFramerate*this.physicsDeltaTime),0===this.deltaVelocity.x&&0===this.deltaVelocity.y||this.move()},n.prototype.move=function(){var t=this;this.penetrationPerDirection.x.clear(),this.penetrationPerDirection.y.clear(),this.gameObject.transform.position=c.Vector2.add(this.nextObjectPosition,this.gameObject.transform.position,this.deltaVelocity),this.updateCollisions(),this.collisions.forEach((function(n){!0===n.remoteCollider.physics&&null!==n.remoteCollider.gameObject.getComponentByType(e.TYPE_RIGIDBODY)&&(0!==n.collisionData.direction.x&&t.setPenetrationPerDirectionPerAxis("x",n),0!==n.collisionData.direction.y&&t.setPenetrationPerDirectionPerAxis("y",n))})),this.penetrationResolution("x"),this.penetrationResolution("y")},n.prototype.setPenetrationPerDirectionPerAxis=function(t,e){var n;this.penetrationPerDirection[t].set(e.collisionData.direction[t],Math.max(null!==(n=this.penetrationPerDirection[t].get(e.collisionData.direction[t]))&&void 0!==n?n:0,e.collisionData.penetration))},n.prototype.penetrationResolution=function(t){var e=this;this.penetrationPerDirection[t].forEach((function(n,r){e.gameObject.transform.position[t]+=r*n,0!==e._velocity[t]&&Math.sign(e._velocity[t])!==Math.sign(r)&&(e._velocity[t]=0)}))},n.prototype.updateCollisions=function(){var t=this;this.collisions=[],this._colliderComponents.forEach((function(e){return t._layersToCollide.forEach((function(n){return e.getCollisionsWithLayer(n).forEach((function(e){t.collisions.push(e)}))}))}))},n}(a.PhysicsComponent);e.RigidBody=f},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(5),o=n(89),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i))},function(t,e,n){var r=n(27),o=n(55),i=n(155),a=function(t){return function(e,n,a){var u,c=r(e),s=o(c.length),f=i(a,s);if(t&&n!=n){for(;s>f;)if((u=c[f++])!=u)return!0}else for(;s>f;f++)if((t||f in c)&&c[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var r=n(36),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},function(t,e,n){var r=n(4),o=/#|\.prototype\./,i=function(t,e){var n=u[a(t)];return n==s||n!=c&&("function"==typeof e?r(e):!!e)},a=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},u=i.data={},c=i.NATIVE="N",s=i.POLYFILL="P";t.exports=i},function(t,e,n){var r=n(35);t.exports=r("document","documentElement")},function(t,e,n){var r=n(27),o=n(54).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(r(t))}},function(t,e,n){var r=n(61);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(9),o=n(37),i=n(13),a=r("unscopables"),u=Array.prototype;null==u[a]&&i.f(u,a,{configurable:!0,value:o(null)}),t.exports=function(t){u[a][t]=!0}},function(t,e,n){"use strict";var r=n(101).IteratorPrototype,o=n(37),i=n(34),a=n(60),u=n(62),c=function(){return this};t.exports=function(t,e,n){var s=e+" Iterator";return t.prototype=o(r,{next:i(1,n)}),a(t,s,!1,!0),u[s]=c,t}},function(t,e,n){var r=n(11);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){"use strict";var r=n(64),o=n(164);t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(t,e,n){var r=n(64),o=n(39),i=n(9)("toStringTag"),a="Arguments"==o(function(){return arguments}());t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:a?o(e):"Object"==(r=o(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){"use strict";var r=n(61),o=n(11),i=[].slice,a={},u=function(t,e,n){if(!(e in a)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";a[e]=Function("C,a","return new C("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=i.call(arguments,1),a=function(){var r=n.concat(i.call(arguments));return this instanceof a?u(e,r.length,r):e.apply(t,r)};return o(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e,n){"use strict";var r=n(26);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(36),o=n(40),i=function(t){return function(e,n){var i,a,u=String(o(e)),c=r(n),s=u.length;return c<0||c>=s?t?"":void 0:(i=u.charCodeAt(c))<55296||i>56319||c+1===s||(a=u.charCodeAt(c+1))<56320||a>57343?t?u.charAt(c):i:t?u.slice(c,c+2):a-56320+(i-55296<<10)+65536}};t.exports={codeAt:i(!1),charAt:i(!0)}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){var r=n(35);t.exports=r("navigator","userAgent")||""},function(t,e,n){"use strict";var r=n(3),o=n(46).filter,i=n(66),a=n(67),u=i("filter"),c=a("filter");r({target:"Array",proto:!0,forced:!u||!c},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(3),o=n(109);r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(t,e,n){"use strict";var r=n(4);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){var r=n(3),o=n(6);r({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperties:n(96)})},function(t,e,n){var r=n(3),o=n(4),i=n(27),a=n(33).f,u=n(6),c=o((function(){a(1)}));r({target:"Object",stat:!0,forced:!u||c,sham:!u},{getOwnPropertyDescriptor:function(t,e){return a(i(t),e)}})},function(t,e,n){var r=n(3),o=n(6),i=n(91),a=n(27),u=n(33),c=n(108);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){for(var e,n,r=a(t),o=u.f,s=i(r),f={},l=0;s.length>l;)void 0!==(n=o(r,e=s[l++]))&&c(f,e,n);return f}})},function(t,e,n){var r=n(3),o=n(31),i=n(59);r({target:"Object",stat:!0,forced:n(4)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},function(t,e,n){var r=n(5),o=n(104),i=n(109),a=n(25);for(var u in o){var c=r[u],s=c&&c.prototype;if(s&&s.forEach!==i)try{a(s,"forEach",i)}catch(t){s.forEach=i}}},function(t,e,n){"use strict";var r=n(3),o=n(36),i=n(179),a=n(180),u=n(4),c=1..toFixed,s=Math.floor,f=function(t,e,n){return 0===e?n:e%2==1?f(t,e-1,n*t):f(t*t,e/2,n)};r({target:"Number",proto:!0,forced:c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!u((function(){c.call({})}))},{toFixed:function(t){var e,n,r,u,c=i(this),l=o(t),h=[0,0,0,0,0,0],p="",d="0",y=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*h[n],h[n]=r%1e7,r=s(r/1e7)},g=function(t){for(var e=6,n=0;--e>=0;)n+=h[e],h[e]=s(n/t),n=n%t*1e7},m=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==h[t]){var n=String(h[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e};if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(p="-",c=-c),c>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(c*f(2,69,1))-69)<0?c*f(2,-e,1):c/f(2,e,1),n*=4503599627370496,(e=52-e)>0){for(y(0,n),r=l;r>=7;)y(1e7,0),r-=7;for(y(f(10,r,1),0),r=e-1;r>=23;)g(1<<23),r-=23;g(1<<r),y(1,1),g(2),d=m()}else y(0,n),y(1<<-e,0),d=m()+a.call("0",l);return d=l>0?p+((u=d.length)<=l?"0."+a.call("0",l-u)+d:d.slice(0,u-l)+"."+d.slice(u-l)):p+d}})},function(t,e,n){var r=n(39);t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},function(t,e,n){"use strict";var r=n(36),o=n(40);t.exports="".repeat||function(t){var e=String(o(this)),n="",i=r(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},function(t,e,n){"use strict";n.r(e);var r=n(0),o=(n(10),n(14),n(15),n(12),n(16),n(17),n(28),n(18),n(19),n(20),n(21),n(22),n(23),n(24),n(111));function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=u(n);function n(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(i=e.call(this)).tilemapRenderer=void 0,i.collider=void 0,i.layer="Foreground",i.tilemapRenderer=i.addComponent((function(){return new r.TiledTilemapRenderer({tileset:new r.Tileset({image:t,tileWidth:16,tileHeight:16,gridWidth:12,gridHeight:16}),tilemapData:o})})),i.collider=i.addComponent((function(){return new r.TilemapCollider({tilemapRenderer:i.tilemapRenderer,debug:!0})})),i.addComponent((function(){return new r.RigidBody({rigidBodyType:r.RigidBodyType.Static,layersToCollide:["Foreground","Bot"],gravity:0})})),i.transform.scale.set(3,3),i}return n}(r.GameObject);n(65),n(105),n(107);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m(t);if(e){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(a,t);var e,n,o,i=y(a);function a(){var t;h(this,a);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=i.call.apply(i,[this].concat(n))).feetCollider=void 0,t.rigidBody=void 0,t.inputController=void 0,t.gravity=5,t.walkSpeed=5,t.jumpSpeed=14,t.grounded=!1,t.velocity=new r.Vector2(0,0),t.jumping=!1,t}return e=a,(n=[{key:"start",value:function(){this.feetCollider=this.getComponentByName("FeetCollider"),this.rigidBody=this.getComponentByType(r.TYPE_RIGIDBODY),this.inputController=this.findGameObjectByName("InputController"),this.rigidBody.gravity=this.gravity}},{key:"update",value:function(){this.grounded=this.feetCollider.collidesWithLayer("Foreground"),this.walk(),this.jump()}},{key:"walk",value:function(){this.velocity.set(this.inputController.axis.x*this.walkSpeed,this.rigidBody.velocity.y),this.rigidBody.velocity=this.velocity}},{key:"jump",value:function(){!0===this.grounded&&!0===this.inputController.jump&&!1===this.jumping&&(this.jumping=!0,this.velocity.set(this.rigidBody.velocity.x,this.jumpSpeed),this.rigidBody.velocity=this.velocity),this.jumping&&(this.jumping=this.inputController.jump)}}])&&p(e.prototype,n),o&&p(e,o),a}(r.Component);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O(t);if(e){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(a,t);var e,n,o,i=w(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this)).spriteRenderer=void 0,t.animator=void 0,t.bodyCollider=void 0,t.feetCollider=void 0,t.rigidBody=void 0,t.grounded=!1,t.layer="Player",t.spriteRenderer=t.addComponent((function(){return new r.SpriteRenderer({sprite:new r.Sprite({image:r.AssetManager.getImage("image/player/player-spritesheet.png"),slice:new r.Rectangle(0,64,16,16),smooth:!1})})})),t.animator=t.addComponent((function(){return new r.Animator({spriteRenderer:t.spriteRenderer})})).addAnimation("PlayerIdle",new r.Animation({sprites:[0,16,32,48].map((function(t){return new r.Sprite({image:r.AssetManager.getImage("image/player/player-spritesheet.png"),smooth:!1,slice:new r.Rectangle(t,64,16,16)})})),speed:.4,loop:!0})).addAnimation("PlayerRun",new r.Animation({sprites:[0,16,32,48,64,80].map((function(t){return new r.Sprite({image:r.AssetManager.getImage("image/player/player-spritesheet.png"),smooth:!1,slice:new r.Rectangle(t,16,16,16)})})),speed:.4,loop:!0})),t.bodyCollider=t.addComponent((function(){return new r.BoxCollider({width:8,height:16,debug:!0})}),"BodyCollider"),t.feetCollider=t.addComponent((function(){return new r.BoxCollider({width:6,height:6,offsetY:-5,physics:!0,debug:!0})}),"FeetCollider"),t.rigidBody=t.addComponent((function(){return new r.RigidBody({rigidBodyType:r.RigidBodyType.Dynamic,layersToCollide:["Foreground","Enemy"]})})),t.addComponent((function(){return new v}),"Movements"),t}return e=a,(n=[{key:"start",value:function(){this.transform.scale.set(3,3),this.transform.position.set(180,92),this.animator.playAnimation("PlayerIdle")}},{key:"update",value:function(){this.grounded=this.feetCollider.collidesWithLayer("Foreground"),this.transform.scale.x=0!==this.rigidBody.velocity.x?Math.sign(this.rigidBody.velocity.x)*Math.abs(this.transform.scale.x):this.transform.scale.x,this.updateAnimations()}},{key:"updateAnimations",value:function(){0!==this.rigidBody.velocity.x&&this.grounded?this.animator.playAnimation("PlayerRun"):this.animator.playAnimation("PlayerIdle")}}])&&_(e.prototype,n),o&&_(e,o),a}(r.GameObject);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(a,t);var e,n,o,i=T(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this)).keyboard=void 0,t.gamepad=void 0,t._axis=new r.Vector2(0,0),t._jump=!1,t.keyboard=r.InputManager.keyboard,t.gamepad=r.InputManager.gamepad.getGamepad(0),t}return e=a,(n=[{key:"update",value:function(){this.updateKeyboard(),this.updateGamepad()}},{key:"updateKeyboard",value:function(){this._axis.x=this.keyboard.isPressed("ArrowRight")?1:this.keyboard.isPressed("ArrowLeft")?-1:0,this._axis.y=this.keyboard.isPressed("ArrowUp")?1:this.keyboard.isPressed("ArrowDown")?-1:0,this._jump=this.keyboard.isPressed("Space")}},{key:"updateGamepad",value:function(){this.axis.set(this.gamepad.dpadRight?1:this.gamepad.dpadLeft?-1:this.axis.x,this.gamepad.dpadUp?1:this.gamepad.dpadDown?-1:this.axis.y),this.axis.set(this.gamepad.leftStickHorizontal>.1||this.gamepad.leftStickHorizontal<-.1?Math.sign(this.gamepad.leftStickHorizontal):this.axis.x,this.gamepad.leftStickVertical>.1||this.gamepad.leftStickVertical<-.1?Math.sign(this.gamepad.leftStickVertical):this.axis.x),this._jump=this.gamepad.bottomFace||this._jump}},{key:"axis",get:function(){return this._axis}},{key:"jump",get:function(){return this._jump}}])&&R(e.prototype,n),o&&R(e,o),a}(r.GameObject);function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=B(t);if(e){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}function F(t,e){return!e||"object"!==D(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(a,t);var e,n,o,i=G(a);function a(){var t;V(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))).player=void 0,t.camera=void 0,t.minX=void 0,t.maxX=void 0,t.minY=void 0,t.maxY=void 0,t}return e=a,(n=[{key:"start",value:function(){this.player=this.findGameObjectByName("Player"),this.camera=this.gameObject;var t=this.findGameObjectByName("Foreground"),e=t.getComponentByType(r.TYPE_TILED_RENDERER);this.minX=t.transform.position.x-e.realWidth/2,this.maxX=t.transform.position.x+e.realWidth/2,this.minY=t.transform.position.y-e.realHeight/2,this.maxY=t.transform.position.y+e.realHeight/2}},{key:"update",value:function(){this.gameObject.transform.position.x=Math.min(Math.max(this.player.transform.position.x,this.minX+this.camera.viewportRect.width/2),this.maxX-this.camera.viewportRect.width/2)}}])&&I(e.prototype,n),o&&I(e,o),a}(r.PhysicsComponent);n(170),n(171),n(173),n(174),n(175),n(176),n(177);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){U(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var H=function(){var t={image:r.AssetManager.getImage("image/enemy/goblin_spritesheet.png"),smooth:!1};return new r.Animation({sprites:[0,16,32,48,64,80].map((function(e){return new r.Sprite(q(q({},t),{},{slice:new r.Rectangle(e,0,16,16)}))})),speed:.4,loop:!0})};function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Z(t);if(e){var o=Z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K(this,n)}}function K(t,e){return!e||"object"!==Y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}(a,t);var e,n,o,i=X(a);function a(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.6;return W(this,a),(e=i.call(this)).spriteRenderer=void 0,e.animator=void 0,e.bodyCollider=void 0,e.edgeCollider=void 0,e.wallCollider=void 0,e.rigidBody=void 0,e.walkSpeed=1.6,e.jumpSpeed=14,e.jumping=!1,e.cacheVelocity=new r.Vector2,e.layer="Enemy",e.spriteRenderer=e.addComponent((function(){return new r.SpriteRenderer({sprite:new r.Sprite({image:r.AssetManager.getImage("image/enemy/goblin_spritesheet.png"),slice:new r.Rectangle(0,0,16,16),smooth:!1})})})),e.animator=e.addComponent((function(){return new r.Animator({spriteRenderer:e.spriteRenderer})})).addAnimation("Walking",H()),e.bodyCollider=e.addComponent((function(){return new r.BoxCollider({width:10,height:16,physics:!0,debug:!0})}),"BodyCollider"),e.edgeCollider=e.addComponent((function(){return new r.BoxCollider({width:4,height:4,offsetX:8,offsetY:-6,physics:!1,debug:!0})}),"EdgeCollider"),e.wallCollider=e.addComponent((function(){return new r.BoxCollider({width:4,height:4,offsetX:8,offsetY:5,physics:!1,debug:!0})}),"WallCollider"),e.rigidBody=e.addComponent((function(){return new r.RigidBody({rigidBodyType:r.RigidBodyType.Dynamic,layersToCollide:["Foreground","Player"],gravity:5})})),e.transform.position=t,e.walkSpeed=n,e}return e=a,(n=[{key:"start",value:function(){this.transform.scale.set(3,3),this.animator.playAnimation("Walking")}},{key:"update",value:function(){this.move()}},{key:"move",value:function(){if(!1!==this.bodyCollider.collidesWithLayer("Foreground")){var t=0;!1!==this.edgeCollider.collidesWithLayer("Foreground")&&!0!==this.wallCollider.collidesWithLayer("Foreground")||this.transform.scale.set(-this.transform.scale.x,this.transform.scale.y),this.wallCollider.collidesWithLayer("Player")&&!1===this.jumping&&(this.jumping=!0,t=this.jumpSpeed),!1===this.wallCollider.collidesWithLayer("Player")&&(this.jumping=!1),this.rigidBody.velocity.set(Math.sign(this.transform.scale.x)*this.walkSpeed,t)}}}])&&z(e.prototype,n),o&&z(e,o),a}(r.GameObject);n(178);function J(t){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function et(t,e){return(et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ot(t);if(e){var o=ot(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rt(this,n)}}function rt(t,e){return!e||"object"!==J(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var it=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&et(t,e)}(a,t);var e,n,o,i=nt(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this)).textRenderer=void 0,t.delay=.1,t.layer="UI",t.ui=!0,t.textRenderer=t.addComponent((function(){return new r.TextRenderer({text:[""],color:"#FFFFFF",size:12,font:"PressStart2P-Regular",width:128,height:16})})),t}return e=a,(n=[{key:"start",value:function(){this.transform.position.set(r.DomManager.gameWidth/2-120,20-r.DomManager.gameHeight/2)}},{key:"update",value:function(){if(this.delay+=r.TimeManager.deltaTime,this.delay>=.1){this.delay=0;var t=(1/r.TimeManager.deltaTime).toFixed(2);this.textRenderer.text=["FPS: ".concat(t)]}}}])&&tt(e.prototype,n),o&&tt(e,o),a}(r.GameObject);function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ft(t);if(e){var o=ft(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return st(this,n)}}function st(t,e){return!e||"object"!==at(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(n,t);var e=ct(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=e.call(this)).layer="Foreground",t.addComponent((function(){return new r.SpriteRenderer({sprite:new r.Sprite({image:r.AssetManager.getImage("image/misc/wooden_plate.png"),smooth:!1}),tiled:new r.Vector2(3,1),offset:new r.Vector2(0,0)})})),t.transform.scale.set(3,3),t.transform.position.set(72,-48),t.transform.rotation=0,t}return n}(r.GameObject);function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pt(t,e){return(pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gt(t);if(e){var o=gt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yt(this,n)}}function yt(t,e){return!e||"object"!==ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pt(t,e)}(n,t);var e=dt(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=e.call(this)).layer="Parallax",t.addComponent((function(){return new r.SpriteRenderer({sprite:new r.Sprite({image:r.AssetManager.getImage("image/scene/background.png"),smooth:!1}),tiled:new r.Vector2(2,1)})})),t.transform.scale.set(6,6),t.transform.position.set(0,0),t}return n}(r.GameObject);function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t,e){return(_t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt(this,n)}}function wt(t,e){return!e||"object"!==vt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_t(t,e)}(a,t);var e,n,o,i=Mt(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this)).fxCamera=void 0,r.AssetManager.createImage("image/tileset/tileset.png"),r.AssetManager.createImage("image/player/player-spritesheet.png"),r.AssetManager.createImage("image/enemy/goblin_spritesheet.png"),r.AssetManager.createImage("image/misc/wooden_plate.png"),r.AssetManager.createImage("image/scene/background.png"),t}return e=a,(n=[{key:"start",value:function(){this.addGameObject((function(){return new A}),"InputController"),this.addGameObject((function(){return new f(r.AssetManager.getImage("image/tileset/tileset.png"))}),"Foreground"),this.addGameObject((function(){return new lt}),"WoodenPlate"),this.addGameObject((function(){return new j}),"Player"),this.addGameObject((function(){return new mt}),"Parallax"),this.addGameObject((function(){return new $(new r.Vector2(-200,-48),2)}),"Enemy00"),this.addGameObject((function(){return new $(new r.Vector2(300,-48),2.4)}),"Enemy01"),this.addGameObject((function(){return new $(new r.Vector2(400,-48),1.6)}),"Enemy02"),this.addGameObject((function(){return new $(new r.Vector2(-400,-48),3)}),"Enemy03"),this.addGameObject((function(){return new $(new r.Vector2(-500,-48),2)}),"Enemy04"),this.addGameObject((function(){return new $(new r.Vector2(-600,-48),2.4)}),"Enemy05"),this.addGameObject((function(){return new $(new r.Vector2(600,-48),1.6)}),"Enemy06"),this.addGameObject((function(){return new $(new r.Vector2(800,-48),3)}),"Enemy07"),this.addGameObject((function(){return new $(new r.Vector2(364,-48),2.6)}),"Enemy08"),this.addGameObject((function(){return new $(new r.Vector2(100,-48),2.2)}),"Enemy09"),this.addGameObject((function(){return new it}),"FpsMetter"),this.gameCamera.layers=["Foreground","Enemy","Player","UI"],this.gameCamera.zoom=.01,this.gameCamera.addComponent((function(){return new N})),this.fxCamera=this.gameCamera.addChild((function(){return new r.GameCamera}),"FxCamera"),this.fxCamera.layers=["Parallax"],this.fxCamera.zoom=.01,this.fxCamera.depth=-1}},{key:"update",value:function(){this.gameCamera.zoom<1&&(this.gameCamera.zoom+=.01),this.fxCamera.zoom<.6&&(this.fxCamera.zoom+=.01)}}])&&bt(e.prototype,n),o&&bt(e,o),a}(r.Scene),jt={containerNode:document.querySelector("body"),gameWidth:1e3,gameHeight:562,debugEnabled:!1,context2d:"fallback",bgColor:"#967557"},Pt=new r.Game(jt);Pt.addScene("Stage01",(function(){return new Ot})),Pt.run()},function(t,e,n){"use strict";n.r(e),n.d(e,"glMatrix",(function(){return r})),n.d(e,"mat2",(function(){return o})),n.d(e,"mat2d",(function(){return i})),n.d(e,"mat3",(function(){return a})),n.d(e,"mat4",(function(){return u})),n.d(e,"quat",(function(){return f})),n.d(e,"quat2",(function(){return l})),n.d(e,"vec2",(function(){return h})),n.d(e,"vec3",(function(){return c})),n.d(e,"vec4",(function(){return s}));var r={};n.r(r),n.d(r,"EPSILON",(function(){return p})),n.d(r,"ARRAY_TYPE",(function(){return d})),n.d(r,"RANDOM",(function(){return y})),n.d(r,"setMatrixArrayType",(function(){return g})),n.d(r,"toRadian",(function(){return v})),n.d(r,"equals",(function(){return b}));var o={};n.r(o),n.d(o,"create",(function(){return _})),n.d(o,"clone",(function(){return M})),n.d(o,"copy",(function(){return w})),n.d(o,"identity",(function(){return x})),n.d(o,"fromValues",(function(){return O})),n.d(o,"set",(function(){return j})),n.d(o,"transpose",(function(){return P})),n.d(o,"invert",(function(){return R})),n.d(o,"adjoint",(function(){return E})),n.d(o,"determinant",(function(){return T})),n.d(o,"multiply",(function(){return S})),n.d(o,"rotate",(function(){return C})),n.d(o,"scale",(function(){return A})),n.d(o,"fromRotation",(function(){return D})),n.d(o,"fromScaling",(function(){return V})),n.d(o,"str",(function(){return I})),n.d(o,"frob",(function(){return L})),n.d(o,"LDU",(function(){return G})),n.d(o,"add",(function(){return F})),n.d(o,"subtract",(function(){return B})),n.d(o,"exactEquals",(function(){return N})),n.d(o,"equals",(function(){return k})),n.d(o,"multiplyScalar",(function(){return q})),n.d(o,"multiplyScalarAndAdd",(function(){return U})),n.d(o,"mul",(function(){return H})),n.d(o,"sub",(function(){return Y}));var i={};n.r(i),n.d(i,"create",(function(){return W})),n.d(i,"clone",(function(){return z})),n.d(i,"copy",(function(){return Q})),n.d(i,"identity",(function(){return X})),n.d(i,"fromValues",(function(){return K})),n.d(i,"set",(function(){return Z})),n.d(i,"invert",(function(){return $})),n.d(i,"determinant",(function(){return J})),n.d(i,"multiply",(function(){return tt})),n.d(i,"rotate",(function(){return et})),n.d(i,"scale",(function(){return nt})),n.d(i,"translate",(function(){return rt})),n.d(i,"fromRotation",(function(){return ot})),n.d(i,"fromScaling",(function(){return it})),n.d(i,"fromTranslation",(function(){return at})),n.d(i,"str",(function(){return ut})),n.d(i,"frob",(function(){return ct})),n.d(i,"add",(function(){return st})),n.d(i,"subtract",(function(){return ft})),n.d(i,"multiplyScalar",(function(){return lt})),n.d(i,"multiplyScalarAndAdd",(function(){return ht})),n.d(i,"exactEquals",(function(){return pt})),n.d(i,"equals",(function(){return dt})),n.d(i,"mul",(function(){return yt})),n.d(i,"sub",(function(){return gt}));var a={};n.r(a),n.d(a,"create",(function(){return mt})),n.d(a,"fromMat4",(function(){return vt})),n.d(a,"clone",(function(){return bt})),n.d(a,"copy",(function(){return _t})),n.d(a,"fromValues",(function(){return Mt})),n.d(a,"set",(function(){return wt})),n.d(a,"identity",(function(){return xt})),n.d(a,"transpose",(function(){return Ot})),n.d(a,"invert",(function(){return jt})),n.d(a,"adjoint",(function(){return Pt})),n.d(a,"determinant",(function(){return Rt})),n.d(a,"multiply",(function(){return Et})),n.d(a,"translate",(function(){return Tt})),n.d(a,"rotate",(function(){return St})),n.d(a,"scale",(function(){return Ct})),n.d(a,"fromTranslation",(function(){return At})),n.d(a,"fromRotation",(function(){return Dt})),n.d(a,"fromScaling",(function(){return Vt})),n.d(a,"fromMat2d",(function(){return It})),n.d(a,"fromQuat",(function(){return Lt})),n.d(a,"normalFromMat4",(function(){return Gt})),n.d(a,"projection",(function(){return Ft})),n.d(a,"str",(function(){return Bt})),n.d(a,"frob",(function(){return Nt})),n.d(a,"add",(function(){return kt})),n.d(a,"subtract",(function(){return qt})),n.d(a,"multiplyScalar",(function(){return Ut})),n.d(a,"multiplyScalarAndAdd",(function(){return Ht})),n.d(a,"exactEquals",(function(){return Yt})),n.d(a,"equals",(function(){return Wt})),n.d(a,"mul",(function(){return zt})),n.d(a,"sub",(function(){return Qt}));var u={};n.r(u),n.d(u,"create",(function(){return Xt})),n.d(u,"clone",(function(){return Kt})),n.d(u,"copy",(function(){return Zt})),n.d(u,"fromValues",(function(){return $t})),n.d(u,"set",(function(){return Jt})),n.d(u,"identity",(function(){return te})),n.d(u,"transpose",(function(){return ee})),n.d(u,"invert",(function(){return ne})),n.d(u,"adjoint",(function(){return re})),n.d(u,"determinant",(function(){return oe})),n.d(u,"multiply",(function(){return ie})),n.d(u,"translate",(function(){return ae})),n.d(u,"scale",(function(){return ue})),n.d(u,"rotate",(function(){return ce})),n.d(u,"rotateX",(function(){return se})),n.d(u,"rotateY",(function(){return fe})),n.d(u,"rotateZ",(function(){return le})),n.d(u,"fromTranslation",(function(){return he})),n.d(u,"fromScaling",(function(){return pe})),n.d(u,"fromRotation",(function(){return de})),n.d(u,"fromXRotation",(function(){return ye})),n.d(u,"fromYRotation",(function(){return ge})),n.d(u,"fromZRotation",(function(){return me})),n.d(u,"fromRotationTranslation",(function(){return ve})),n.d(u,"fromQuat2",(function(){return be})),n.d(u,"getTranslation",(function(){return _e})),n.d(u,"getScaling",(function(){return Me})),n.d(u,"getRotation",(function(){return we})),n.d(u,"fromRotationTranslationScale",(function(){return xe})),n.d(u,"fromRotationTranslationScaleOrigin",(function(){return Oe})),n.d(u,"fromQuat",(function(){return je})),n.d(u,"frustum",(function(){return Pe})),n.d(u,"perspective",(function(){return Re})),n.d(u,"perspectiveFromFieldOfView",(function(){return Ee})),n.d(u,"ortho",(function(){return Te})),n.d(u,"lookAt",(function(){return Se})),n.d(u,"targetTo",(function(){return Ce})),n.d(u,"str",(function(){return Ae})),n.d(u,"frob",(function(){return De})),n.d(u,"add",(function(){return Ve})),n.d(u,"subtract",(function(){return Ie})),n.d(u,"multiplyScalar",(function(){return Le})),n.d(u,"multiplyScalarAndAdd",(function(){return Ge})),n.d(u,"exactEquals",(function(){return Fe})),n.d(u,"equals",(function(){return Be})),n.d(u,"mul",(function(){return Ne})),n.d(u,"sub",(function(){return ke}));var c={};n.r(c),n.d(c,"create",(function(){return qe})),n.d(c,"clone",(function(){return Ue})),n.d(c,"length",(function(){return He})),n.d(c,"fromValues",(function(){return Ye})),n.d(c,"copy",(function(){return We})),n.d(c,"set",(function(){return ze})),n.d(c,"add",(function(){return Qe})),n.d(c,"subtract",(function(){return Xe})),n.d(c,"multiply",(function(){return Ke})),n.d(c,"divide",(function(){return Ze})),n.d(c,"ceil",(function(){return $e})),n.d(c,"floor",(function(){return Je})),n.d(c,"min",(function(){return tn})),n.d(c,"max",(function(){return en})),n.d(c,"round",(function(){return nn})),n.d(c,"scale",(function(){return rn})),n.d(c,"scaleAndAdd",(function(){return on})),n.d(c,"distance",(function(){return an})),n.d(c,"squaredDistance",(function(){return un})),n.d(c,"squaredLength",(function(){return cn})),n.d(c,"negate",(function(){return sn})),n.d(c,"inverse",(function(){return fn})),n.d(c,"normalize",(function(){return ln})),n.d(c,"dot",(function(){return hn})),n.d(c,"cross",(function(){return pn})),n.d(c,"lerp",(function(){return dn})),n.d(c,"hermite",(function(){return yn})),n.d(c,"bezier",(function(){return gn})),n.d(c,"random",(function(){return mn})),n.d(c,"transformMat4",(function(){return vn})),n.d(c,"transformMat3",(function(){return bn})),n.d(c,"transformQuat",(function(){return _n})),n.d(c,"rotateX",(function(){return Mn})),n.d(c,"rotateY",(function(){return wn})),n.d(c,"rotateZ",(function(){return xn})),n.d(c,"angle",(function(){return On})),n.d(c,"zero",(function(){return jn})),n.d(c,"str",(function(){return Pn})),n.d(c,"exactEquals",(function(){return Rn})),n.d(c,"equals",(function(){return En})),n.d(c,"sub",(function(){return Sn})),n.d(c,"mul",(function(){return Cn})),n.d(c,"div",(function(){return An})),n.d(c,"dist",(function(){return Dn})),n.d(c,"sqrDist",(function(){return Vn})),n.d(c,"len",(function(){return In})),n.d(c,"sqrLen",(function(){return Ln})),n.d(c,"forEach",(function(){return Gn}));var s={};n.r(s),n.d(s,"create",(function(){return Fn})),n.d(s,"clone",(function(){return Bn})),n.d(s,"fromValues",(function(){return Nn})),n.d(s,"copy",(function(){return kn})),n.d(s,"set",(function(){return qn})),n.d(s,"add",(function(){return Un})),n.d(s,"subtract",(function(){return Hn})),n.d(s,"multiply",(function(){return Yn})),n.d(s,"divide",(function(){return Wn})),n.d(s,"ceil",(function(){return zn})),n.d(s,"floor",(function(){return Qn})),n.d(s,"min",(function(){return Xn})),n.d(s,"max",(function(){return Kn})),n.d(s,"round",(function(){return Zn})),n.d(s,"scale",(function(){return $n})),n.d(s,"scaleAndAdd",(function(){return Jn})),n.d(s,"distance",(function(){return tr})),n.d(s,"squaredDistance",(function(){return er})),n.d(s,"length",(function(){return nr})),n.d(s,"squaredLength",(function(){return rr})),n.d(s,"negate",(function(){return or})),n.d(s,"inverse",(function(){return ir})),n.d(s,"normalize",(function(){return ar})),n.d(s,"dot",(function(){return ur})),n.d(s,"cross",(function(){return cr})),n.d(s,"lerp",(function(){return sr})),n.d(s,"random",(function(){return fr})),n.d(s,"transformMat4",(function(){return lr})),n.d(s,"transformQuat",(function(){return hr})),n.d(s,"zero",(function(){return pr})),n.d(s,"str",(function(){return dr})),n.d(s,"exactEquals",(function(){return yr})),n.d(s,"equals",(function(){return gr})),n.d(s,"sub",(function(){return mr})),n.d(s,"mul",(function(){return vr})),n.d(s,"div",(function(){return br})),n.d(s,"dist",(function(){return _r})),n.d(s,"sqrDist",(function(){return Mr})),n.d(s,"len",(function(){return wr})),n.d(s,"sqrLen",(function(){return xr})),n.d(s,"forEach",(function(){return Or}));var f={};n.r(f),n.d(f,"create",(function(){return jr})),n.d(f,"identity",(function(){return Pr})),n.d(f,"setAxisAngle",(function(){return Rr})),n.d(f,"getAxisAngle",(function(){return Er})),n.d(f,"getAngle",(function(){return Tr})),n.d(f,"multiply",(function(){return Sr})),n.d(f,"rotateX",(function(){return Cr})),n.d(f,"rotateY",(function(){return Ar})),n.d(f,"rotateZ",(function(){return Dr})),n.d(f,"calculateW",(function(){return Vr})),n.d(f,"exp",(function(){return Ir})),n.d(f,"ln",(function(){return Lr})),n.d(f,"pow",(function(){return Gr})),n.d(f,"slerp",(function(){return Fr})),n.d(f,"random",(function(){return Br})),n.d(f,"invert",(function(){return Nr})),n.d(f,"conjugate",(function(){return kr})),n.d(f,"fromMat3",(function(){return qr})),n.d(f,"fromEuler",(function(){return Ur})),n.d(f,"str",(function(){return Hr})),n.d(f,"clone",(function(){return Zr})),n.d(f,"fromValues",(function(){return $r})),n.d(f,"copy",(function(){return Jr})),n.d(f,"set",(function(){return to})),n.d(f,"add",(function(){return eo})),n.d(f,"mul",(function(){return no})),n.d(f,"scale",(function(){return ro})),n.d(f,"dot",(function(){return oo})),n.d(f,"lerp",(function(){return io})),n.d(f,"length",(function(){return ao})),n.d(f,"len",(function(){return uo})),n.d(f,"squaredLength",(function(){return co})),n.d(f,"sqrLen",(function(){return so})),n.d(f,"normalize",(function(){return fo})),n.d(f,"exactEquals",(function(){return lo})),n.d(f,"equals",(function(){return ho})),n.d(f,"rotationTo",(function(){return po})),n.d(f,"sqlerp",(function(){return yo})),n.d(f,"setAxes",(function(){return go}));var l={};n.r(l),n.d(l,"create",(function(){return mo})),n.d(l,"clone",(function(){return vo})),n.d(l,"fromValues",(function(){return bo})),n.d(l,"fromRotationTranslationValues",(function(){return _o})),n.d(l,"fromRotationTranslation",(function(){return Mo})),n.d(l,"fromTranslation",(function(){return wo})),n.d(l,"fromRotation",(function(){return xo})),n.d(l,"fromMat4",(function(){return Oo})),n.d(l,"copy",(function(){return jo})),n.d(l,"identity",(function(){return Po})),n.d(l,"set",(function(){return Ro})),n.d(l,"getReal",(function(){return Eo})),n.d(l,"getDual",(function(){return To})),n.d(l,"setReal",(function(){return So})),n.d(l,"setDual",(function(){return Co})),n.d(l,"getTranslation",(function(){return Ao})),n.d(l,"translate",(function(){return Do})),n.d(l,"rotateX",(function(){return Vo})),n.d(l,"rotateY",(function(){return Io})),n.d(l,"rotateZ",(function(){return Lo})),n.d(l,"rotateByQuatAppend",(function(){return Go})),n.d(l,"rotateByQuatPrepend",(function(){return Fo})),n.d(l,"rotateAroundAxis",(function(){return Bo})),n.d(l,"add",(function(){return No})),n.d(l,"multiply",(function(){return ko})),n.d(l,"mul",(function(){return qo})),n.d(l,"scale",(function(){return Uo})),n.d(l,"dot",(function(){return Ho})),n.d(l,"lerp",(function(){return Yo})),n.d(l,"invert",(function(){return Wo})),n.d(l,"conjugate",(function(){return zo})),n.d(l,"length",(function(){return Qo})),n.d(l,"len",(function(){return Xo})),n.d(l,"squaredLength",(function(){return Ko})),n.d(l,"sqrLen",(function(){return Zo})),n.d(l,"normalize",(function(){return $o})),n.d(l,"str",(function(){return Jo})),n.d(l,"exactEquals",(function(){return ti})),n.d(l,"equals",(function(){return ei}));var h={};n.r(h),n.d(h,"create",(function(){return ni})),n.d(h,"clone",(function(){return ri})),n.d(h,"fromValues",(function(){return oi})),n.d(h,"copy",(function(){return ii})),n.d(h,"set",(function(){return ai})),n.d(h,"add",(function(){return ui})),n.d(h,"subtract",(function(){return ci})),n.d(h,"multiply",(function(){return si})),n.d(h,"divide",(function(){return fi})),n.d(h,"ceil",(function(){return li})),n.d(h,"floor",(function(){return hi})),n.d(h,"min",(function(){return pi})),n.d(h,"max",(function(){return di})),n.d(h,"round",(function(){return yi})),n.d(h,"scale",(function(){return gi})),n.d(h,"scaleAndAdd",(function(){return mi})),n.d(h,"distance",(function(){return vi})),n.d(h,"squaredDistance",(function(){return bi})),n.d(h,"length",(function(){return _i})),n.d(h,"squaredLength",(function(){return Mi})),n.d(h,"negate",(function(){return wi})),n.d(h,"inverse",(function(){return xi})),n.d(h,"normalize",(function(){return Oi})),n.d(h,"dot",(function(){return ji})),n.d(h,"cross",(function(){return Pi})),n.d(h,"lerp",(function(){return Ri})),n.d(h,"random",(function(){return Ei})),n.d(h,"transformMat2",(function(){return Ti})),n.d(h,"transformMat2d",(function(){return Si})),n.d(h,"transformMat3",(function(){return Ci})),n.d(h,"transformMat4",(function(){return Ai})),n.d(h,"rotate",(function(){return Di})),n.d(h,"angle",(function(){return Vi})),n.d(h,"zero",(function(){return Ii})),n.d(h,"str",(function(){return Li})),n.d(h,"exactEquals",(function(){return Gi})),n.d(h,"equals",(function(){return Fi})),n.d(h,"len",(function(){return Bi})),n.d(h,"sub",(function(){return Ni})),n.d(h,"mul",(function(){return ki})),n.d(h,"div",(function(){return qi})),n.d(h,"dist",(function(){return Ui})),n.d(h,"sqrDist",(function(){return Hi})),n.d(h,"sqrLen",(function(){return Yi})),n.d(h,"forEach",(function(){return Wi}));var p=1e-6,d="undefined"!=typeof Float32Array?Float32Array:Array,y=Math.random;function g(t){d=t}var m=Math.PI/180;function v(t){return t*m}function b(t,e){return Math.abs(t-e)<=p*Math.max(1,Math.abs(t),Math.abs(e))}function _(){var t=new d(4);return d!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function M(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function w(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function x(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function O(t,e,n,r){var o=new d(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function j(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function P(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function R(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*i-o*r;return a?(a=1/a,t[0]=i*a,t[1]=-r*a,t[2]=-o*a,t[3]=n*a,t):null}function E(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function T(t){return t[0]*t[3]-t[2]*t[1]}function S(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=n[0],c=n[1],s=n[2],f=n[3];return t[0]=r*u+i*c,t[1]=o*u+a*c,t[2]=r*s+i*f,t[3]=o*s+a*f,t}function C(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+i*u,t[1]=o*c+a*u,t[2]=r*-u+i*c,t[3]=o*-u+a*c,t}function A(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=n[0],c=n[1];return t[0]=r*u,t[1]=o*u,t[2]=i*c,t[3]=a*c,t}function D(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function V(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function I(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function L(t){return Math.hypot(t[0],t[1],t[2],t[3])}function G(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function F(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function B(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function N(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function k(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=e[0],u=e[1],c=e[2],s=e[3];return Math.abs(n-a)<=p*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=p*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-c)<=p*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-s)<=p*Math.max(1,Math.abs(i),Math.abs(s))}function q(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function U(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var H=S,Y=B;function W(){var t=new d(6);return d!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function z(t){var e=new d(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Q(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function X(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function K(t,e,n,r,o,i){var a=new d(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=o,a[5]=i,a}function Z(t,e,n,r,o,i,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t}function $(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],c=n*i-r*o;return c?(c=1/c,t[0]=i*c,t[1]=-r*c,t[2]=-o*c,t[3]=n*c,t[4]=(o*u-i*a)*c,t[5]=(r*a-n*u)*c,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],c=e[5],s=n[0],f=n[1],l=n[2],h=n[3],p=n[4],d=n[5];return t[0]=r*s+i*f,t[1]=o*s+a*f,t[2]=r*l+i*h,t[3]=o*l+a*h,t[4]=r*p+i*d+u,t[5]=o*p+a*d+c,t}function et(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],c=e[5],s=Math.sin(n),f=Math.cos(n);return t[0]=r*f+i*s,t[1]=o*f+a*s,t[2]=r*-s+i*f,t[3]=o*-s+a*f,t[4]=u,t[5]=c,t}function nt(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],c=e[5],s=n[0],f=n[1];return t[0]=r*s,t[1]=o*s,t[2]=i*f,t[3]=a*f,t[4]=u,t[5]=c,t}function rt(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],c=e[5],s=n[0],f=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=r*s+i*f+u,t[5]=o*s+a*f+c,t}function ot(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function it(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function at(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function ut(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ct(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function st(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function ft(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function lt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function ht(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function pt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function dt(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],c=e[0],s=e[1],f=e[2],l=e[3],h=e[4],d=e[5];return Math.abs(n-c)<=p*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-s)<=p*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-f)<=p*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-l)<=p*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-h)<=p*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(u-d)<=p*Math.max(1,Math.abs(u),Math.abs(d))}var yt=tt,gt=ft;function mt(){var t=new d(9);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function vt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function bt(t){var e=new d(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function _t(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Mt(t,e,n,r,o,i,a,u,c){var s=new d(9);return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=o,s[5]=i,s[6]=a,s[7]=u,s[8]=c,s}function wt(t,e,n,r,o,i,a,u,c,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=u,t[7]=c,t[8]=s,t}function xt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ot(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function jt(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],c=e[6],s=e[7],f=e[8],l=f*a-u*s,h=-f*i+u*c,p=s*i-a*c,d=n*l+r*h+o*p;return d?(d=1/d,t[0]=l*d,t[1]=(-f*r+o*s)*d,t[2]=(u*r-o*a)*d,t[3]=h*d,t[4]=(f*n-o*c)*d,t[5]=(-u*n+o*i)*d,t[6]=p*d,t[7]=(-s*n+r*c)*d,t[8]=(a*n-r*i)*d,t):null}function Pt(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],c=e[6],s=e[7],f=e[8];return t[0]=a*f-u*s,t[1]=o*s-r*f,t[2]=r*u-o*a,t[3]=u*c-i*f,t[4]=n*f-o*c,t[5]=o*i-n*u,t[6]=i*s-a*c,t[7]=r*c-n*s,t[8]=n*a-r*i,t}function Rt(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],u=t[6],c=t[7],s=t[8];return e*(s*i-a*c)+n*(-s*o+a*u)+r*(c*o-i*u)}function Et(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=e[8],h=n[0],p=n[1],d=n[2],y=n[3],g=n[4],m=n[5],v=n[6],b=n[7],_=n[8];return t[0]=h*r+p*a+d*s,t[1]=h*o+p*u+d*f,t[2]=h*i+p*c+d*l,t[3]=y*r+g*a+m*s,t[4]=y*o+g*u+m*f,t[5]=y*i+g*c+m*l,t[6]=v*r+b*a+_*s,t[7]=v*o+b*u+_*f,t[8]=v*i+b*c+_*l,t}function Tt(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=e[8],h=n[0],p=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=c,t[6]=h*r+p*a+s,t[7]=h*o+p*u+f,t[8]=h*i+p*c+l,t}function St(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=e[8],h=Math.sin(n),p=Math.cos(n);return t[0]=p*r+h*a,t[1]=p*o+h*u,t[2]=p*i+h*c,t[3]=p*a-h*r,t[4]=p*u-h*o,t[5]=p*c-h*i,t[6]=s,t[7]=f,t[8]=l,t}function Ct(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function At(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Dt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Vt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function It(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Lt(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,u=r+r,c=o+o,s=n*a,f=r*a,l=r*u,h=o*a,p=o*u,d=o*c,y=i*a,g=i*u,m=i*c;return t[0]=1-l-d,t[3]=f-m,t[6]=h+g,t[1]=f+m,t[4]=1-s-d,t[7]=p-y,t[2]=h-g,t[5]=p+y,t[8]=1-s-l,t}function Gt(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],c=e[6],s=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],y=e[13],g=e[14],m=e[15],v=n*u-r*a,b=n*c-o*a,_=n*s-i*a,M=r*c-o*u,w=r*s-i*u,x=o*s-i*c,O=f*y-l*d,j=f*g-h*d,P=f*m-p*d,R=l*g-h*y,E=l*m-p*y,T=h*m-p*g,S=v*T-b*E+_*R+M*P-w*j+x*O;return S?(S=1/S,t[0]=(u*T-c*E+s*R)*S,t[1]=(c*P-a*T-s*j)*S,t[2]=(a*E-u*P+s*O)*S,t[3]=(o*E-r*T-i*R)*S,t[4]=(n*T-o*P+i*j)*S,t[5]=(r*P-n*E-i*O)*S,t[6]=(y*x-g*w+m*M)*S,t[7]=(g*_-d*x-m*b)*S,t[8]=(d*w-y*_+m*v)*S,t):null}function Ft(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Bt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Nt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function kt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function qt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Ut(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Ht(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Yt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Wt(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],c=t[6],s=t[7],f=t[8],l=e[0],h=e[1],d=e[2],y=e[3],g=e[4],m=e[5],v=e[6],b=e[7],_=e[8];return Math.abs(n-l)<=p*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-h)<=p*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-d)<=p*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-y)<=p*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(a-g)<=p*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-m)<=p*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-v)<=p*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(s-b)<=p*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(f-_)<=p*Math.max(1,Math.abs(f),Math.abs(_))}var zt=Et,Qt=qt;function Xt(){var t=new d(16);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Kt(t){var e=new d(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Zt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $t(t,e,n,r,o,i,a,u,c,s,f,l,h,p,y,g){var m=new d(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=o,m[5]=i,m[6]=a,m[7]=u,m[8]=c,m[9]=s,m[10]=f,m[11]=l,m[12]=h,m[13]=p,m[14]=y,m[15]=g,m}function Jt(t,e,n,r,o,i,a,u,c,s,f,l,h,p,d,y,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=u,t[7]=c,t[8]=s,t[9]=f,t[10]=l,t[11]=h,t[12]=p,t[13]=d,t[14]=y,t[15]=g,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],i=e[6],a=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=o,t[13]=a,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],c=e[6],s=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],y=e[13],g=e[14],m=e[15],v=n*u-r*a,b=n*c-o*a,_=n*s-i*a,M=r*c-o*u,w=r*s-i*u,x=o*s-i*c,O=f*y-l*d,j=f*g-h*d,P=f*m-p*d,R=l*g-h*y,E=l*m-p*y,T=h*m-p*g,S=v*T-b*E+_*R+M*P-w*j+x*O;return S?(S=1/S,t[0]=(u*T-c*E+s*R)*S,t[1]=(o*E-r*T-i*R)*S,t[2]=(y*x-g*w+m*M)*S,t[3]=(h*w-l*x-p*M)*S,t[4]=(c*P-a*T-s*j)*S,t[5]=(n*T-o*P+i*j)*S,t[6]=(g*_-d*x-m*b)*S,t[7]=(f*x-h*_+p*b)*S,t[8]=(a*E-u*P+s*O)*S,t[9]=(r*P-n*E-i*O)*S,t[10]=(d*w-y*_+m*v)*S,t[11]=(l*_-f*w-p*v)*S,t[12]=(u*j-a*R-c*O)*S,t[13]=(n*R-r*j+o*O)*S,t[14]=(y*b-d*M-g*v)*S,t[15]=(f*M-l*b+h*v)*S,t):null}function re(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],c=e[6],s=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],y=e[13],g=e[14],m=e[15];return t[0]=u*(h*m-p*g)-l*(c*m-s*g)+y*(c*p-s*h),t[1]=-(r*(h*m-p*g)-l*(o*m-i*g)+y*(o*p-i*h)),t[2]=r*(c*m-s*g)-u*(o*m-i*g)+y*(o*s-i*c),t[3]=-(r*(c*p-s*h)-u*(o*p-i*h)+l*(o*s-i*c)),t[4]=-(a*(h*m-p*g)-f*(c*m-s*g)+d*(c*p-s*h)),t[5]=n*(h*m-p*g)-f*(o*m-i*g)+d*(o*p-i*h),t[6]=-(n*(c*m-s*g)-a*(o*m-i*g)+d*(o*s-i*c)),t[7]=n*(c*p-s*h)-a*(o*p-i*h)+f*(o*s-i*c),t[8]=a*(l*m-p*y)-f*(u*m-s*y)+d*(u*p-s*l),t[9]=-(n*(l*m-p*y)-f*(r*m-i*y)+d*(r*p-i*l)),t[10]=n*(u*m-s*y)-a*(r*m-i*y)+d*(r*s-i*u),t[11]=-(n*(u*p-s*l)-a*(r*p-i*l)+f*(r*s-i*u)),t[12]=-(a*(l*g-h*y)-f*(u*g-c*y)+d*(u*h-c*l)),t[13]=n*(l*g-h*y)-f*(r*g-o*y)+d*(r*h-o*l),t[14]=-(n*(u*g-c*y)-a*(r*g-o*y)+d*(r*c-o*u)),t[15]=n*(u*h-c*l)-a*(r*h-o*l)+f*(r*c-o*u),t}function oe(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],u=t[6],c=t[7],s=t[8],f=t[9],l=t[10],h=t[11],p=t[12],d=t[13],y=t[14],g=t[15];return(e*a-n*i)*(l*g-h*y)-(e*u-r*i)*(f*g-h*d)+(e*c-o*i)*(f*y-l*d)+(n*u-r*a)*(s*g-h*p)-(n*c-o*a)*(s*y-l*p)+(r*c-o*u)*(s*d-f*p)}function ie(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=e[8],h=e[9],p=e[10],d=e[11],y=e[12],g=e[13],m=e[14],v=e[15],b=n[0],_=n[1],M=n[2],w=n[3];return t[0]=b*r+_*u+M*l+w*y,t[1]=b*o+_*c+M*h+w*g,t[2]=b*i+_*s+M*p+w*m,t[3]=b*a+_*f+M*d+w*v,b=n[4],_=n[5],M=n[6],w=n[7],t[4]=b*r+_*u+M*l+w*y,t[5]=b*o+_*c+M*h+w*g,t[6]=b*i+_*s+M*p+w*m,t[7]=b*a+_*f+M*d+w*v,b=n[8],_=n[9],M=n[10],w=n[11],t[8]=b*r+_*u+M*l+w*y,t[9]=b*o+_*c+M*h+w*g,t[10]=b*i+_*s+M*p+w*m,t[11]=b*a+_*f+M*d+w*v,b=n[12],_=n[13],M=n[14],w=n[15],t[12]=b*r+_*u+M*l+w*y,t[13]=b*o+_*c+M*h+w*g,t[14]=b*i+_*s+M*p+w*m,t[15]=b*a+_*f+M*d+w*v,t}function ae(t,e,n){var r,o,i,a,u,c,s,f,l,h,p,d,y=n[0],g=n[1],m=n[2];return e===t?(t[12]=e[0]*y+e[4]*g+e[8]*m+e[12],t[13]=e[1]*y+e[5]*g+e[9]*m+e[13],t[14]=e[2]*y+e[6]*g+e[10]*m+e[14],t[15]=e[3]*y+e[7]*g+e[11]*m+e[15]):(r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=e[8],h=e[9],p=e[10],d=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=c,t[6]=s,t[7]=f,t[8]=l,t[9]=h,t[10]=p,t[11]=d,t[12]=r*y+u*g+l*m+e[12],t[13]=o*y+c*g+h*m+e[13],t[14]=i*y+s*g+p*m+e[14],t[15]=a*y+f*g+d*m+e[15]),t}function ue(t,e,n){var r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ce(t,e,n,r){var o,i,a,u,c,s,f,l,h,d,y,g,m,v,b,_,M,w,x,O,j,P,R,E,T=r[0],S=r[1],C=r[2],A=Math.hypot(T,S,C);return A<p?null:(T*=A=1/A,S*=A,C*=A,o=Math.sin(n),a=1-(i=Math.cos(n)),u=e[0],c=e[1],s=e[2],f=e[3],l=e[4],h=e[5],d=e[6],y=e[7],g=e[8],m=e[9],v=e[10],b=e[11],_=T*T*a+i,M=S*T*a+C*o,w=C*T*a-S*o,x=T*S*a-C*o,O=S*S*a+i,j=C*S*a+T*o,P=T*C*a+S*o,R=S*C*a-T*o,E=C*C*a+i,t[0]=u*_+l*M+g*w,t[1]=c*_+h*M+m*w,t[2]=s*_+d*M+v*w,t[3]=f*_+y*M+b*w,t[4]=u*x+l*O+g*j,t[5]=c*x+h*O+m*j,t[6]=s*x+d*O+v*j,t[7]=f*x+y*O+b*j,t[8]=u*P+l*R+g*E,t[9]=c*P+h*R+m*E,t[10]=s*P+d*R+v*E,t[11]=f*P+y*R+b*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function se(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[4],a=e[5],u=e[6],c=e[7],s=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*o+s*r,t[5]=a*o+f*r,t[6]=u*o+l*r,t[7]=c*o+h*r,t[8]=s*o-i*r,t[9]=f*o-a*r,t[10]=l*o-u*r,t[11]=h*o-c*r,t}function fe(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],u=e[2],c=e[3],s=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o-s*r,t[1]=a*o-f*r,t[2]=u*o-l*r,t[3]=c*o-h*r,t[8]=i*r+s*o,t[9]=a*r+f*o,t[10]=u*r+l*o,t[11]=c*r+h*o,t}function le(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],u=e[2],c=e[3],s=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o+s*r,t[1]=a*o+f*r,t[2]=u*o+l*r,t[3]=c*o+h*r,t[4]=s*o-i*r,t[5]=f*o-a*r,t[6]=l*o-u*r,t[7]=h*o-c*r,t}function he(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function pe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function de(t,e,n){var r,o,i,a=n[0],u=n[1],c=n[2],s=Math.hypot(a,u,c);return s<p?null:(a*=s=1/s,u*=s,c*=s,r=Math.sin(e),i=1-(o=Math.cos(e)),t[0]=a*a*i+o,t[1]=u*a*i+c*r,t[2]=c*a*i-u*r,t[3]=0,t[4]=a*u*i-c*r,t[5]=u*u*i+o,t[6]=c*u*i+a*r,t[7]=0,t[8]=a*c*i+u*r,t[9]=u*c*i-a*r,t[10]=c*c*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function ye(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ge(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=r+r,c=o+o,s=i+i,f=r*u,l=r*c,h=r*s,p=o*c,d=o*s,y=i*s,g=a*u,m=a*c,v=a*s;return t[0]=1-(p+y),t[1]=l+v,t[2]=h-m,t[3]=0,t[4]=l-v,t[5]=1-(f+y),t[6]=d+g,t[7]=0,t[8]=h+m,t[9]=d-g,t[10]=1-(f+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function be(t,e){var n=new d(3),r=-e[0],o=-e[1],i=-e[2],a=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=r*r+o*o+i*i+a*a;return l>0?(n[0]=2*(u*a+f*r+c*i-s*o)/l,n[1]=2*(c*a+f*o+s*r-u*i)/l,n[2]=2*(s*a+f*i+u*o-c*r)/l):(n[0]=2*(u*a+f*r+c*i-s*o),n[1]=2*(c*a+f*o+s*r-u*i),n[2]=2*(s*a+f*i+u*o-c*r)),ve(t,e,n),t}function _e(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Me(t,e){var n=e[0],r=e[1],o=e[2],i=e[4],a=e[5],u=e[6],c=e[8],s=e[9],f=e[10];return t[0]=Math.hypot(n,r,o),t[1]=Math.hypot(i,a,u),t[2]=Math.hypot(c,s,f),t}function we(t,e){var n=new d(3);Me(n,e);var r=1/n[0],o=1/n[1],i=1/n[2],a=e[0]*r,u=e[1]*o,c=e[2]*i,s=e[4]*r,f=e[5]*o,l=e[6]*i,h=e[8]*r,p=e[9]*o,y=e[10]*i,g=a+f+y,m=0;return g>0?(m=2*Math.sqrt(g+1),t[3]=.25*m,t[0]=(l-p)/m,t[1]=(h-c)/m,t[2]=(u-s)/m):a>f&&a>y?(m=2*Math.sqrt(1+a-f-y),t[3]=(l-p)/m,t[0]=.25*m,t[1]=(u+s)/m,t[2]=(h+c)/m):f>y?(m=2*Math.sqrt(1+f-a-y),t[3]=(h-c)/m,t[0]=(u+s)/m,t[1]=.25*m,t[2]=(l+p)/m):(m=2*Math.sqrt(1+y-a-f),t[3]=(u-s)/m,t[0]=(h+c)/m,t[1]=(l+p)/m,t[2]=.25*m),t}function xe(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=e[3],c=o+o,s=i+i,f=a+a,l=o*c,h=o*s,p=o*f,d=i*s,y=i*f,g=a*f,m=u*c,v=u*s,b=u*f,_=r[0],M=r[1],w=r[2];return t[0]=(1-(d+g))*_,t[1]=(h+b)*_,t[2]=(p-v)*_,t[3]=0,t[4]=(h-b)*M,t[5]=(1-(l+g))*M,t[6]=(y+m)*M,t[7]=0,t[8]=(p+v)*w,t[9]=(y-m)*w,t[10]=(1-(l+d))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Oe(t,e,n,r,o){var i=e[0],a=e[1],u=e[2],c=e[3],s=i+i,f=a+a,l=u+u,h=i*s,p=i*f,d=i*l,y=a*f,g=a*l,m=u*l,v=c*s,b=c*f,_=c*l,M=r[0],w=r[1],x=r[2],O=o[0],j=o[1],P=o[2],R=(1-(y+m))*M,E=(p+_)*M,T=(d-b)*M,S=(p-_)*w,C=(1-(h+m))*w,A=(g+v)*w,D=(d+b)*x,V=(g-v)*x,I=(1-(h+y))*x;return t[0]=R,t[1]=E,t[2]=T,t[3]=0,t[4]=S,t[5]=C,t[6]=A,t[7]=0,t[8]=D,t[9]=V,t[10]=I,t[11]=0,t[12]=n[0]+O-(R*O+S*j+D*P),t[13]=n[1]+j-(E*O+C*j+V*P),t[14]=n[2]+P-(T*O+A*j+I*P),t[15]=1,t}function je(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,u=r+r,c=o+o,s=n*a,f=r*a,l=r*u,h=o*a,p=o*u,d=o*c,y=i*a,g=i*u,m=i*c;return t[0]=1-l-d,t[1]=f+m,t[2]=h-g,t[3]=0,t[4]=f-m,t[5]=1-s-d,t[6]=p+y,t[7]=0,t[8]=h+g,t[9]=p-y,t[10]=1-s-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pe(t,e,n,r,o,i,a){var u=1/(n-e),c=1/(o-r),s=1/(i-a);return t[0]=2*i*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*c,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(o+r)*c,t[10]=(a+i)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*s,t[15]=0,t}function Re(t,e,n,r,o){var i,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(r-o),t[10]=(o+r)*i,t[14]=2*o*r*i):(t[10]=-1,t[14]=-2*r),t}function Ee(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),c=2/(a+u),s=2/(o+i);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(a-u)*c*.5,t[9]=(o-i)*s*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Te(t,e,n,r,o,i,a){var u=1/(e-n),c=1/(r-o),s=1/(i-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(e+n)*u,t[13]=(o+r)*c,t[14]=(a+i)*s,t[15]=1,t}function Se(t,e,n,r){var o,i,a,u,c,s,f,l,h,d,y=e[0],g=e[1],m=e[2],v=r[0],b=r[1],_=r[2],M=n[0],w=n[1],x=n[2];return Math.abs(y-M)<p&&Math.abs(g-w)<p&&Math.abs(m-x)<p?te(t):(f=y-M,l=g-w,h=m-x,o=b*(h*=d=1/Math.hypot(f,l,h))-_*(l*=d),i=_*(f*=d)-v*h,a=v*l-b*f,(d=Math.hypot(o,i,a))?(o*=d=1/d,i*=d,a*=d):(o=0,i=0,a=0),u=l*a-h*i,c=h*o-f*a,s=f*i-l*o,(d=Math.hypot(u,c,s))?(u*=d=1/d,c*=d,s*=d):(u=0,c=0,s=0),t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=i,t[5]=c,t[6]=l,t[7]=0,t[8]=a,t[9]=s,t[10]=h,t[11]=0,t[12]=-(o*y+i*g+a*m),t[13]=-(u*y+c*g+s*m),t[14]=-(f*y+l*g+h*m),t[15]=1,t)}function Ce(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=r[0],c=r[1],s=r[2],f=o-n[0],l=i-n[1],h=a-n[2],p=f*f+l*l+h*h;p>0&&(f*=p=1/Math.sqrt(p),l*=p,h*=p);var d=c*h-s*l,y=s*f-u*h,g=u*l-c*f;return(p=d*d+y*y+g*g)>0&&(d*=p=1/Math.sqrt(p),y*=p,g*=p),t[0]=d,t[1]=y,t[2]=g,t[3]=0,t[4]=l*g-h*y,t[5]=h*d-f*g,t[6]=f*y-l*d,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=o,t[13]=i,t[14]=a,t[15]=1,t}function Ae(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function De(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Ve(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Ie(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Le(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Ge(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Fe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Be(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],c=t[6],s=t[7],f=t[8],l=t[9],h=t[10],d=t[11],y=t[12],g=t[13],m=t[14],v=t[15],b=e[0],_=e[1],M=e[2],w=e[3],x=e[4],O=e[5],j=e[6],P=e[7],R=e[8],E=e[9],T=e[10],S=e[11],C=e[12],A=e[13],D=e[14],V=e[15];return Math.abs(n-b)<=p*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-_)<=p*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(o-M)<=p*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(i-w)<=p*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-x)<=p*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(u-O)<=p*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(c-j)<=p*Math.max(1,Math.abs(c),Math.abs(j))&&Math.abs(s-P)<=p*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(f-R)<=p*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(l-E)<=p*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(h-T)<=p*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(d-S)<=p*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(y-C)<=p*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(g-A)<=p*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(m-D)<=p*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(v-V)<=p*Math.max(1,Math.abs(v),Math.abs(V))}var Ne=ie,ke=Ie;function qe(){var t=new d(3);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ue(t){var e=new d(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function He(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Ye(t,e,n){var r=new d(3);return r[0]=t,r[1]=e,r[2]=n,r}function We(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function ze(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Qe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Xe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ke(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Ze(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function $e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Je(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function en(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function nn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function rn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function on(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function an(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.hypot(n,r,o)}function un(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function cn(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function sn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function fn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function ln(t,e){var n=e[0],r=e[1],o=e[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function hn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function pn(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],u=n[1],c=n[2];return t[0]=o*c-i*u,t[1]=i*a-r*c,t[2]=r*u-o*a,t}function dn(t,e,n,r){var o=e[0],i=e[1],a=e[2];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t}function yn(t,e,n,r,o,i){var a=i*i,u=a*(2*i-3)+1,c=a*(i-2)+i,s=a*(i-1),f=a*(3-2*i);return t[0]=e[0]*u+n[0]*c+r[0]*s+o[0]*f,t[1]=e[1]*u+n[1]*c+r[1]*s+o[1]*f,t[2]=e[2]*u+n[2]*c+r[2]*s+o[2]*f,t}function gn(t,e,n,r,o,i){var a=1-i,u=a*a,c=i*i,s=u*a,f=3*i*u,l=3*c*a,h=c*i;return t[0]=e[0]*s+n[0]*f+r[0]*l+o[0]*h,t[1]=e[1]*s+n[1]*f+r[1]*l+o[1]*h,t[2]=e[2]*s+n[2]*f+r[2]*l+o[2]*h,t}function mn(t,e){e=e||1;var n=2*y()*Math.PI,r=2*y()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t}function vn(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,t[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,t[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,t}function bn(t,e,n){var r=e[0],o=e[1],i=e[2];return t[0]=r*n[0]+o*n[3]+i*n[6],t[1]=r*n[1]+o*n[4]+i*n[7],t[2]=r*n[2]+o*n[5]+i*n[8],t}function _n(t,e,n){var r=n[0],o=n[1],i=n[2],a=n[3],u=e[0],c=e[1],s=e[2],f=o*s-i*c,l=i*u-r*s,h=r*c-o*u,p=o*h-i*l,d=i*f-r*h,y=r*l-o*f,g=2*a;return f*=g,l*=g,h*=g,p*=2,d*=2,y*=2,t[0]=u+f+p,t[1]=c+l+d,t[2]=s+h+y,t}function Mn(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function wn(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function xn(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function On(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],u=e[2],c=Math.sqrt(n*n+r*r+o*o)*Math.sqrt(i*i+a*a+u*u),s=c&&hn(t,e)/c;return Math.acos(Math.min(Math.max(s,-1),1))}function jn(t){return t[0]=0,t[1]=0,t[2]=0,t}function Pn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Rn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function En(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],u=e[2];return Math.abs(n-i)<=p*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=p*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-u)<=p*Math.max(1,Math.abs(o),Math.abs(u))}var Tn,Sn=Xe,Cn=Ke,An=Ze,Dn=an,Vn=un,In=He,Ln=cn,Gn=(Tn=qe(),function(t,e,n,r,o,i){var a,u;for(e||(e=3),n||(n=0),u=r?Math.min(r*e+n,t.length):t.length,a=n;a<u;a+=e)Tn[0]=t[a],Tn[1]=t[a+1],Tn[2]=t[a+2],o(Tn,Tn,i),t[a]=Tn[0],t[a+1]=Tn[1],t[a+2]=Tn[2];return t});function Fn(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Bn(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Nn(t,e,n,r){var o=new d(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function kn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function qn(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function Un(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Hn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Yn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Wn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function zn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Qn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Xn(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Kn(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Zn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function $n(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Jn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function tr(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return Math.hypot(n,r,o,i)}function er(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+o*o+i*i}function nr(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.hypot(e,n,r,o)}function rr(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}function or(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function ir(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function ar(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=o*a,t[3]=i*a,t}function ur(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function cr(t,e,n,r){var o=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],u=n[1]*r[2]-n[2]*r[1],c=n[1]*r[3]-n[3]*r[1],s=n[2]*r[3]-n[3]*r[2],f=e[0],l=e[1],h=e[2],p=e[3];return t[0]=l*s-h*c+p*u,t[1]=-f*s+h*a-p*i,t[2]=f*c-l*a+p*o,t[3]=-f*u+l*i-h*o,t}function sr(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=e[3];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t[3]=u+r*(n[3]-u),t}function fr(t,e){var n,r,o,i,a,u;e=e||1;do{a=(n=2*y()-1)*n+(r=2*y()-1)*r}while(a>=1);do{u=(o=2*y()-1)*o+(i=2*y()-1)*i}while(u>=1);var c=Math.sqrt((1-a)/u);return t[0]=e*n,t[1]=e*r,t[2]=e*o*c,t[3]=e*i*c,t}function lr(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,t[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,t[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,t[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,t}function hr(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],u=n[1],c=n[2],s=n[3],f=s*r+u*i-c*o,l=s*o+c*r-a*i,h=s*i+a*o-u*r,p=-a*r-u*o-c*i;return t[0]=f*s+p*-a+l*-c-h*-u,t[1]=l*s+p*-u+h*-a-f*-c,t[2]=h*s+p*-c+f*-u-l*-a,t[3]=e[3],t}function pr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function dr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function yr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function gr(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=e[0],u=e[1],c=e[2],s=e[3];return Math.abs(n-a)<=p*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=p*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-c)<=p*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-s)<=p*Math.max(1,Math.abs(i),Math.abs(s))}var mr=Hn,vr=Yn,br=Wn,_r=tr,Mr=er,wr=nr,xr=rr,Or=function(){var t=Fn();return function(e,n,r,o,i,a){var u,c;for(n||(n=4),r||(r=0),c=o?Math.min(o*n+r,e.length):e.length,u=r;u<c;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],i(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();function jr(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Pr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Rr(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Er(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>p?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Tr(t,e){var n=oo(t,e);return Math.acos(2*n*n-1)}function Sr(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=n[0],c=n[1],s=n[2],f=n[3];return t[0]=r*f+a*u+o*s-i*c,t[1]=o*f+a*c+i*u-r*s,t[2]=i*f+a*s+r*c-o*u,t[3]=a*f-r*u-o*c-i*s,t}function Cr(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+a*u,t[1]=o*c+i*u,t[2]=i*c-o*u,t[3]=a*c-r*u,t}function Ar(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c-i*u,t[1]=o*c+a*u,t[2]=i*c+r*u,t[3]=a*c-o*u,t}function Dr(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*u,t[1]=o*c-r*u,t[2]=i*c+a*u,t[3]=a*c-i*u,t}function Vr(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t}function Ir(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=Math.sqrt(n*n+r*r+o*o),u=Math.exp(i),c=a>0?u*Math.sin(a)/a:0;return t[0]=n*c,t[1]=r*c,t[2]=o*c,t[3]=u*Math.cos(a),t}function Lr(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=Math.sqrt(n*n+r*r+o*o),u=a>0?Math.atan2(a,i)/a:0;return t[0]=n*u,t[1]=r*u,t[2]=o*u,t[3]=.5*Math.log(n*n+r*r+o*o+i*i),t}function Gr(t,e,n){return Lr(t,e),ro(t,t,n),Ir(t,t),t}function Fr(t,e,n,r){var o,i,a,u,c,s=e[0],f=e[1],l=e[2],h=e[3],d=n[0],y=n[1],g=n[2],m=n[3];return(i=s*d+f*y+l*g+h*m)<0&&(i=-i,d=-d,y=-y,g=-g,m=-m),1-i>p?(o=Math.acos(i),a=Math.sin(o),u=Math.sin((1-r)*o)/a,c=Math.sin(r*o)/a):(u=1-r,c=r),t[0]=u*s+c*d,t[1]=u*f+c*y,t[2]=u*l+c*g,t[3]=u*h+c*m,t}function Br(t){var e=y(),n=y(),r=y(),o=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t}function Nr(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i,u=a?1/a:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-o*u,t[3]=i*u,t}function kr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function qr(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*i+i]-e[3*a+a]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*i+a]-e[3*a+i])*n,t[i]=(e[3*i+o]+e[3*o+i])*n,t[a]=(e[3*a+o]+e[3*o+a])*n}return t}function Ur(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var i=Math.sin(e),a=Math.cos(e),u=Math.sin(n),c=Math.cos(n),s=Math.sin(r),f=Math.cos(r);return t[0]=i*c*f-a*u*s,t[1]=a*u*f+i*c*s,t[2]=a*c*s-i*u*f,t[3]=a*c*f+i*u*s,t}function Hr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Yr,Wr,zr,Qr,Xr,Kr,Zr=Bn,$r=Nn,Jr=kn,to=qn,eo=Un,no=Sr,ro=$n,oo=ur,io=sr,ao=nr,uo=ao,co=rr,so=co,fo=ar,lo=yr,ho=gr,po=(Yr=qe(),Wr=Ye(1,0,0),zr=Ye(0,1,0),function(t,e,n){var r=hn(e,n);return r<-.999999?(pn(Yr,Wr,e),In(Yr)<1e-6&&pn(Yr,zr,e),ln(Yr,Yr),Rr(t,Yr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(pn(Yr,e,n),t[0]=Yr[0],t[1]=Yr[1],t[2]=Yr[2],t[3]=1+r,fo(t,t))}),yo=(Qr=jr(),Xr=jr(),function(t,e,n,r,o,i){return Fr(Qr,e,o,i),Fr(Xr,n,r,i),Fr(t,Qr,Xr,2*i*(1-i)),t}),go=(Kr=mt(),function(t,e,n,r){return Kr[0]=n[0],Kr[3]=n[1],Kr[6]=n[2],Kr[1]=r[0],Kr[4]=r[1],Kr[7]=r[2],Kr[2]=-e[0],Kr[5]=-e[1],Kr[8]=-e[2],fo(t,qr(t,Kr))});function mo(){var t=new d(8);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function vo(t){var e=new d(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function bo(t,e,n,r,o,i,a,u){var c=new d(8);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=o,c[5]=i,c[6]=a,c[7]=u,c}function _o(t,e,n,r,o,i,a){var u=new d(8);u[0]=t,u[1]=e,u[2]=n,u[3]=r;var c=.5*o,s=.5*i,f=.5*a;return u[4]=c*r+s*n-f*e,u[5]=s*r+f*t-c*n,u[6]=f*r+c*e-s*t,u[7]=-c*t-s*e-f*n,u}function Mo(t,e,n){var r=.5*n[0],o=.5*n[1],i=.5*n[2],a=e[0],u=e[1],c=e[2],s=e[3];return t[0]=a,t[1]=u,t[2]=c,t[3]=s,t[4]=r*s+o*c-i*u,t[5]=o*s+i*a-r*c,t[6]=i*s+r*u-o*a,t[7]=-r*a-o*u-i*c,t}function wo(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function xo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Oo(t,e){var n=jr();we(n,e);var r=new d(3);return _e(r,e),Mo(t,n,r),t}function jo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Po(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ro(t,e,n,r,o,i,a,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=u,t[7]=c,t}var Eo=Jr;function To(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var So=Jr;function Co(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Ao(t,e){var n=e[4],r=e[5],o=e[6],i=e[7],a=-e[0],u=-e[1],c=-e[2],s=e[3];return t[0]=2*(n*s+i*a+r*c-o*u),t[1]=2*(r*s+i*u+o*a-n*c),t[2]=2*(o*s+i*c+n*u-r*a),t}function Do(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=.5*n[0],c=.5*n[1],s=.5*n[2],f=e[4],l=e[5],h=e[6],p=e[7];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=a*u+o*s-i*c+f,t[5]=a*c+i*u-r*s+l,t[6]=a*s+r*c-o*u+h,t[7]=-r*u-o*c-i*s+p,t}function Vo(t,e,n){var r=-e[0],o=-e[1],i=-e[2],a=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=u*a+f*r+c*i-s*o,h=c*a+f*o+s*r-u*i,p=s*a+f*i+u*o-c*r,d=f*a-u*r-c*o-s*i;return Cr(t,e,n),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=l*a+d*r+h*i-p*o,t[5]=h*a+d*o+p*r-l*i,t[6]=p*a+d*i+l*o-h*r,t[7]=d*a-l*r-h*o-p*i,t}function Io(t,e,n){var r=-e[0],o=-e[1],i=-e[2],a=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=u*a+f*r+c*i-s*o,h=c*a+f*o+s*r-u*i,p=s*a+f*i+u*o-c*r,d=f*a-u*r-c*o-s*i;return Ar(t,e,n),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=l*a+d*r+h*i-p*o,t[5]=h*a+d*o+p*r-l*i,t[6]=p*a+d*i+l*o-h*r,t[7]=d*a-l*r-h*o-p*i,t}function Lo(t,e,n){var r=-e[0],o=-e[1],i=-e[2],a=e[3],u=e[4],c=e[5],s=e[6],f=e[7],l=u*a+f*r+c*i-s*o,h=c*a+f*o+s*r-u*i,p=s*a+f*i+u*o-c*r,d=f*a-u*r-c*o-s*i;return Dr(t,e,n),r=t[0],o=t[1],i=t[2],a=t[3],t[4]=l*a+d*r+h*i-p*o,t[5]=h*a+d*o+p*r-l*i,t[6]=p*a+d*i+l*o-h*r,t[7]=d*a-l*r-h*o-p*i,t}function Go(t,e,n){var r=n[0],o=n[1],i=n[2],a=n[3],u=e[0],c=e[1],s=e[2],f=e[3];return t[0]=u*a+f*r+c*i-s*o,t[1]=c*a+f*o+s*r-u*i,t[2]=s*a+f*i+u*o-c*r,t[3]=f*a-u*r-c*o-s*i,u=e[4],c=e[5],s=e[6],f=e[7],t[4]=u*a+f*r+c*i-s*o,t[5]=c*a+f*o+s*r-u*i,t[6]=s*a+f*i+u*o-c*r,t[7]=f*a-u*r-c*o-s*i,t}function Fo(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=n[0],c=n[1],s=n[2],f=n[3];return t[0]=r*f+a*u+o*s-i*c,t[1]=o*f+a*c+i*u-r*s,t[2]=i*f+a*s+r*c-o*u,t[3]=a*f-r*u-o*c-i*s,u=n[4],c=n[5],s=n[6],f=n[7],t[4]=r*f+a*u+o*s-i*c,t[5]=o*f+a*c+i*u-r*s,t[6]=i*f+a*s+r*c-o*u,t[7]=a*f-r*u-o*c-i*s,t}function Bo(t,e,n,r){if(Math.abs(r)<p)return jo(t,e);var o=Math.hypot(n[0],n[1],n[2]);r*=.5;var i=Math.sin(r),a=i*n[0]/o,u=i*n[1]/o,c=i*n[2]/o,s=Math.cos(r),f=e[0],l=e[1],h=e[2],d=e[3];t[0]=f*s+d*a+l*c-h*u,t[1]=l*s+d*u+h*a-f*c,t[2]=h*s+d*c+f*u-l*a,t[3]=d*s-f*a-l*u-h*c;var y=e[4],g=e[5],m=e[6],v=e[7];return t[4]=y*s+v*a+g*c-m*u,t[5]=g*s+v*u+m*a-y*c,t[6]=m*s+v*c+y*u-g*a,t[7]=v*s-y*a-g*u-m*c,t}function No(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function ko(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=n[4],c=n[5],s=n[6],f=n[7],l=e[4],h=e[5],p=e[6],d=e[7],y=n[0],g=n[1],m=n[2],v=n[3];return t[0]=r*v+a*y+o*m-i*g,t[1]=o*v+a*g+i*y-r*m,t[2]=i*v+a*m+r*g-o*y,t[3]=a*v-r*y-o*g-i*m,t[4]=r*f+a*u+o*s-i*c+l*v+d*y+h*m-p*g,t[5]=o*f+a*c+i*u-r*s+h*v+d*g+p*y-l*m,t[6]=i*f+a*s+r*c-o*u+p*v+d*m+l*g-h*y,t[7]=a*f-r*u-o*c-i*s+d*v-l*y-h*g-p*m,t}var qo=ko;function Uo(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var Ho=oo;function Yo(t,e,n,r){var o=1-r;return Ho(e,n)<0&&(r=-r),t[0]=e[0]*o+n[0]*r,t[1]=e[1]*o+n[1]*r,t[2]=e[2]*o+n[2]*r,t[3]=e[3]*o+n[3]*r,t[4]=e[4]*o+n[4]*r,t[5]=e[5]*o+n[5]*r,t[6]=e[6]*o+n[6]*r,t[7]=e[7]*o+n[7]*r,t}function Wo(t,e){var n=Ko(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function zo(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Qo=ao,Xo=Qo,Ko=co,Zo=Ko;function $o(t,e){var n=Ko(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,o=e[1]/n,i=e[2]/n,a=e[3]/n,u=e[4],c=e[5],s=e[6],f=e[7],l=r*u+o*c+i*s+a*f;t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=(u-r*l)/n,t[5]=(c-o*l)/n,t[6]=(s-i*l)/n,t[7]=(f-a*l)/n}return t}function Jo(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function ti(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function ei(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],c=t[6],s=t[7],f=e[0],l=e[1],h=e[2],d=e[3],y=e[4],g=e[5],m=e[6],v=e[7];return Math.abs(n-f)<=p*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-l)<=p*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-h)<=p*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-d)<=p*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-y)<=p*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(u-g)<=p*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-m)<=p*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(s-v)<=p*Math.max(1,Math.abs(s),Math.abs(v))}function ni(){var t=new d(2);return d!=Float32Array&&(t[0]=0,t[1]=0),t}function ri(t){var e=new d(2);return e[0]=t[0],e[1]=t[1],e}function oi(t,e){var n=new d(2);return n[0]=t,n[1]=e,n}function ii(t,e){return t[0]=e[0],t[1]=e[1],t}function ai(t,e,n){return t[0]=e,t[1]=n,t}function ui(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function ci(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function si(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function fi(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function li(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function hi(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function pi(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function di(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function yi(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function gi(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function mi(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function vi(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function bi(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function _i(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function Mi(t){var e=t[0],n=t[1];return e*e+n*n}function wi(t,e){return t[0]=-e[0],t[1]=-e[1],t}function xi(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Oi(t,e){var n=e[0],r=e[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function ji(t,e){return t[0]*e[0]+t[1]*e[1]}function Pi(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function Ri(t,e,n,r){var o=e[0],i=e[1];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t}function Ei(t,e){e=e||1;var n=2*y()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function Ti(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t}function Si(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t}function Ci(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t}function Ai(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t}function Di(t,e,n,r){var o=e[0]-n[0],i=e[1]-n[1],a=Math.sin(r),u=Math.cos(r);return t[0]=o*u-i*a+n[0],t[1]=o*a+i*u+n[1],t}function Vi(t,e){var n=t[0],r=t[1],o=e[0],i=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(o*o+i*i),u=a&&(n*o+r*i)/a;return Math.acos(Math.min(Math.max(u,-1),1))}function Ii(t){return t[0]=0,t[1]=0,t}function Li(t){return"vec2("+t[0]+", "+t[1]+")"}function Gi(t,e){return t[0]===e[0]&&t[1]===e[1]}function Fi(t,e){var n=t[0],r=t[1],o=e[0],i=e[1];return Math.abs(n-o)<=p*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-i)<=p*Math.max(1,Math.abs(r),Math.abs(i))}var Bi=_i,Ni=ci,ki=si,qi=fi,Ui=vi,Hi=bi,Yi=Mi,Wi=function(){var t=ni();return function(e,n,r,o,i,a){var u,c;for(n||(n=2),r||(r=0),c=o?Math.min(o*n+r,e.length):e.length,u=r;u<c;u+=n)t[0]=e[u],t[1]=e[u+1],i(t,t,a),e[u]=t[0],e[u+1]=t[1];return e}}()}]);